Metadata-Version: 2.1
Name: aiocli
Version: 1.9.0
Summary: Simple and lightweight async console runner.
Author-email: ticdenis <denisnavarroalcaide@outlook.es>, yasti4 <adria_4_@hotmail.com>
Maintainer-email: ticdenis <denisnavarroalcaide@outlook.es>
License: MIT
Project-URL: documentation, https://aiopy.github.io/python-aiocli/
Project-URL: repository, https://github.com/aiopy/python-aiocli
Keywords: asyncio,async,aio,cli,console
Classifier: Intended Audience :: Information Technology
Classifier: Intended Audience :: System Administrators
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Software Development :: Libraries
Classifier: Topic :: Software Development
Classifier: Typing :: Typed
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3 :: Only
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Provides-Extra: deploy
Requires-Dist: build >=0.10.0 ; extra == 'deploy'
Requires-Dist: setuptools >=68.1.2 ; extra == 'deploy'
Requires-Dist: twine >=4.0.2 ; extra == 'deploy'
Requires-Dist: wheel >=0.41.1 ; extra == 'deploy'
Provides-Extra: dev
Requires-Dist: pre-commit >=3.3.3 ; extra == 'dev'
Requires-Dist: tomli >=2.0.1 ; (python_version < "3.11") and extra == 'dev'
Requires-Dist: types-toml >=0.10.8.7 ; (python_version < "3.11") and extra == 'dev'
Provides-Extra: docs
Requires-Dist: mkdocs >=1.5.2 ; extra == 'docs'
Requires-Dist: mkdocs-material >=9.1.21 ; extra == 'docs'
Provides-Extra: fmt
Requires-Dist: black >=23.7.0 ; extra == 'fmt'
Requires-Dist: isort >=5.12.0 ; extra == 'fmt'
Provides-Extra: security-analysis
Requires-Dist: bandit >=1.7.5 ; extra == 'security-analysis'
Requires-Dist: liccheck >=0.9.1 ; extra == 'security-analysis'
Provides-Extra: static-analysis
Requires-Dist: mypy >=1.5.1 ; extra == 'static-analysis'
Requires-Dist: pylint >=2.17.5 ; extra == 'static-analysis'
Provides-Extra: test
Requires-Dist: psutil >=5.9.5 ; extra == 'test'
Requires-Dist: pytest >=7.4.0 ; extra == 'test'
Requires-Dist: pytest-asyncio >=0.21.1 ; extra == 'test'
Requires-Dist: pytest-cov >=4.1.0 ; extra == 'test'
Requires-Dist: pytest-xdist >=3.3.1 ; extra == 'test'

# Async cli client/commander framework

[![PyPI version](https://badge.fury.io/py/aiocli.svg)](https://badge.fury.io/py/aiocli)
[![PyPIDownloads](https://static.pepy.tech/badge/aiocli)](https://pepy.tech/project/aiocli)
[![CI](https://github.com/aiopy/python-aiocli/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/aiopy/python-aiocli/actions/workflows/ci.yml)

aiocli is a Python library for simple and lightweight async console runner.

Full compatibility with argparse module and highly inspired by aiohttp module.

## Installation

Use the package manager [pip](https://pypi.org/project/aiocli/) to install aiocli.

```bash
pip install aiocli
```

## Documentation

- Visit [aiocli docs](https://aiopy.github.io/python-aiocli/).

## Usage

```python
from logging import getLogger, Logger, StreamHandler
from os import getenv

from aiocli.commander import run_app, Application, Depends, State

app = Application(state={
    'envs': {
        'LOGGER_NAME': str(getenv('LOGGER_NAME', 'example_app')),
        'LOGGER_LEVEL': str(getenv('LOGGER_LEVEL', 'INFO')),
    }
})

def _get_logger(state: State) -> Logger:
    logger = getLogger(state.get('envs')['LOGGER_NAME'])
    logger.setLevel(state.get('envs')['LOGGER_LEVEL'])
    handler = StreamHandler()
    logger.addHandler(handler)
    return logger

@app.command(name='greet:to', positionals=[('name', {'default': 'World!'})])
async def handle_greeting(name: str, logger: Logger = Depends(_get_logger)) -> int:
    logger.info(f'Hello {name}')
    return 0

@app.command(name='div', optionals=[('--a', {'type': float}), ('--b', {'type': float})])
async def handle_division(a: float, b: float, logger: Logger = Depends(_get_logger)) -> int:
    try:
        logger.info(f'Result {a} / {b} = {(a / b)}')
        return 0
    except BaseException as err:
        logger.error(f'Error: {err}')
        return 1

# python3 main.py <command> <positionals> <optionals>
if __name__ == '__main__':
    run_app(app)
```

## Requirements

- Python >= 3.7

## Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

Please make sure to update tests as appropriate.

## License

[MIT](https://github.com/aiopy/python-aiocli/blob/master/LICENSE)
