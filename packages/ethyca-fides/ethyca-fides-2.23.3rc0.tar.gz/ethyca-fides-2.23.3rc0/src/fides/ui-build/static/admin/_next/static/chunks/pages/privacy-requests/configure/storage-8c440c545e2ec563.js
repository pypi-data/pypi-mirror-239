(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{24487:function(e,r,t){"use strict";t.d(r,{At:function(){return f},aG:function(){return v},gN:function(){return h}});var n=t(32393),s=t(14007),i=t(49031),a=t(27378);function o(){return o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)}function c(e,r){if(null==e)return{};var t,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(s[t]=e[t]);return s}var l=["spacing"],u=["isCurrentPage","as","className","href"],d=["isCurrentPage","separator","isLastChild","spacing","children","className"],m=["children","spacing","separator","className"],p=(0,n.Gp)((function(e,r){var t=e.spacing,s=c(e,l),i=o({mx:t},(0,n.yK)().separator);return a.createElement(n.m$.span,o({ref:r,role:"presentation"},s,{__css:i}))}));s.Ts&&(p.displayName="BreadcrumbSeparator");var f=(0,n.Gp)((function(e,r){var t=e.isCurrentPage,i=e.as,l=e.className,d=e.href,m=c(e,u),p=(0,n.yK)(),f=o({ref:r,as:i,className:(0,s.cx)("chakra-breadcrumb__link",l)},m);return t?a.createElement(n.m$.span,o({"aria-current":"page",__css:p.link},f)):a.createElement(n.m$.a,o({__css:p.link,href:d},f))}));s.Ts&&(f.displayName="BreadcrumbLink");var h=(0,n.Gp)((function(e,r){var t=e.isCurrentPage,l=e.separator,u=e.isLastChild,m=e.spacing,h=e.children,v=e.className,x=c(e,d),g=(0,i.WR)(h).map((function(e){return e.type===f?a.cloneElement(e,{isCurrentPage:t}):e.type===p?a.cloneElement(e,{spacing:m,children:e.props.children||l}):e})),j=o({display:"inline-flex",alignItems:"center"},(0,n.yK)().item),y=(0,s.cx)("chakra-breadcrumb__list-item",v);return a.createElement(n.m$.li,o({ref:r,className:y},x,{__css:j}),g,!u&&a.createElement(p,{spacing:m},l))}));s.Ts&&(h.displayName="BreadcrumbItem");var v=(0,n.Gp)((function(e,r){var t=(0,n.jC)("Breadcrumb",e),l=(0,n.Lr)(e),u=l.children,d=l.spacing,p=void 0===d?"0.5rem":d,f=l.separator,h=void 0===f?"/":f,v=l.className,x=c(l,m),g=(0,i.WR)(u),j=g.length,y=g.map((function(e,r){return a.cloneElement(e,{separator:h,spacing:p,isLastChild:j===r+1})})),b=(0,s.cx)("chakra-breadcrumb",v);return a.createElement(n.m$.nav,o({ref:r,"aria-label":"breadcrumb",className:b,__css:t.container},x),a.createElement(n.Fo,{value:t},a.createElement(n.m$.ol,{className:"chakra-breadcrumb__list"},y)))}));s.Ts&&(v.displayName="Breadcrumb")},51471:function(e,r,t){"use strict";t.d(r,{Z:function(){return v}});var n=t(34896),s=t(88038),i=t.n(s),a=t(86677),o=(t(27378),t(90768)),c=t(35100),l=t(64989),u=t(48114),d=t(51365),m=t(29549),p=t(60709),f=t(24246),h=function(){var e=(0,a.useRouter)();return(0,f.jsx)(n.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,f.jsxs)(n.xu,{children:[(0,f.jsxs)(n.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,f.jsx)(n.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,f.jsx)(m.zx,{size:"sm",variant:"outline",onClick:function(){e.push(p.fz)},children:"Configure"})]}),(0,f.jsxs)(n.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},v=function(e){var r=e.children,t=e.title,s=(0,o.hz)(),m=(0,a.useRouter)(),p="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,v=!(s.flags.privacyRequestsConfiguration&&p),x=(0,d.JE)(void 0,{skip:v}).data,g=(0,d.PW)(void 0,{skip:v}).data,j=s.flags.privacyRequestsConfiguration&&(!x||!g)&&p;return(0,f.jsxs)(n.kC,{"data-testid":t,direction:"column",children:[(0,f.jsxs)(i(),{children:[(0,f.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,f.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,f.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,f.jsx)(c.Z,{}),(0,f.jsx)(u.Z,{}),(0,f.jsxs)(n.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,f.jsx)(n.xu,{flex:0,flexShrink:0,children:(0,f.jsx)(l.U,{})}),(0,f.jsxs)(n.kC,{direction:"column",flex:1,minWidth:0,children:[j?(0,f.jsx)(h,{}):null,r]})]})]})}},9408:function(e,r,t){"use strict";t.d(r,{HK:function(){return i},VY:function(){return n.V}});var n=t(36653),s=t(78624),i=function(){var e=(0,n.V)().errorAlert;return{handleError:function(r){var t="An unexpected error occurred. Please try again.";(0,s.Ot)(r)?t=r.data.detail:(0,s.tB)(r)&&(t=r.data.detail[0].msg),e(t)}}};t(27378)},36653:function(e,r,t){"use strict";t.d(r,{V:function(){return d}});var n=t(90849),s=t(70409),i=t(23286),a=t(34896),o=t(93235),c=t(24246);function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var d=function(){var e=(0,s.pm)();return{errorAlert:function(r,t,n){var s=u(u({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"error",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(a.xu,{children:[t&&(0,c.jsx)(i.Cd,{children:t}),(0,c.jsx)(i.X,{children:r})]}),(0,c.jsx)(o.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)},successAlert:function(r,t,n){var s=u(u({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(a.xu,{children:[t&&(0,c.jsx)(i.Cd,{children:t}),(0,c.jsx)(i.X,{children:r})]}),(0,c.jsx)(o.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)}}}},24330:function(e,r,t){"use strict";t.d(r,{DE:function(){return i},MP:function(){return n},qX:function(){return s}});var n=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]),s={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},i={local:"local",s3:"s3"}},70810:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return C}});var n=t(55732),s=t(97865),i=t(34707),a=t.n(i),o=t(34896),c=t(24487),l=t(73772),u=t(79894),d=t.n(u),m=t(27378),p=t(78624),f=t(9408),h=t(51471),v=t(24330),x=t(51365),g=t(29549),j=t(34090),y=t(43139),b=t(24246),_=function(e){var r,t,i,c,l,u=e.storageDetails,d=(0,m.useState)(""),h=d[0],_=d[1],k=(0,x.gC)(),C=(0,s.Z)(k,1)[0],w=(0,x.cf)(),E=(0,s.Z)(w,1)[0],P=(0,f.HK)().handleError,S=(0,f.VY)().successAlert,q={type:v.DE.s3,auth_method:null!==(r=null===u||void 0===u||null===(t=u.details)||void 0===t?void 0:t.auth_method)&&void 0!==r?r:"",bucket:null!==(i=null===u||void 0===u||null===(c=u.details)||void 0===c?void 0:c.bucket)&&void 0!==i?i:"",format:null!==(l=null===u||void 0===u?void 0:u.format)&&void 0!==l?l:""},O=function(){var e=(0,n.Z)(a().mark((function e(r){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({type:v.DE.s3,details:{auth_method:r.auth_method,bucket:r.bucket},format:r.format});case 2:t=e.sent,(0,p.D4)(t)?P(t.error):(_(r.auth_method),S("S3 storage credentials successfully updated."));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),N=function(){var e=(0,n.Z)(a().mark((function e(r){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({details:{aws_access_key_id:r.aws_access_key_id,aws_secret_access_key:r.aws_secret_access_key},type:v.DE.s3});case 2:t=e.sent,(0,p.D4)(t)?P(t.error):S("S3 storage secrets successfully updated.");case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.X6,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,b.jsx)(o.Kq,{children:(0,b.jsx)(j.J9,{initialValues:q,onSubmit:O,enableReinitialize:!0,children:function(e){var r=e.isSubmitting,t=e.handleReset;return(0,b.jsxs)(j.l0,{children:[(0,b.jsxs)(o.Kq,{mt:5,spacing:5,children:[(0,b.jsx)(y.AP,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,b.jsx)(y.AP,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,b.jsx)(y.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,b.jsx)(g.zx,{onClick:function(){return t()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,b.jsx)(g.zx,{mt:5,isDisabled:r,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.iz,{mt:5}),(0,b.jsx)(o.X6,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,b.jsx)(o.Kq,{children:(0,b.jsx)(j.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:N,children:function(e){var r=e.isSubmitting,t=e.handleReset;return(0,b.jsxs)(j.l0,{children:[(0,b.jsxs)(o.Kq,{mt:5,spacing:5,children:[(0,b.jsx)(y.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,b.jsx)(y.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,b.jsxs)(o.xu,{mt:10,children:[(0,b.jsx)(g.zx,{onClick:function(){return t()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,b.jsx)(g.zx,{mt:5,isDisabled:r,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},k=function(){var e=(0,f.VY)().successAlert,r=(0,f.HK)().handleError,t=(0,m.useState)(""),i=t[0],u=t[1],g=(0,x.PW)().data,j=(0,x.Au)({type:i}).data,y=(0,x.gC)(),k=(0,s.Z)(y,2),C=k[0],w=k[1].isLoading,E=(0,x.L)(),P=(0,s.Z)(E,1)[0];(0,m.useEffect)((function(){g&&u(g.type)}),[g]);var S=function(){var t=(0,n.Z)(a().mark((function t(n){var s,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==v.DE.local){t.next=5;break}return t.next=3,C({type:n,details:{},format:"json"});case 3:s=t.sent,(0,p.D4)(s)?r(s.error):e("Configured storage details successfully.");case 5:return t.next=7,P({storage:{active_default_storage_type:n}});case 7:i=t.sent,(0,p.D4)(i)?r(i.error):u(n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,b.jsxs)(h.Z,{title:"Configure Privacy Requests - Storage",children:[(0,b.jsx)(o.xu,{mb:8,children:(0,b.jsxs)(c.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600",children:[(0,b.jsx)(c.gN,{children:(0,b.jsx)(c.At,{as:d(),href:"/privacy-requests",children:"Privacy requests"})}),(0,b.jsx)(c.gN,{children:(0,b.jsx)(c.At,{as:d(),href:"/privacy-requests/configure",children:"Configuration"})}),(0,b.jsx)(c.gN,{color:"complimentary.500",children:(0,b.jsx)(c.At,{as:d(),href:"/privacy-requests/configure/storage",isCurrentPage:!0,children:"Configure storage"})})]})}),(0,b.jsx)(o.X6,{mb:5,fontSize:"2xl",fontWeight:"semibold",children:"Configure storage"}),(0,b.jsxs)(o.xu,{display:"flex",flexDirection:"column",width:"50%",children:[(0,b.jsx)(o.xu,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,b.jsxs)(o.xu,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,b.jsx)(o.xv,{as:"span",color:"complimentary.500",children:"Local"})," ","and"," ",(0,b.jsx)(o.xv,{as:"span",color:"complimentary.500",children:"S3"})," ","storage methods."]}),(0,b.jsx)(o.X6,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,b.jsx)(l.Ee,{isDisabled:w,onChange:S,value:i,"data-testid":"privacy-requests-storage-selection",colorScheme:"secondary",p:3,children:(0,b.jsxs)(o.Kq,{direction:"row",children:[(0,b.jsx)(l.Y8,{value:"local","data-testid":"option-local",mr:5,children:"Local"},"local"),(0,b.jsx)(l.Y8,{value:"s3","data-testid":"option-s3",children:"S3"},"s3")]})}),"s3"===i&&j?(0,b.jsx)(_,{storageDetails:j}):null]})]})},C=function(){return(0,b.jsx)(k,{})}},23663:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return t(70810)}])}},function(e){e.O(0,[2141,845,9,9774,2888,179],(function(){return r=23663,e(e.s=r);var r}));var r=e.O();_N_E=r}]);