(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{24487:function(e,n,r){"use strict";r.d(n,{At:function(){return m},aG:function(){return v},gN:function(){return h}});var t=r(32393),i=r(14007),o=r(49031),s=r(27378);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},a.apply(this,arguments)}function c(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}var l=["spacing"],u=["isCurrentPage","as","className","href"],d=["isCurrentPage","separator","isLastChild","spacing","children","className"],p=["children","spacing","separator","className"],f=(0,t.Gp)((function(e,n){var r=e.spacing,i=c(e,l),o=a({mx:r},(0,t.yK)().separator);return s.createElement(t.m$.span,a({ref:n,role:"presentation"},i,{__css:o}))}));i.Ts&&(f.displayName="BreadcrumbSeparator");var m=(0,t.Gp)((function(e,n){var r=e.isCurrentPage,o=e.as,l=e.className,d=e.href,p=c(e,u),f=(0,t.yK)(),m=a({ref:n,as:o,className:(0,i.cx)("chakra-breadcrumb__link",l)},p);return r?s.createElement(t.m$.span,a({"aria-current":"page",__css:f.link},m)):s.createElement(t.m$.a,a({__css:f.link,href:d},m))}));i.Ts&&(m.displayName="BreadcrumbLink");var h=(0,t.Gp)((function(e,n){var r=e.isCurrentPage,l=e.separator,u=e.isLastChild,p=e.spacing,h=e.children,v=e.className,g=c(e,d),b=(0,o.WR)(h).map((function(e){return e.type===m?s.cloneElement(e,{isCurrentPage:r}):e.type===f?s.cloneElement(e,{spacing:p,children:e.props.children||l}):e})),y=a({display:"inline-flex",alignItems:"center"},(0,t.yK)().item),x=(0,i.cx)("chakra-breadcrumb__list-item",v);return s.createElement(t.m$.li,a({ref:n,className:x},g,{__css:y}),b,!u&&s.createElement(f,{spacing:p},l))}));i.Ts&&(h.displayName="BreadcrumbItem");var v=(0,t.Gp)((function(e,n){var r=(0,t.jC)("Breadcrumb",e),l=(0,t.Lr)(e),u=l.children,d=l.spacing,f=void 0===d?"0.5rem":d,m=l.separator,h=void 0===m?"/":m,v=l.className,g=c(l,p),b=(0,o.WR)(u),y=b.length,x=b.map((function(e,n){return s.cloneElement(e,{separator:h,spacing:f,isLastChild:y===n+1})})),j=(0,i.cx)("chakra-breadcrumb",v);return s.createElement(t.m$.nav,a({ref:n,"aria-label":"breadcrumb",className:j,__css:r.container},g),s.createElement(t.Fo,{value:r},s.createElement(t.m$.ol,{className:"chakra-breadcrumb__list"},x)))}));i.Ts&&(v.displayName="Breadcrumb")},55447:function(e,n,r){"use strict";var t=r(90849),i=r(60530),o=r(34896),s=r(29549),a=r(24246);function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.Z=function(e){var n=e.isOpen,r=e.onClose,t=e.onConfirm,c=e.onCancel,u=e.title,d=e.message,p=e.cancelButtonText,f=e.cancelButtonThemingProps,m=e.continueButtonText,h=e.continueButtonThemingProps,v=e.isLoading,g=e.returnFocusOnClose,b=e.isCentered,y=e.testId,x=void 0===y?"confirmation-modal":y,j=e.icon;return(0,a.jsxs)(i.u_,{isOpen:n,onClose:r,size:"lg",returnFocusOnClose:null===g||void 0===g||g,isCentered:b,children:[(0,a.jsx)(i.ZA,{}),(0,a.jsxs)(i.hz,{textAlign:"center",p:6,"data-testid":x,children:[j?(0,a.jsx)(o.M5,{mb:2,children:j}):null,u?(0,a.jsx)(i.xB,{fontWeight:"medium",pb:0,children:u}):null,d?(0,a.jsx)(i.fe,{children:d}):null,(0,a.jsx)(i.mz,{children:(0,a.jsxs)(o.MI,{columns:2,width:"100%",children:[(0,a.jsx)(s.zx,l(l({variant:"outline",mr:3,onClick:function(){c&&c(),r()},"data-testid":"cancel-btn",isDisabled:v},f),{},{children:p||"Cancel"})),(0,a.jsx)(s.zx,l(l({colorScheme:"primary",onClick:t,"data-testid":"continue-btn",isLoading:v},h),{},{children:m||"Continue"}))]})})]})]})}},8800:function(e,n,r){"use strict";r.d(n,{Q:function(){return o}});var t=r(13018),i=r(24246),o=(0,t.IU)({displayName:"SparkleIcon",viewBox:"0 0 18 18",path:(0,i.jsx)("path",{fill:"currentColor",d:"M9.53604 15.8107C9.81449 15.8107 10.0158 15.6256 10.0681 15.3471C10.7648 11.6208 11.1324 11.0552 14.8315 10.559C15.1373 10.518 15.3337 10.303 15.3337 10.0245C15.3337 9.74611 15.1373 9.53357 14.8315 9.49254C11.1609 8.99636 10.6349 8.45671 10.0681 4.71568C10.0246 4.42354 9.81449 4.22717 9.53604 4.22717C9.28 4.22717 9.05872 4.41234 9.01768 4.70447C8.34835 8.43318 7.95089 8.99143 4.24063 9.49254C3.94849 9.53357 3.74963 9.74611 3.74963 10.0245C3.74963 10.303 3.94849 10.5155 4.24063 10.559C7.91753 11.0847 8.446 11.5836 9.01768 15.3359C9.04995 15.6256 9.26003 15.8107 9.53604 15.8107ZM3.62366 7.96543C3.82881 7.96543 3.9954 7.81253 4.03397 7.60739C4.40352 5.74358 4.25772 5.75481 6.22471 5.41918C6.44356 5.38938 6.58033 5.21404 6.58033 5.0089C6.58033 4.81497 6.44109 4.63717 6.22471 4.5986C4.26265 4.27148 4.40105 4.26655 4.03397 2.43529C3.9954 2.22768 3.84249 2.06358 3.62366 2.06358C3.41604 2.06358 3.26314 2.21648 3.21335 2.43529C2.84873 4.25179 2.9896 4.25179 1.02259 4.5986C0.814976 4.63963 0.666992 4.81497 0.666992 5.0089C0.666992 5.23894 0.814976 5.38938 1.05241 5.41918C2.98714 5.74249 2.84626 5.73868 3.21335 7.58252C3.26314 7.80132 3.40483 7.96543 3.62366 7.96543ZM8.03377 3.9032C8.17054 3.9032 8.27749 3.80747 8.30485 3.6707C8.5461 2.4508 8.47882 2.4732 9.75105 2.22703C9.89903 2.19969 9.9923 2.09273 9.9923 1.95599C9.9923 1.81922 9.89656 1.71472 9.74858 1.68738C8.46759 1.43874 8.52367 1.43874 8.30485 0.254909C8.27749 0.106937 8.18175 0 8.03377 0C7.897 0 7.80126 0.106939 7.76269 0.257375C7.50393 1.43874 7.60488 1.43874 6.31652 1.68738C6.16851 1.71472 6.08647 1.81922 6.08647 1.95599C6.08647 2.10396 6.16851 2.19723 6.33265 2.22703C7.60488 2.43956 7.50393 2.45079 7.76269 3.64827C7.80126 3.80747 7.897 3.9032 8.03377 3.9032Z"})})},90212:function(e,n,r){"use strict";r.d(n,{k:function(){return o}});var t=r(55447),i=r(24246),o=function(e){var n=e.onCancel,r=e.onConfirm,o=e.isOpen,s=e.onClose;return(0,i.jsx)(t.Z,{isOpen:o,onClose:s,onCancel:n,isCentered:!0,title:"Upgrade to choose vendors",message:"To choose vendors and have system information auto-populated using Fides Compass, you will need to upgrade Fides. Meanwhile, you can manually add individual systems using the button below.",cancelButtonText:"Add vendors manually",continueButtonText:"Upgrade",onConfirm:r})}},29073:function(e,n,r){"use strict";var t=r(34896),i=r(73452),o=r(24246);n.Z=function(e){var n=e.title,r=e.description,s=e.button;return(0,o.jsxs)(t.Ug,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,px:6,"data-testid":"empty-state",children:[(0,o.jsx)(i.ii,{alignSelf:"start",color:"blue.400",mt:.5}),(0,o.jsxs)(t.xu,{flexGrow:1,children:[(0,o.jsx)(t.xv,{fontWeight:"bold",fontSize:"sm",mb:1,children:n}),(0,o.jsx)(t.xv,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:r})]}),s]})}},82466:function(e,n,r){"use strict";var t=r(90089),i=r(90849),o=r(40240),s=r(34896),a=r(55422),c=r(24246),l=r(27378),u=["key"],d=["key"];function p(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function f(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?p(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.Z=function(e){var n=e.rowHeading,r=e.renderRowSubheading,i=e.renderOverflowMenu,p=e.rows,m=e.prepareRow,h=e.getTableBodyProps,v=e.onSubrowClick;return(0,c.jsx)(o.p3,f(f({backgroundColor:a.p},h()),{},{children:p.map((function(e){return m(e),[(0,l.createElement)(o.Tr,f(f({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal,"data-testid":"grouped-row-".concat(e.groupByVal)}),(0,c.jsxs)(o.Td,f(f({display:"flex",justifyContent:"space-between",colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,c.jsxs)(s.Kq,{children:[n?(0,c.jsx)(s.xv,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:n}):null,(0,c.jsx)(s.xv,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",mb:1,children:r(e)})]}),i?i(e):null]}))),e.subRows.map((function(n,r){m(n);var i=n.getRowProps(),s=i.key,a=(0,t.Z)(i,u);return(0,c.jsx)(o.Tr,f(f({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:r===e.subRows.length-1?"6px":"",borderBottomRightRadius:r===e.subRows.length-1?"6px":""},a),{},{_hover:{bg:"gray.50"},cursor:v?"pointer":void 0,backgroundColor:"white",onClick:v?function(){return v(n)}:void 0,ml:4,mr:4,_last:{mb:4},children:n.cells.map((function(e,r){var i=e.getCellProps(),s=i.key,a=(0,t.Z)(i,d);return(0,c.jsx)(o.Td,f(f({},a),{},{borderRightWidth:r===n.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,"data-testid":"subrow-".concat(s),children:e.render("Cell")}),s)}))}),s)}))]}))}))}},99725:function(e,n,r){"use strict";var t=r(90849),i=r(90089),o=r(40240),s=r(34896),a=r(55422),c=r(24246),l=["key"],u=["key"];function d(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function p(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?d(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var f=function(){return(0,c.jsx)(o.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})};n.Z=function(e){var n=e.headerGroups;return(0,c.jsx)(o.hr,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:a.p,children:n.map((function(e){var n=e.getHeaderGroupProps(),r=n.key,t=(0,i.Z)(n,l);return(0,c.jsxs)(o.Tr,p(p({},t),{},{height:"inherit",children:[(0,c.jsx)(f,{}),e.headers.map((function(e,n){var r=e.getHeaderProps(),t=r.key,a=(0,i.Z)(r,u);return(0,c.jsxs)(o.Th,p(p({},a),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===n?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,c.jsx)(s.xv,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,c.jsx)(s.xu,p(p({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),t)})),(0,c.jsx)(f,{})]}),r)}))})}},55422:function(e,n,r){"use strict";r.d(n,{p:function(){return t}});var t="#F7F7F7"},24753:function(e,n,r){"use strict";r.d(n,{MA:function(){return u},Vo:function(){return p},t5:function(){return d}});var t=r(90849),i=r(34896),o=r(24246);function s(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function a(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?s(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var c=function(e){var n=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",n]})},l=function(e){var n=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",n]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var n=(0,o.jsx)(c,{message:e});return a(a({},u),{description:n})},p=function(e){var n=(0,o.jsx)(l,{message:e});return a(a({},u),{description:n,status:"error"})}},37761:function(e,n,r){"use strict";r.d(n,{E:function(){return t}});var t=function(e){return e.toLowerCase().replace(/ /g,"_").replace(/[^a-zA-Z0-9._<>-]/g,"")}},16446:function(e,n,r){"use strict";r.d(n,{U:function(){return t}});var t=function(e){var n,r=e.data_categories.flatMap((function(e){return e.split(",")}));return{data_use:e.data_use,data_categories:r,features:e.features,legal_basis_for_processing:e.legal_basis_for_processing,flexible_legal_basis_for_processing:e.flexible_legal_basis_for_processing,retention_period:"".concat(e.retention_period),cookies:null===(n=e.cookies)||void 0===n?void 0:n.map((function(e){return{name:e.name,domain:e.domain,path:e.path}}))}}},39246:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return ve}});var t=r(34896),i=r(24487),o=r(79894),s=r.n(o),a=r(27378),c=r(51471),l=r(60709),u=r(83125),d=r(29073),p=r(73679),f=r(90089),m=r(55732),h=r(97865),v=r(90849),g=r(34707),b=r.n(g),y=r(21084),x=r(70409),j=r(29549),O=r(34090),C=r(68301),_=r(6848),k=r(90768),w=r(43139),P={name:"",consent_use:"",data_use:"",data_categories:["user"],cookieNames:[],cookies:[]},S=[{label:"Analytics",value:"analytics",description:"Provides analytics for activities such as system and advertising performance reporting, insights and fraud detection."},{label:"Essential",value:"essential",description:"Operates the service or product, including legal obligations, support and basic system operations."},{label:"Functional",value:"functional",description:"Used for specific, necessary, and legitimate purposes."},{label:"Marketing",value:"marketing",description:"Enables marketing, promotion, advertising and sales activities for the product, service, application or system."}],E=function(e){return S.some((function(n){return n.value===e.split(".")[0]}))},Z=r(37761),D=r(44047),z=r(48466),N=r(78624),T=r(24753),R=r(60530),B=r(8800),F=r(24246),A=function(e){var n=e.title,r=e.children,i=e.isOpen,o=e.onClose,s=e.onSuggestionClick,a=e.suggestionsState,c=(0,k.hz)();return(0,F.jsxs)(R.u_,{isOpen:i,onClose:o,isCentered:!0,scrollBehavior:"inside",size:"xl",children:[(0,F.jsx)(R.ZA,{}),(0,F.jsxs)(R.hz,{textAlign:"left",p:0,children:[(0,F.jsx)(R.xB,{p:0,children:(0,F.jsxs)(t.xu,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,F.jsx)(t.X6,{as:"h3",size:"sm",children:n}),c.dictionaryService?(0,F.jsx)(j.hU,{icon:(0,F.jsx)(B.Q,{color:"showing"===a?"complimentary.500":void 0}),"aria-label":"See compass suggestions",variant:"outline",borderColor:"gray.200",onClick:s,isDisabled:"disabled"===a,"data-testid":"sparkle-btn"}):null]})}),(0,F.jsx)(R.fe,{pb:4,overflow:"scroll",children:r})]})]})},M=r(86677),V=r(90212),W=function(e){var n=e.onCancel,r=(0,M.useRouter)(),t=(0,y.qY)(),i=t.isOpen,o=t.onOpen,s=t.onClose,a=(0,k.hz)().dictionaryService;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(V.k,{isOpen:i,onClose:s,onConfirm:function(){window.open("https://fid.es/upgrade-compass")},onCancel:function(){s(),n()}}),(0,F.jsx)(j.zx,{onClick:function(){a?r.push(l.Gg):o()},"data-testid":"add-multiple-vendors-btn",size:"sm",colorScheme:"primary",children:"Add multiple vendors"})]})},G=r(75846),L=r(16446),U=function(e){var n=e.index,r=e.isSuggestion,i=(0,_.C)(G.oW),o=r?"complimentary.500":"gray.800",s=(0,O.u6)().values,a=i.filter((function(e){return e.value.split(".")[0]===s.privacy_declarations[n].consent_use}));return(0,F.jsxs)(t.gC,{width:"100%",borderRadius:"4px",border:"1px solid",borderColor:"gray.200",spacing:4,p:4,children:[(0,F.jsx)(w.AP,{label:"Data use",tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",name:"privacy_declarations.".concat(n,".consent_use"),options:S,variant:"stacked",isRequired:!0,isCustomOption:!0,singleValueBlock:!0,textColor:o}),(0,F.jsx)(w.AP,{label:"Detailed data use (optional)",tooltip:"Select a more specific data use",name:"privacy_declarations.".concat(n,".data_use"),options:a,variant:"stacked",isCustomOption:!0,singleValueBlock:!0,textColor:o,isDisabled:!s.privacy_declarations[n].consent_use}),(0,F.jsx)(w.VT,{label:"Cookie names",name:"privacy_declarations.".concat(n,".cookieNames"),options:[],variant:"stacked",isMulti:!0,textColor:o})]})},I=function(e){var n=e.showSuggestions,r=(0,O.u6)(),t=r.values,i=r.setFieldValue,o=t.vendor_id,s=(0,D.Wp)({vendor_id:o},{skip:!n||null==o}).isLoading,c=(0,_.C)((0,D.cL)(o||""));return(0,a.useEffect)((function(){if(n&&t.vendor_id&&null!==c&&void 0!==c&&c.length){var e=c.filter((function(e){return E(e.data_use)})).map((function(e){return(0,L.U)(e)})).map((function(e){var n,r,t;return{name:null!==(n=e.name)&&void 0!==n?n:"",consent_use:e.data_use.split(".")[0],data_use:e.data_use,data_categories:e.data_categories,cookieNames:(null===(r=e.cookies)||void 0===r?void 0:r.map((function(e){return e.name})))||[],cookies:null!==(t=e.cookies)&&void 0!==t?t:[]}}));i("privacy_declarations",e)}}),[n,t.vendor_id,c,i]),s?(0,F.jsx)(u.$,{size:"sm",alignSelf:"center"}):(0,F.jsx)(O.F2,{name:"privacy_declarations",render:function(e){var r,i;return(0,F.jsxs)(F.Fragment,{children:[t.privacy_declarations.map((function(e,r){return(0,F.jsx)(U,{index:r,isSuggestion:n},e.data_use||r)})),(0,F.jsx)(j.zx,{size:"xs",variant:"ghost",colorScheme:"complimentary",onClick:function(){e.push(P)},disabled:(null===(r=t.privacy_declarations[t.privacy_declarations.length-1])||void 0===r?void 0:r.data_use)===P.data_use&&(null===(i=t.privacy_declarations[t.privacy_declarations.length-1])||void 0===i?void 0:i.consent_use)===P.consent_use,"data-testid":"add-data-use-btn",children:"Add data use +"})]})}})},q=["cookieNames","consent_use"];function H(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function $(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?H(Object(r),!0).forEach((function(n){(0,v.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var X={name:"",vendor_id:void 0,privacy_declarations:[P]},K=C.Ry().shape({name:C.Z_().required().label("Vendor name")}),Y=C.Ry().shape({vendor_id:C.Z_().when("name",{is:function(e){return""===e||null},then:C.Z_().required().label("Vendor"),otherwise:C.Z_().nullable().label("Vendor")}),name:C.Z_().when("vendor_id",{is:function(e){return""===e||null},then:C.Z_().required().label("Name"),otherwise:C.Z_().nullable().label("Name")})},[["name","vendor_id"]]),Q=function(e){var n,r=e.passedInSystem,i=e.onCloseModal,o=(0,y.qY)(),s=$($({},o),{},{isOpen:!!r||o.isOpen}),c=(0,x.pm)(),l=(0,k.hz)().dictionaryService,u=(0,D.Rd)(void 0,{skip:!l}).isLoading,d=(0,_.C)(D.o),v=(0,z.f7)(),g=(0,h.Z)(v,1)[0],C=(0,z.qQ)(),S=(0,h.Z)(C,1)[0],R=(0,a.useState)(!1),B=R[0],M=R[1],V=function(){s.onClose(),i&&i(),M(!1)},G=r?{name:null!==(n=r.name)&&void 0!==n?n:"",vendor_id:r.vendor_id,privacy_declarations:r.privacy_declarations.filter((function(e){return E(e.data_use)})).map((function(e){var n,r;return $($({},e),{},{name:null!==(n=e.name)&&void 0!==n?n:"",cookies:null!==(r=e.cookies)&&void 0!==r?r:[],cookieNames:e.cookies?e.cookies.map((function(e){return e.name})):[],consent_use:e.data_use.split(".")[0]})}))}:X,L=function(){var e=(0,m.Z)(b().mark((function e(n,t){var i,o,s,a,l,u,m,h;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.privacy_declarations.filter((function(e){return e.consent_use!==P.consent_use})).flatMap((function(e){var n=e.cookieNames.map((function(n){var r=e.cookies.find((function(e){return e.name===n}));return null!==r&&void 0!==r?r:{name:n,path:"/"}})),r=(e.cookieNames,e.consent_use,(0,f.Z)(e,q));return"marketing"!==e.consent_use||e.data_use?$($({},r),{},{data_use:e.data_use?e.data_use:e.consent_use,cookies:n}):["marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"].map((function(e){return $($({},r),{},{data_use:e,cookies:n})}))})),o=r?r.privacy_declarations.filter((function(e){return!E(e.data_use)})):[],s=r?[].concat((0,p.Z)(o),(0,p.Z)(i)):i,a=d.find((function(e){return e.value===n.vendor_id})),l=a?a.value:void 0,u=n.name,a?u=a.label:n.vendor_id&&(u=n.vendor_id),m={vendor_id:l,name:r?r.name:u,fides_key:r?r.fides_key:(0,Z.E)(u),system_type:r?r.system_type:"",privacy_declarations:s},!r){e.next=14;break}return e.next=11,S(m);case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,g(m);case 16:e.t0=e.sent;case 17:if(h=e.t0,!(0,N.D4)(h)){e.next=21;break}return c((0,T.Vo)((0,N.e$)(h.error))),e.abrupt("return");case 21:c((0,T.t5)("Vendor successfully ".concat(r?"updated":"created","!"))),t.resetForm(),V();case 24:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),U=l?Y:K;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(t.xu,{mr:2,children:(0,F.jsx)(W,{onCancel:s.onOpen})}),(0,F.jsx)(j.zx,{onClick:s.onOpen,"data-testid":"add-vendor-btn",size:"sm",colorScheme:"primary",children:"Add vendor"}),(0,F.jsx)(O.J9,{initialValues:G,enableReinitialize:!0,onSubmit:L,validationSchema:U,children:function(e){var n,i=e.dirty,o=e.values,a=e.isValid,c=e.resetForm;return d.every((function(e){return e.value!==o.vendor_id}))?n="disabled":B&&(n="showing"),(0,F.jsx)(A,{isOpen:s.isOpen,onClose:s.onClose,title:r?"Edit vendor":"Add a vendor",onSuggestionClick:function(){M(!0)},suggestionsState:n,children:(0,F.jsx)(t.xu,{"data-testid":"add-vendor-modal-content",my:4,children:(0,F.jsx)(O.l0,{children:(0,F.jsxs)(t.gC,{alignItems:"start",spacing:6,children:[l?(0,F.jsx)(w.VT,{id:"vendor",name:"vendor_id",label:"Vendor",placeholder:"Select a vendor",singleValueBlock:!0,options:d,tooltip:"Select the vendor that matches the system",isCustomOption:!0,variant:"stacked",isDisabled:!!r,isRequired:!0}):null,r&&!r.vendor_id||!l?(0,F.jsx)(w.j0,{id:"name",name:"name",isRequired:!0,label:"Vendor name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. \u201cEmail Data Warehouse\u201d",variant:"stacked",disabled:!!r}):null,(0,F.jsx)(I,{showSuggestions:B}),(0,F.jsxs)(j.hE,{size:"sm",width:"100%",justifyContent:"space-between",children:[(0,F.jsx)(j.zx,{variant:"outline",onClick:function(){V(),c()},children:"Cancel"}),(0,F.jsx)(j.zx,{type:"submit",variant:"primary",isDisabled:u||!i||!a,isLoading:u,"data-testid":"save-btn",children:"Save vendor"})]})]})})})})}})]})},J=r(29470),ee=r(5008),ne=r(40240),re=r(60378),te=r(55447),ie=r(95319),oe=r(82466),se=r(99725),ae=r(85249);function ce(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function le(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ce(Object(r),!0).forEach((function(n){(0,v.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ue=function(e){(0,G.fd)();var n=(0,_.C)(G.U3),r=new Map(n.map((function(e){return[e.fides_key,e.name||e.fides_key]})));return"N/A"===e.value?(0,F.jsx)(t.xu,{p:2,children:"N/A"}):(0,F.jsx)(t.xu,{children:(0,F.jsx)(ie.N0,le({isPlainText:!0,map:r},e))})};function de(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function pe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?de(Object(r),!0).forEach((function(n){(0,v.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var fe=function(){var e,n,r=(0,_.C)(z.cS),i=(0,a.useMemo)((function(){return function(e){var n=[];return e.forEach((function(e){var r=!1,t=e.privacy_declarations.map((function(e){return{cookies:e.cookies,dataUse:e.data_use}}));t.length&&t.forEach((function(t){var i=t.dataUse,o=t.cookies;null===o||void 0===o||o.forEach((function(t){r=!0,n.push({cookie:t,name:e.name,id:e.fides_key,dataUse:i})}))})),r||n.push({name:e.name,id:e.fides_key})})),n}(r)}),[r]),o=(0,a.useState)(void 0),s=o[0],c=o[1],l=(0,a.useState)(void 0),u=l[0],d=l[1],p=(0,y.qY)(),f=p.isOpen,v=p.onOpen,g=p.onClose,O=(0,a.useMemo)((function(){return[{Header:"Vendor",accessor:"name",Cell:ie.p7,aggregate:function(e){return e[0]}},{Header:"Id",accessor:"id"},{Header:"Cookie name",accessor:function(e){return e.cookie?e.cookie.name:"N/A"},Cell:ie.p7},{Header:"Data use",accessor:function(e){var n;return null!==(n=e.dataUse)&&void 0!==n?n:"N/A"},Cell:ue}]}),[]),C=(0,re.useTable)({columns:O,data:i,initialState:{groupBy:["id"],hiddenColumns:["id"]}},re.useGlobalFilter,re.useGroupBy,re.useFlexLayout,re.useResizeColumns),k=C.getTableProps,w=C.getTableBodyProps,P=C.headerGroups,S=C.prepareRow,E=C.rows,Z=(0,z.DW)(),D=(0,h.Z)(Z,1)[0],R=(0,x.pm)(),B=function(){var e=(0,m.Z)(b().mark((function e(n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(n);case 2:r=e.sent,(0,N.D4)(r)?R((0,T.Vo)((0,N.e$)(r.error))):R((0,T.t5)("Successfully deleted vendor")),g();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,F.jsxs)(t.xu,{boxSize:"100%",overflow:"auto",children:[(0,F.jsxs)(t.Ug,{mt:2,mb:4,justifyContent:"space-between",children:[(0,F.jsx)(ae.Z,{globalFilter:C.state.globalFilter,setGlobalFilter:C.setGlobalFilter,placeholder:"Search"}),(0,F.jsxs)(t.kC,{children:[(0,F.jsx)(t.kC,{width:"10px"}),(0,F.jsx)(Q,{passedInSystem:s,onCloseModal:function(){return c(void 0)}})]}),(0,F.jsx)(te.Z,{isOpen:f,onClose:g,onConfirm:function(){return B(u.fides_key)},title:"Delete ".concat(null!==(e=null===u||void 0===u?void 0:u.name)&&void 0!==e?e:null===u||void 0===u?void 0:u.fides_key),message:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(t.xv,{children:["This will delete the vendor"," ",(0,F.jsx)(t.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null!==(n=null===u||void 0===u?void 0:u.name)&&void 0!==n?n:null===u||void 0===u?void 0:u.fides_key})," ","and all its cookies."]}),(0,F.jsx)(t.xv,{children:"Are you sure you want to continue?"})]})})]}),(0,F.jsxs)(ne.iA,pe(pe({},k()),{},{size:"sm","data-testid":"datamap-table",children:[(0,F.jsx)(se.Z,{headerGroups:P}),(0,F.jsx)(oe.Z,{rows:E,renderRowSubheading:function(e){return e.values.name},prepareRow:S,getTableBodyProps:w,renderOverflowMenu:function(e){return(0,F.jsxs)(J.v2,{children:[(0,F.jsx)(J.j2,{as:j.hU,"aria-label":"Show vendor options",icon:(0,F.jsx)(ee.nX,{}),size:"xs",variant:"outline","data-testid":"configure-".concat(e.values.id)}),(0,F.jsxs)(J.qy,{children:[(0,F.jsx)(J.sN,{"data-testid":"edit-".concat(e.values.id),onClick:function(){return function(e){var n=r.find((function(n){return e===n.fides_key}));c(n)}(e.values.id)},children:"Manage cookies"}),(0,F.jsx)(J.sN,{"data-testid":"delete-".concat(e.values.id),onClick:function(){return function(e){var n=r.find((function(n){return e===n.fides_key}));d(n),v()}(e.values.id)},children:"Delete"})]})]})}})]}))]})},me=function(e){var n=e.children;return(0,F.jsxs)(t.gC,{spacing:4,alignItems:"start",children:[(0,F.jsx)(t.xv,{children:"To manage consent, please add your first vendor. A vendor is a third-party SaaS application that processes personal data for varying purposes."}),(0,F.jsx)(t.Ug,{children:n})]})},he=function(){var e=(0,z.K3)(),n=e.data,r=e.isLoading;return(0,G.fd)(),r?(0,F.jsx)(t.M5,{children:(0,F.jsx)(u.$,{})}):n&&0!==n.length?(0,F.jsx)(fe,{}):(0,F.jsx)(d.Z,{title:"It looks like it's your first time here!",description:(0,F.jsx)(me,{children:(0,F.jsx)(Q,{})})})},ve=function(){return(0,F.jsxs)(c.Z,{title:"Configure consent",children:[(0,F.jsxs)(t.xu,{mb:4,children:[(0,F.jsx)(t.X6,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:"Configure consent"}),(0,F.jsx)(t.xu,{children:(0,F.jsxs)(i.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600","data-testid":"breadcrumbs",children:[(0,F.jsx)(i.gN,{children:(0,F.jsx)(s(),{href:l.zo,children:"Consent"})}),(0,F.jsx)(i.gN,{color:"complimentary.500",children:(0,F.jsx)(s(),{href:"#",children:"Configure consent"})})]})})]}),(0,F.jsx)(t.xv,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:"Your current cookies and tracking information."}),(0,F.jsx)(t.xu,{"data-testid":"configure-consent-page",children:(0,F.jsx)(he,{})})]})}},54727:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return r(39246)}])}},function(e){e.O(0,[2141,845,8301,8194,9,5232,4968,9774,2888,179],(function(){return n=54727,e(e.s=n);var n}));var n=e.O();_N_E=n}]);