import{S as ne,i as ae,s as ie,k as D,a as H,q as re,e as A,l as L,m as R,h as k,c as j,r as se,n as P,G as b,p as K,b as $,a0 as I,H as he,v as O,d as w,f as T,g as v,u as oe,W as me,X as _e,a2 as ge,a3 as G,y as U,z as Y,A as q,B,a4 as pe,O as be}from"./index.c33bdc5f.js";import{a1 as ve,ao as ke,ai as F,U as we,aj as Se,av as Ee,aE as Ve,X as ye,au as $e,aA as Fe,br as Ie,aF as Pe,bs as Ae,bt as Ne,a9 as De}from"./Commands.b4e0396c.js";import{s as J,C as Le,a as Re}from"./notificationsStore.bf4bc03e.js";function Q(r,e,l){const t=r.slice();return t[2]=e[l],t}function Ce(r){let e,l;return e=new Le({}),{c(){U(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Me(r){let e,l;return e=new Re({}),{c(){U(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Z(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=D("div"),t=re(l),this.h()},l(a){e=L(a,"DIV",{title:!0,class:!0});var s=R(e);t=se(s,l),s.forEach(k),this.h()},h(){var a,s;P(e,"title",n=(a=r[0].value)==null?void 0:a.toString()),P(e,"class","truncated text-right svelte-1woyz4e"),b(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(a,s){$(a,e,s),I(e,t)},p(a,s){var i,c,u;s&1&&l!==(l=(a[0].formattedValue||((i=a[0].children)!=null&&i.length?"":"n/a"))+"")&&oe(t,l),s&1&&n!==(n=(c=a[0].value)==null?void 0:c.toString())&&P(e,"title",n),s&1&&b(e,"italic",!a[0].formattedValue&&!((u=a[0].children)!=null&&u.length))},d(a){a&&k(e)}}}function x(r){let e,l=[],t=new Map,n,o,a=r[0].children;const s=i=>ve(i[2].path);for(let i=0;i<a.length;i+=1){let c=Q(r,a,i),u=s(c);t.set(u,l[i]=ee(u,c))}return{c(){e=D("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=L(i,"DIV",{});var c=R(e);for(let u=0;u<l.length;u+=1)l[u].l(c);c.forEach(k),this.h()},h(){b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal)},m(i,c){$(i,e,c);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);o=!0},p(i,c){c&1&&(a=i[0].children,O(),l=me(l,c,s,1,i,a,t,e,_e,ee,null,Q),T()),(!o||c&1)&&b(e,"bg-blue-100",i[0].isSignal),(!o||c&1)&&b(e,"bg-emerald-100",i[0].isPreviewSignal)},i(i){if(!o){for(let c=0;c<a.length;c+=1)v(l[c]);i&&ge(()=>{o&&(n||(n=G(e,J,{},!0)),n.run(1))}),o=!0}},o(i){for(let c=0;c<l.length;c+=1)w(l[c]);i&&(n||(n=G(e,J,{},!1)),n.run(0)),o=!1},d(i){i&&k(e);for(let c=0;c<l.length;c+=1)l[c].d();i&&n&&n.end()}}}function ee(r,e){let l,t,n;return t=new ce({props:{node:e[2]}}),{key:r,first:null,c(){l=A(),U(t.$$.fragment),this.h()},l(o){l=A(),Y(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,a){$(o,l,a),q(t,o,a),n=!0},p(o,a){e=o;const s={};a&1&&(s.node=e[2]),t.$set(s)},i(o){n||(v(t.$$.fragment,o),n=!0)},o(o){w(t.$$.fragment,o),n=!1},d(o){o&&k(l),B(t,o)}}}function ze(r){var M;let e,l,t,n,o,a,s=r[0].fieldName+"",i,c,u,h,g,E,y;const N=[Me,Ce],S=[];function C(f,d){return f[0].expanded?0:1}t=C(r),n=S[t]=N[t](r);let _=(r[0].formattedValue||!((M=r[0].children)!=null&&M.length))&&Z(r),m=r[0].children&&r[0].expanded&&x(r);return{c(){e=D("div"),l=D("button"),n.c(),o=H(),a=D("div"),i=re(s),c=H(),_&&_.c(),u=H(),m&&m.c(),h=A(),this.h()},l(f){e=L(f,"DIV",{class:!0});var d=R(e);l=L(d,"BUTTON",{class:!0});var p=R(l);n.l(p),p.forEach(k),o=j(d),a=L(d,"DIV",{class:!0});var V=R(a);i=se(V,s),V.forEach(k),c=j(d),_&&_.l(d),d.forEach(k),u=j(f),m&&m.l(f),h=A(),this.h()},h(){var f;P(l,"class","p-1"),b(l,"invisible",!((f=r[0].children)!=null&&f.length)),P(a,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),K(a,"min-width","10ch"),P(e,"class","flex items-center gap-x-1 pr-2 text-xs"),b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal),b(e,"bg-teal-100",r[0].isLabel),K(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),K(e,"line-height","1.7rem")},m(f,d){$(f,e,d),I(e,l),S[t].m(l,null),I(e,o),I(e,a),I(a,i),I(e,c),_&&_.m(e,null),$(f,u,d),m&&m.m(f,d),$(f,h,d),g=!0,E||(y=he(l,"click",r[1]),E=!0)},p(f,[d]){var V,z;let p=t;t=C(f),t!==p&&(O(),w(S[p],1,1,()=>{S[p]=null}),T(),n=S[t],n||(n=S[t]=N[t](f),n.c()),v(n,1),n.m(l,null)),(!g||d&1)&&b(l,"invisible",!((V=f[0].children)!=null&&V.length)),(!g||d&1)&&s!==(s=f[0].fieldName+"")&&oe(i,s),f[0].formattedValue||!((z=f[0].children)!=null&&z.length)?_?_.p(f,d):(_=Z(f),_.c(),_.m(e,null)):_&&(_.d(1),_=null),(!g||d&1)&&b(e,"bg-blue-100",f[0].isSignal),(!g||d&1)&&b(e,"bg-emerald-100",f[0].isPreviewSignal),(!g||d&1)&&b(e,"bg-teal-100",f[0].isLabel),d&1&&K(e,"padding-left",.25+(f[0].path.length-1)*.5+"rem"),f[0].children&&f[0].expanded?m?(m.p(f,d),d&1&&v(m,1)):(m=x(f),m.c(),v(m,1),m.m(h.parentNode,h)):m&&(O(),w(m,1,1,()=>{m=null}),T())},i(f){g||(v(n),v(m),g=!0)},o(f){w(n),w(m),g=!1},d(f){f&&k(e),S[t].d(),_&&_.d(),f&&k(u),m&&m.d(f),f&&k(h),E=!1,y()}}}function fe(r){r.expanded=!0,r.children&&r.children.forEach(fe)}function Ke(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&fe(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class ce extends ne{constructor(e){super(),ae(this,e,Ke,ze,ie,{node:0})}}function te(r,e,l){const t=r.slice();return t[7]=e[l],t}function le(r){let e,l;return e=new ce({props:{node:r[7]}}),{c(){U(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Oe(r){let e,l,t=r[0].children||[],n=[];for(let a=0;a<t.length;a+=1)n[a]=le(te(r,t,a));const o=a=>w(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=A()},l(a){for(let s=0;s<n.length;s+=1)n[s].l(a);e=A()},m(a,s){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,s);$(a,e,s),l=!0},p(a,[s]){if(s&1){t=a[0].children||[];let i;for(i=0;i<t.length;i+=1){const c=te(a,t,i);n[i]?(n[i].p(c,s),v(n[i],1)):(n[i]=le(c),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(O(),i=t.length;i<n.length;i+=1)o(i);T()}},i(a){if(!l){for(let s=0;s<t.length;s+=1)v(n[s]);l=!0}},o(a){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(a){pe(n,a),a&&k(e)}}}function Te(r,e,l){let t,n,{row:o}=e,{selectRowsSchema:a=void 0}=e,{highlightedFields:s}=e;const i=ke();be(r,i,u=>l(5,n=u));function c(u){var f;const h=F.field(u),g=F.path(u);let E=F.value(u),y=F.span(u);if((h==null?void 0:h.dtype)==="string_span"&&(y=y||E,y!=null)){const d=[];for(let p=g.length-1;p>=0;p--){const V=g.slice(0,p);if(we(a.schema,V).dtype==="string"){const W=F.value(Se(o,V));d.push(W.slice(y.start,y.end));break}}E=d}const N=((f=n.data)==null?void 0:f.some(d=>{var p;return d.name===((p=h==null?void 0:h.signal)==null?void 0:p.signal_name)}))||!1,S=h?Ee(h):!1,C=h?Ve(h):!1;let _;N||S&&(h==null?void 0:h.dtype)==null||(h==null?void 0:h.dtype)==="embedding"||(h==null?void 0:h.repeated_field)!=null?_="":E==null?_=null:_=ye(E);function m(d){const{[Ie]:p,[Pe]:V,[Ae]:z,[Ne]:W,[De]:Ue,...ue}=d;return Object.values(ue).filter(de=>{var X;return((X=F.field(de))==null?void 0:X.label)==null})}const M=s.some(d=>$e(d.path,g));return{children:Array.isArray(u)?u.map(c):m(u).map(c),fieldName:g[g.length-1],field:h,path:g,expanded:M,isSignal:S,isLabel:C,isPreviewSignal:a!=null?Fe(a,g):!1,isEmbeddingSignal:N,value:E,formattedValue:_}}return r.$$set=u=>{"row"in u&&l(2,o=u.row),"selectRowsSchema"in u&&l(3,a=u.selectRowsSchema),"highlightedFields"in u&&l(4,s=u.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(o))},[t,i,o,a,s]}class He extends ne{constructor(e){super(),ae(this,e,Te,Oe,ie,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{He as I};
