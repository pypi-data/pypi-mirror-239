import{S as Se,i as Ee,s as Ie,E as He,Z as Re,_ as Ae,m as D,h,n as M,$ as Xe,b as C,a0 as v,L as Rt,a1 as Z,N as je,Q as Ke,q as Y,r as W,u as me,x as Pe,w as Oe,T as Ze,a8 as Ve,k as V,a as J,y as G,l as N,c as $,z as x,G as Q,A as X,H as Ue,a7 as Ne,g as k,v as se,d as S,f as ne,B as j,U as Ye,M as pt,C as At,O as ye,e as re,ab as ue,a4 as qe,R as Pt,a2 as Ct,ag as Ot,W as qt,X as zt}from"./index.c33bdc5f.js";import{h as Ce,R as We,b as vt,a2 as ze,b2 as kt,b3 as wt,aW as Bt,as as yt,aq as Ht,aM as Qt,af as St,b4 as Zt,ai as Et,b5 as Je,a8 as Fe,Z as Me,X as $e,a6 as Ut,a7 as Yt,ae as Wt,b6 as Gt,b7 as Xt,c as It,a1 as Qe,az as Lt,aE as jt,aw as xe,K as Kt,aG as et,ao as Jt,aa as $t,a9 as xt,b8 as Ge,S as el,a as Dt}from"./Commands.b4e0396c.js";import{g as Ft}from"./notificationsStore.bf4bc03e.js";import{c as tl,S as ll}from"./StringSpanHighlight.89564be9.js";import{C as sl}from"./ComboBox.d2dcddb1.js";import{M as nl}from"./ToastNotification.fe04d63b.js";import{g as Vt}from"./settingsStore.332cdb0f.js";import{S as il}from"./Search.fa87655b.js";import{I as al}from"./ItemMetadata.a39ac947.js";function tt(l){let e,t;return{c(){e=Re("title"),t=Y(l[1])},l(s){e=Ae(s,"title",{});var n=D(e);t=W(n,l[1]),n.forEach(h)},m(s,n){C(s,e,n),v(e,t)},p(s,n){n&2&&me(t,s[1])},d(s){s&&h(e)}}}function rl(l){let e,t,s,n=l[1]&&tt(l),r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:l[0]},{height:l[0]},l[2],l[3]],i={};for(let o=0;o<r.length;o+=1)i=He(i,r[o]);return{c(){e=Re("svg"),n&&n.c(),t=Re("path"),s=Re("path"),this.h()},l(o){e=Ae(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=D(e);n&&n.l(a),t=Ae(a,"path",{d:!0}),D(t).forEach(h),s=Ae(a,"path",{d:!0}),D(s).forEach(h),a.forEach(h),this.h()},h(){M(t,"d","M10,14a4,4,0,1,1,4-4A4.0045,4.0045,0,0,1,10,14Zm0-6a2,2,0,1,0,1.998,2.0044A2.002,2.002,0,0,0,10,8Z"),M(s,"d","M16.6436,29.4145,2.5858,15.3555A2,2,0,0,1,2,13.9414V4A2,2,0,0,1,4,2h9.9413a2,2,0,0,1,1.4142.5858L29.4144,16.6436a2.0005,2.0005,0,0,1,0,2.8285l-9.9424,9.9425a2.0008,2.0008,0,0,1-2.8285,0ZM4,4v9.9417L18.0578,28,28,18.0579,13.9416,4Z"),Xe(e,i)},m(o,a){C(o,e,a),n&&n.m(e,null),v(e,t),v(e,s)},p(o,[a]){o[1]?n?n.p(o,a):(n=tt(o),n.c(),n.m(e,t)):n&&(n.d(1),n=null),Xe(e,i=Rt(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:o[0]},a&1&&{height:o[0]},a&4&&o[2],a&8&&o[3]]))},i:Z,o:Z,d(o){o&&h(e),n&&n.d()}}}function ol(l,e,t){let s,n;const r=["size","title"];let i=je(e,r),{size:o=16}=e,{title:a=void 0}=e;return l.$$set=f=>{t(5,e=He(He({},e),Ke(f))),t(3,i=je(e,r)),"size"in f&&t(0,o=f.size),"title"in f&&t(1,a=f.title)},l.$$.update=()=>{t(4,s=e["aria-label"]||e["aria-labelledby"]||a),t(2,n={"aria-hidden":s?void 0:!0,role:s?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ke(e),[o,a,n,i,s]}class Nt extends Se{constructor(e){super(),Ee(this,e,ol,rl,Ie,{size:0,title:1})}}function lt(l){const e=l[15].find(function(...s){return l[35](l[43],...s)});l[44]=e}function st(l){let e,t;return e=new Bt({}),{c(){G(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function fl(l){let e,t=l[44].text+"",s;return{c(){e=V("div"),s=Y(t),this.h()},l(n){e=N(n,"DIV",{class:!0});var r=D(e);s=W(r,t),r.forEach(h),this.h()},h(){M(e,"class","flex justify-between gap-x-8")},m(n,r){C(n,e,r),v(e,s)},p(n,r){r[0]&32768|r[1]&4096&&t!==(t=n[44].text+"")&&me(s,t)},i:Z,o:Z,d(n){n&&h(e)}}}function cl(l){let e,t,s,n,r,i,o;return t=new Nt({}),{c(){e=V("div"),G(t.$$.fragment),s=J(),n=V("div"),r=Y("New label: "),i=Y(l[6]),this.h()},l(a){e=N(a,"DIV",{class:!0});var f=D(e);x(t.$$.fragment,f),s=$(f),n=N(f,"DIV",{class:!0});var c=D(n);r=W(c,"New label: "),i=W(c,l[6]),c.forEach(h),f.forEach(h),this.h()},h(){M(n,"class","ml-2"),M(e,"class","new-concept flex flex-row items-center justify-items-center")},m(a,f){C(a,e,f),X(t,e,null),v(e,s),v(e,n),v(n,r),v(n,i),o=!0},p(a,f){(!o||f[0]&64)&&me(i,a[6])},i(a){o||(k(t.$$.fragment,a),o=!0)},o(a){S(t.$$.fragment,a),o=!1},d(a){a&&h(e),j(t)}}}function ul(l){let e;return{c(){e=V("div")},l(t){e=N(t,"DIV",{}),D(e).forEach(h)},m(t,s){C(t,e,s)},p:Z,i:Z,o:Z,d(t){t&&h(e)}}}function dl(l){lt(l);let e,t,s,n;const r=[ul,cl,fl],i=[];function o(a,f){return a[44]==null?0:a[44].id==="new-label"?1:2}return e=o(l),t=i[e]=r[e](l),{c(){t.c(),s=re()},l(a){t.l(a),s=re()},m(a,f){i[e].m(a,f),C(a,s,f),n=!0},p(a,f){lt(a);let c=e;e=o(a),e===c?i[e].p(a,f):(se(),S(i[c],1,1,()=>{i[c]=null}),ne(),t=i[e],t?t.p(a,f):(t=i[e]=r[e](a),t.c()),k(t,1),t.m(s.parentNode,s))},i(a){n||(k(t),n=!0)},o(a){S(t),n=!1},d(a){i[e].d(a),a&&h(s)}}}function hl(l){var a;let e,t,s,n,r=((a=l[5])==null?void 0:a.toLocaleString())+"",i,o;return{c(){e=Y("Add label "),t=V("span"),s=Y(l[10]),n=Y(" to "),i=Y(r),o=Y(`
      rows?`),this.h()},l(f){e=W(f,"Add label "),t=N(f,"SPAN",{class:!0});var c=D(t);s=W(c,l[10]),c.forEach(h),n=W(f," to "),i=W(f,r),o=W(f,`
      rows?`),this.h()},h(){M(t,"class","font-mono font-bold")},m(f,c){C(f,e,c),C(f,t,c),v(t,s),C(f,n,c),C(f,i,c),C(f,o,c)},p(f,c){var y;c[0]&1024&&me(s,f[10]),c[0]&32&&r!==(r=((y=f[5])==null?void 0:y.toLocaleString())+"")&&me(i,r)},d(f){f&&h(e),f&&h(t),f&&h(n),f&&h(i),f&&h(o)}}}function _l(l){var a;let e,t,s,n,r=((a=l[5])==null?void 0:a.toLocaleString())+"",i,o;return{c(){e=Y("Remove label "),t=V("span"),s=Y(l[10]),n=Y(" from "),i=Y(r),o=Y(`
      rows?`),this.h()},l(f){e=W(f,"Remove label "),t=N(f,"SPAN",{class:!0});var c=D(t);s=W(c,l[10]),c.forEach(h),n=W(f," from "),i=W(f,r),o=W(f,`
      rows?`),this.h()},h(){M(t,"class","font-mono font-bold")},m(f,c){C(f,e,c),C(f,t,c),v(t,s),C(f,n,c),C(f,i,c),C(f,o,c)},p(f,c){var y;c[0]&1024&&me(s,f[10]),c[0]&32&&r!==(r=((y=f[5])==null?void 0:y.toLocaleString())+"")&&me(i,r)},d(f){f&&h(e),f&&h(t),f&&h(n),f&&h(i),f&&h(o)}}}function ml(l){let e;function t(r,i){return r[4]?_l:hl}let s=t(l),n=s(l);return{c(){e=V("p"),n.c()},l(r){e=N(r,"P",{});var i=D(e);n.l(i),i.forEach(h)},m(r,i){C(r,e,i),n.m(e,null)},p(r,i){s===(s=t(r))&&n?n.p(r,i):(n.d(1),n=s(r),n&&(n.c(),n.m(e,null)))},d(r){r&&h(e),n.d()}}}function bl(l){let e,t,s,n,r,i,o,a,f,c,y,w,R,L,T,g,O,p=l[12]&&st();var m=l[3];function b(u){return{}}m&&(n=Pe(m,b()));function E(u){l[37](u)}let P={size:"sm",open:l[8],items:l[15],shouldFilterItem:gl,placeholder:l[4]?"Select a label to remove":"Select or type a new label",$$slots:{default:[dl,({item:u})=>({43:u}),({item:u})=>[0,u?4096:0]]},$$scope:{ctx:l}};return l[6]!==void 0&&(P.value=l[6]),c=new sl({props:P}),l[36](c),Oe.push(()=>Ze(c,"value",E)),c.$on("select",l[22]),L=new nl({props:{size:"xs",open:l[10]!=null&&l[5]!=null,modalHeading:"Label",primaryButtonText:"Confirm",secondaryButtonText:"Cancel",selectorPrimaryFocus:".bx--btn--primary",$$slots:{default:[ml]},$$scope:{ctx:l}}}),L.$on("submit",l[21]),L.$on("click:button--secondary",l[39]),L.$on("close",function(){Ve(l[10]=null)&&(l[10]=null).apply(this,arguments)}),{c(){e=V("div"),t=V("button"),p&&p.c(),s=J(),n&&G(n.$$.fragment),a=J(),f=V("div"),G(c.$$.fragment),R=J(),G(L.$$.fragment),this.h()},l(u){e=N(u,"DIV",{});var d=D(e);t=N(d,"BUTTON",{class:!0});var _=D(t);p&&p.l(_),s=$(_),n&&x(n.$$.fragment,_),_.forEach(h),d.forEach(h),a=$(u),f=N(u,"DIV",{class:!0});var I=D(f);x(c.$$.fragment,I),I.forEach(h),R=$(u),x(L.$$.fragment,u),this.h()},h(){t.disabled=r=l[11]||l[12],M(t,"class","flex items-center gap-x-2 border border-gray-300"),Q(t,"opacity-30",l[11]),Q(t,"text-red-600",l[4]),Q(t,"hidden",l[8]),M(f,"class","z-50 w-60"),Q(f,"hidden",!l[8])},m(u,d){C(u,e,d),v(e,t),p&&p.m(t,null),v(t,s),n&&X(n,t,null),C(u,a,d),C(u,f,d),X(c,f,null),C(u,R,d),X(L,u,d),T=!0,g||(O=[Ue(t,"click",l[20]),Ne(i=Ce.call(null,t,{text:l[0]})),Ne(o=Ce.call(null,e,{text:l[7]?l[1]?l[2]:"":"You do not have access to add labels."})),Ne(w=tl.call(null,f,l[38]))],g=!0)},p(u,d){if(l=u,l[12]?p?d[0]&4096&&k(p,1):(p=st(),p.c(),k(p,1),p.m(t,s)):p&&(se(),S(p,1,1,()=>{p=null}),ne()),d[0]&8&&m!==(m=l[3])){if(n){se();const q=n;S(q.$$.fragment,1,0,()=>{j(q,1)}),ne()}m?(n=Pe(m,b()),G(n.$$.fragment),k(n.$$.fragment,1),X(n,t,null)):n=null}(!T||d[0]&6144&&r!==(r=l[11]||l[12]))&&(t.disabled=r),i&&Ve(i.update)&&d[0]&1&&i.update.call(null,{text:l[0]}),(!T||d[0]&2048)&&Q(t,"opacity-30",l[11]),(!T||d[0]&16)&&Q(t,"text-red-600",l[4]),(!T||d[0]&256)&&Q(t,"hidden",l[8]),o&&Ve(o.update)&&d[0]&134&&o.update.call(null,{text:l[7]?l[1]?l[2]:"":"You do not have access to add labels."});const _={};d[0]&256&&(_.open=l[8]),d[0]&32768&&(_.items=l[15]),d[0]&16&&(_.placeholder=l[4]?"Select a label to remove":"Select or type a new label"),d[0]&32832|d[1]&20480&&(_.$$scope={dirty:d,ctx:l}),!y&&d[0]&64&&(y=!0,_.value=l[6],Ye(()=>y=!1)),c.$set(_),w&&Ve(w.update)&&d[0]&256&&w.update.call(null,l[38]),(!T||d[0]&256)&&Q(f,"hidden",!l[8]);const I={};d[0]&1056&&(I.open=l[10]!=null&&l[5]!=null),d[0]&1072|d[1]&16384&&(I.$$scope={dirty:d,ctx:l}),L.$set(I)},i(u){T||(k(p),n&&k(n.$$.fragment,u),k(c.$$.fragment,u),k(L.$$.fragment,u),T=!0)},o(u){S(p),n&&S(n.$$.fragment,u),S(c.$$.fragment,u),S(L.$$.fragment,u),T=!1},d(u){u&&h(e),p&&p.d(),n&&j(n),u&&h(a),u&&h(f),l[36](null),j(c),u&&h(R),j(L,u),g=!1,pt(O)}}}const gl=(l,e)=>l.text.toLowerCase().includes(e.toLowerCase())||l.id==="new-label";function pl(l,e,t){let s,n,r,i,o,a,f,c,y,w,R,L,T,g,O,p=Z,m=()=>(p(),p=ue(L,F=>t(30,O=F)),L),b,E=Z,P=()=>(E(),E=ue(R,F=>t(31,b=F)),R),u,d=Z,_=()=>(d(),d=ue(s,F=>t(32,u=F)),s),I,q;l.$$.on_destroy.push(()=>p()),l.$$.on_destroy.push(()=>E()),l.$$.on_destroy.push(()=>d());let{labelsQuery:B}=e,{hideLabels:H=void 0}=e,{helperText:U="Add label"}=e,{disabled:te=!1}=e,{disabledMessage:oe="User does not have access to add labels."}=e,{icon:be}=e,{remove:le=!1}=e,{totalNumRows:ge=void 0}=e;const ke=At();let ie=!1,de,ce="",ee=null;const pe=Ft(),z=We();ye(l,z,F=>t(34,q=F));const K=vt();ye(l,K,F=>t(33,I=F));function fe(){t(8,ie=!0),requestAnimationFrame(()=>{de.$set({open:!0})})}function he(){if(ee==null)return;const F={...B,label_name:ee};t(8,ie=!1);function _e(ve){return F.row_ids!=null?`Document id: ${F.row_ids}`:`${ve.toLocaleString()} rows updated`}le?O.mutate([n,r,F],{onSuccess:ve=>{pe.addNotification({kind:"success",title:`Removed label "${F.label_name}"`,message:_e(ve)})}}):b.mutate([n,r,F],{onSuccess:ve=>{pe.addNotification({kind:"success",title:`Added label "${F.label_name}"`,message:_e(ve)})}}),t(10,ee=null)}function A(F){t(10,ee=F.detail.selectedItem.text),de.clear(),ge==null&&he()}const ae=(F,_e)=>_e.id===F.id;function Le(F){Oe[F?"unshift":"push"](()=>{de=F,t(9,de)})}function De(F){ce=F,t(6,ce)}const Te=()=>t(8,ie=!1),we=()=>{t(10,ee=null),ke("close")};return l.$$set=F=>{"labelsQuery"in F&&t(23,B=F.labelsQuery),"hideLabels"in F&&t(24,H=F.hideLabels),"helperText"in F&&t(0,U=F.helperText),"disabled"in F&&t(1,te=F.disabled),"disabledMessage"in F&&t(2,oe=F.disabledMessage),"icon"in F&&t(3,be=F.icon),"remove"in F&&t(4,le=F.remove),"totalNumRows"in F&&t(5,ge=F.totalNumRows)},l.$$.update=()=>{var F,_e;l.$$.dirty[1]&8&&_(t(16,s=ze(q.namespace,q.datasetName))),l.$$.dirty[1]&8&&(n=q.namespace),l.$$.dirty[1]&8&&(r=q.datasetName),l.$$.dirty[1]&4&&t(29,i=(F=I.data)==null?void 0:F.access.dataset.create_label_type),l.$$.dirty[1]&4&&t(7,o=(_e=I.data)==null?void 0:_e.access.dataset.edit_labels),l.$$.dirty[1]&2&&t(27,a=u.data&&yt(u.data)),l.$$.dirty[0]&536870976&&t(28,f=/^[A-Za-z0-9_-]+$/.test(ce)&&i),l.$$.dirty[0]&268435520&&t(26,c={id:"new-label",text:ce,disabled:!f}),l.$$.dirty[0]&150994944&&t(25,y=(a==null?void 0:a.filter(ve=>!(H||[]).includes(ve)).map((ve,Mt)=>({id:`label_${Mt}`,text:ve})))||[]),l.$$.dirty[0]&100663376&&t(15,w=[...ce!=""&&!le?[c]:[],...y]),l.$$.dirty[1]&2&&P(t(14,R=u.data!=null?kt(u.data):null)),l.$$.dirty[1]&2&&m(t(13,L=u.data!=null?wt(u.data):null)),l.$$.dirty[0]&1073741824|l.$$.dirty[1]&1&&t(12,T=(b==null?void 0:b.isLoading)||(O==null?void 0:O.isLoading)),l.$$.dirty[0]&130&&t(11,g=te||!o)},[U,te,oe,be,le,ge,ce,o,ie,de,ee,g,T,L,R,w,s,ke,z,K,fe,he,A,B,H,y,c,a,f,i,O,b,u,I,q,ae,Le,De,Te,we]}class vl extends Se{constructor(e){super(),Ee(this,e,pl,bl,Ie,{labelsQuery:23,hideLabels:24,helperText:0,disabled:1,disabledMessage:2,icon:3,remove:4,totalNumRows:5},null,[-1,-1])}}function nt(l,e,t){const s=l.slice();s[18]=e[t];const n=Et.value(s[18]);s[19]=n;const r=s[3].length===0;return s[20]=r,s}function Be(l){var n,r,i;const e=l.slice(),t=Et.path(e[18])||[];e[2]=t;const s=((i=(r=(n=e[8].data)==null?void 0:n.ui)==null?void 0:r.markdown_paths)==null?void 0:i.find(function(...a){return l[15](e[2],...a)}))!=null;return e[23]=s,e}function it(l){let e,t,s,n,r=Me(l[2])+"",i,o,a,f,c,y,w,R,L,T,g,O,p,m,b,E;w=new il({props:{size:16}});function P(){return l[16](l[19])}return O=new ll({props:{text:$e(l[19]),row:l[0],path:l[2],field:l[1],markdown:l[23],spanPaths:l[6].spanPaths,valuePaths:l[6].valuePaths,datasetViewStore:l[9],embeddings:l[3]}}),{c(){e=V("div"),t=V("div"),s=V("div"),n=V("div"),i=Y(r),a=J(),f=V("div"),c=V("div"),y=V("button"),G(w.$$.fragment),T=J(),g=V("div"),G(O.$$.fragment),p=J(),this.h()},l(u){e=N(u,"DIV",{class:!0});var d=D(e);t=N(d,"DIV",{class:!0});var _=D(t);s=N(_,"DIV",{class:!0});var I=D(s);n=N(I,"DIV",{title:!0,class:!0});var q=D(n);i=W(q,r),q.forEach(h),a=$(I),f=N(I,"DIV",{});var B=D(f);c=N(B,"DIV",{});var H=D(c);y=N(H,"BUTTON",{});var U=D(y);x(w.$$.fragment,U),U.forEach(h),H.forEach(h),B.forEach(h),I.forEach(h),_.forEach(h),T=$(d),g=N(d,"DIV",{class:!0});var te=D(g);x(O.$$.fragment,te),te.forEach(h),p=$(d),d.forEach(h),this.h()},h(){M(n,"title",o=Me(l[2])),M(n,"class","w-full truncate"),y.disabled=R=l[20],Q(c,"opacity-50",l[20]),M(s,"class","sticky top-0 flex w-full items-center self-start"),M(t,"class","relative flex w-28 flex-none font-mono font-medium text-neutral-500 md:w-44"),M(g,"class","w-full grow-0 overflow-x-auto pt-1 font-normal"),M(e,"class","flex w-full gap-x-4")},m(u,d){C(u,e,d),v(e,t),v(t,s),v(s,n),v(n,i),v(s,a),v(s,f),v(f,c),v(c,y),X(w,y,null),v(e,T),v(e,g),X(O,g,null),v(e,p),m=!0,b||(E=[Ue(y,"click",P),Ne(Ce.call(null,y,{text:"More like this"})),Ne(L=Ce.call(null,c,{text:l[20]?'"More like this" requires an embedding index':void 0}))],b=!0)},p(u,d){l=u,(!m||d&16)&&r!==(r=Me(l[2])+"")&&me(i,r),(!m||d&16&&o!==(o=Me(l[2])))&&M(n,"title",o),(!m||d&8&&R!==(R=l[20]))&&(y.disabled=R),L&&Ve(L.update)&&d&8&&L.update.call(null,{text:l[20]?'"More like this" requires an embedding index':void 0}),(!m||d&8)&&Q(c,"opacity-50",l[20]);const _={};d&16&&(_.text=$e(l[19])),d&1&&(_.row=l[0]),d&16&&(_.path=l[2]),d&2&&(_.field=l[1]),d&272&&(_.markdown=l[23]),d&64&&(_.spanPaths=l[6].spanPaths),d&64&&(_.valuePaths=l[6].valuePaths),d&8&&(_.embeddings=l[3]),O.$set(_)},i(u){m||(k(w.$$.fragment,u),k(O.$$.fragment,u),m=!0)},o(u){S(w.$$.fragment,u),S(O.$$.fragment,u),m=!1},d(u){u&&h(e),j(w),j(O),b=!1,pt(E)}}}function at(l){let e=Je(l[19]),t,s,n=e&&it(Be(l));return{c(){n&&n.c(),t=re()},l(r){n&&n.l(r),t=re()},m(r,i){n&&n.m(r,i),C(r,t,i),s=!0},p(r,i){i&16&&(e=Je(r[19])),e?n?(n.p(Be(r),i),i&16&&k(n,1)):(n=it(Be(r)),n.c(),k(n,1),n.m(t.parentNode,t)):n&&(se(),S(n,1,1,()=>{n=null}),ne())},i(r){s||(k(n),s=!0)},o(r){S(n),s=!1},d(r){n&&n.d(r),r&&h(t)}}}function kl(l){let e,t,s=l[4],n=[];for(let i=0;i<s.length;i+=1)n[i]=at(nt(l,s,i));const r=i=>S(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=re()},l(i){for(let o=0;o<n.length;o+=1)n[o].l(i);e=re()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);C(i,e,o),t=!0},p(i,[o]){if(o&2907){s=i[4];let a;for(a=0;a<s.length;a+=1){const f=nt(i,s,a);n[a]?(n[a].p(f,o),k(n[a],1)):(n[a]=at(f),n[a].c(),k(n[a],1),n[a].m(e.parentNode,e))}for(se(),a=s.length;a<n.length;a+=1)r(a);ne()}},i(i){if(!t){for(let o=0;o<s.length;o+=1)k(n[o]);t=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)S(n[o]);t=!1},d(i){qe(n,i),i&&h(e)}}}function wl(l,e,t){let s,n,r,i,o,a,f,c=Z,y=()=>(c(),c=ue(i,_=>t(8,f=_)),i),w,R,L=Z,T=()=>(L(),L=ue(s,_=>t(14,R=_)),s);l.$$.on_destroy.push(()=>c()),l.$$.on_destroy.push(()=>L());let{path:g}=e,{row:O}=e,{field:p}=e,{highlightedFields:m}=e;const b=We();ye(l,b,_=>t(13,w=_));const E=Vt();ye(l,E,_=>t(17,a=_));function P(_){var q;let I=n[0];if(((q=f.data)==null?void 0:q.preferred_embedding)!=null){const B=f.data.preferred_embedding;n.some(H=>H===B)&&(I=B)}if(a.embedding!=null){const B=a.embedding;n.some(H=>H===B)&&(I=B)}b.addSearch({path:p.path,type:"semantic",query:_,embedding:I})}const u=(_,I)=>Fe(I,_),d=_=>P(_);return l.$$set=_=>{"path"in _&&t(2,g=_.path),"row"in _&&t(0,O=_.row),"field"in _&&t(1,p=_.field),"highlightedFields"in _&&t(12,m=_.highlightedFields)},l.$$.update=()=>{l.$$.dirty&8192&&T(t(7,s=ze(w.namespace,w.datasetName))),l.$$.dirty&16388&&t(3,n=Ht(R.data,g)),l.$$.dirty&4098&&t(6,r=Qt(p,m)),l.$$.dirty&8192&&y(t(5,i=St(w.namespace,w.datasetName))),l.$$.dirty&5&&t(4,o=Zt(O,g))},[O,p,g,n,o,i,r,s,f,b,E,P,m,w,R,u,d]}class yl extends Se{constructor(e){super(),Ee(this,e,wl,kl,Ie,{path:2,row:0,field:1,highlightedFields:12})}}function Sl(l){let e,t,s,n;return{c(){e=V("button"),t=Y(l[1]),this.h()},l(r){e=N(r,"BUTTON",{class:!0});var i=D(e);t=W(i,l[1]),i.forEach(h),this.h()},h(){e.disabled=l[2],M(e,"class","rounded-lg border border-gray-300 hover:border-gray-500"),Q(e,"bg-slate-500",l[0]),Q(e,"hover:bg-slate-500",l[0]),Q(e,"hover:bg-transparent",!l[0]),Q(e,"text-white",l[0])},m(r,i){C(r,e,i),v(e,t),s||(n=Ue(e,"click",l[3]),s=!0)},p(r,[i]){i&2&&me(t,r[1]),i&4&&(e.disabled=r[2]),i&1&&Q(e,"bg-slate-500",r[0]),i&1&&Q(e,"hover:bg-slate-500",r[0]),i&1&&Q(e,"hover:bg-transparent",!r[0]),i&1&&Q(e,"text-white",r[0])},i:Z,o:Z,d(r){r&&h(e),s=!1,n()}}}function El(l,e,t){let{label:s}=e,{active:n}=e,{disabled:r=!1}=e;function i(o){Pt.call(this,l,o)}return l.$$set=o=>{"label"in o&&t(1,s=o.label),"active"in o&&t(0,n=o.active),"disabled"in o&&t(2,r=o.disabled)},l.$$.update=()=>{l.$$.dirty&5&&t(0,n=n&&!r)},[n,s,r,i]}class Il extends Se{constructor(e){super(),Ee(this,e,El,Sl,Ie,{label:1,active:0,disabled:2})}}function rt(l,e,t){const s=l.slice();return s[33]=e[t],s[35]=t,s}function ot(l,e,t){const s=l.slice();return s[36]=e[t],s}function Ll(l){let e,t,s,n,r,i,o,a,f,c,y,w,R,L,T=l[8]||[],g=[];for(let m=0;m<T.length;m+=1)g[m]=ft(ot(l,T,m));const O=m=>S(g[m],1,1,()=>{g[m]=null});r=new vl({props:{icon:Nt,labelsQuery:{row_ids:[l[0]]},hideLabels:l[10]}});let p=l[1].length>0&&ct(l);return w=new al({props:{row:l[3],selectRowsSchema:l[4].data,highlightedFields:l[2]}}),{c(){e=V("div"),t=V("div");for(let m=0;m<g.length;m+=1)g[m].c();s=J(),n=V("div"),G(r.$$.fragment),i=J(),p&&p.c(),a=J(),f=V("div"),c=V("div"),y=V("div"),G(w.$$.fragment),this.h()},l(m){e=N(m,"DIV",{class:!0});var b=D(e);t=N(b,"DIV",{class:!0});var E=D(t);for(let I=0;I<g.length;I+=1)g[I].l(E);s=$(E),n=N(E,"DIV",{class:!0});var P=D(n);x(r.$$.fragment,P),P.forEach(h),E.forEach(h),i=$(b),p&&p.l(b),b.forEach(h),a=$(m),f=N(m,"DIV",{class:!0});var u=D(f);c=N(u,"DIV",{class:!0});var d=D(c);y=N(d,"DIV",{style:!0,class:!0});var _=D(y);x(w.$$.fragment,_),_.forEach(h),d.forEach(h),u.forEach(h),this.h()},h(){M(n,"class","relative h-8"),M(t,"class","flex flex-wrap items-center gap-x-2 gap-y-2"),Q(t,"opacity-50",l[9]),M(e,"class","flex flex-col gap-y-1 p-4 md:w-2/3"),Ct(()=>l[29].call(e)),M(y,"style",R=`max-height: ${Math.max(dt,l[6])}px`),M(y,"class","overflow-y-auto"),M(c,"class","sticky top-0 w-full self-start"),M(f,"class","flex h-full bg-neutral-100 md:w-1/3")},m(m,b){C(m,e,b),v(e,t);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(t,null);v(t,s),v(t,n),X(r,n,null),v(e,i),p&&p.m(e,null),o=Ot(e,l[29].bind(e)),C(m,a,b),C(m,f,b),v(f,c),v(c,y),X(w,y,null),L=!0},p(m,b){if(b[0]&394528){T=m[8]||[];let u;for(u=0;u<T.length;u+=1){const d=ot(m,T,u);g[u]?(g[u].p(d,b),k(g[u],1)):(g[u]=ft(d),g[u].c(),k(g[u],1),g[u].m(t,s))}for(se(),u=T.length;u<g.length;u+=1)O(u);ne()}const E={};b[0]&1&&(E.labelsQuery={row_ids:[m[0]]}),b[0]&1024&&(E.hideLabels=m[10]),r.$set(E),(!L||b[0]&512)&&Q(t,"opacity-50",m[9]),m[1].length>0?p?(p.p(m,b),b[0]&2&&k(p,1)):(p=ct(m),p.c(),k(p,1),p.m(e,null)):p&&(se(),S(p,1,1,()=>{p=null}),ne());const P={};b[0]&8&&(P.row=m[3]),b[0]&16&&(P.selectRowsSchema=m[4].data),b[0]&4&&(P.highlightedFields=m[2]),w.$set(P),(!L||b[0]&64&&R!==(R=`max-height: ${Math.max(dt,m[6])}px`))&&M(y,"style",R)},i(m){if(!L){for(let b=0;b<T.length;b+=1)k(g[b]);k(r.$$.fragment,m),k(p),k(w.$$.fragment,m),L=!0}},o(m){g=g.filter(Boolean);for(let b=0;b<g.length;b+=1)S(g[b]);S(r.$$.fragment,m),S(p),S(w.$$.fragment,m),L=!1},d(m){m&&h(e),qe(g,m),j(r),p&&p.d(),o(),m&&h(a),m&&h(f),j(w)}}}function Dl(l){let e,t;return e=new It({props:{lines:4,paragraph:!0,class:"w-full"}}),{c(){G(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},p:Z,i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function ft(l){let e,t,s;function n(){return l[28](l[36])}return t=new Il({props:{label:l[36],disabled:l[5].has(l[36]),active:l[10].includes(l[36])}}),t.$on("click",n),{c(){e=V("div"),G(t.$$.fragment),this.h()},l(r){e=N(r,"DIV",{});var i=D(e);x(t.$$.fragment,i),i.forEach(h),this.h()},h(){Q(e,"opacity-50",l[5].has(l[36]))},m(r,i){C(r,e,i),X(t,e,null),s=!0},p(r,i){l=r;const o={};i[0]&256&&(o.label=l[36]),i[0]&288&&(o.disabled=l[5].has(l[36])),i[0]&1280&&(o.active=l[10].includes(l[36])),t.$set(o),(!s||i[0]&288)&&Q(e,"opacity-50",l[5].has(l[36]))},i(r){s||(k(t.$$.fragment,r),s=!0)},o(r){S(t.$$.fragment,r),s=!1},d(r){r&&h(e),j(t)}}}function ct(l){let e=[],t=new Map,s,n,r=l[1];const i=o=>Qe(o[33].path);for(let o=0;o<r.length;o+=1){let a=rt(l,r,o),f=i(a);t.set(f,e[o]=ut(f,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();s=re()},l(o){for(let a=0;a<e.length;a+=1)e[a].l(o);s=re()},m(o,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(o,a);C(o,s,a),n=!0},p(o,a){a[0]&14&&(r=o[1],se(),e=qt(e,a,i,1,o,r,t,s.parentNode,zt,ut,s,rt),ne())},i(o){if(!n){for(let a=0;a<r.length;a+=1)k(e[a]);n=!0}},o(o){for(let a=0;a<e.length;a+=1)S(e[a]);n=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&h(s)}}}function ut(l,e){let t,s,n,r;return s=new yl({props:{row:e[3],path:e[33].path,field:e[33],highlightedFields:e[2]}}),{key:l,first:null,c(){t=V("div"),G(s.$$.fragment),n=J(),this.h()},l(i){t=N(i,"DIV",{class:!0});var o=D(t);x(s.$$.fragment,o),n=$(o),o.forEach(h),this.h()},h(){M(t,"class","flex h-full w-full flex-col border-neutral-200"),Q(t,"border-b",e[35]<e[1].length-1),Q(t,"pb-2",e[35]<e[1].length-1),this.first=t},m(i,o){C(i,t,o),X(s,t,null),v(t,n),r=!0},p(i,o){e=i;const a={};o[0]&8&&(a.row=e[3]),o[0]&2&&(a.path=e[33].path),o[0]&2&&(a.field=e[33]),o[0]&4&&(a.highlightedFields=e[2]),s.$set(a),(!r||o[0]&2)&&Q(t,"border-b",e[35]<e[1].length-1),(!r||o[0]&2)&&Q(t,"pb-2",e[35]<e[1].length-1)},i(i){r||(k(s.$$.fragment,i),r=!0)},o(i){S(s.$$.fragment,i),r=!1},d(i){i&&h(t),j(s)}}}function Fl(l){let e,t,s,n;const r=[Dl,Ll],i=[];function o(a,f){return a[3]==null?0:1}return t=o(l),s=i[t]=r[t](l),{c(){e=V("div"),s.c(),this.h()},l(a){e=N(a,"DIV",{class:!0});var f=D(e);s.l(f),f.forEach(h),this.h()},h(){M(e,"class","flex flex-col rounded border border-neutral-300 md:flex-row")},m(a,f){C(a,e,f),i[t].m(e,null),n=!0},p(a,f){let c=t;t=o(a),t===c?i[t].p(a,f):(se(),S(i[c],1,1,()=>{i[c]=null}),ne(),s=i[t],s?s.p(a,f):(s=i[t]=r[t](a),s.c()),k(s,1),s.m(e,null))},i(a){n||(k(s),n=!0)},o(a){S(s),n=!1},d(a){a&&h(e),i[t].d()}}}const dt=165;function Vl(l,e,t){let s,n,r,i,o,a,f,c,y,w,R,L,T,g,O,p=Z,m=()=>(p(),p=ue(a,A=>t(30,O=A)),a),b,E=Z,P=()=>(E(),E=ue(T,A=>t(31,b=A)),T),u,d=Z,_=()=>(d(),d=ue(c,A=>t(24,u=A)),c),I,q=Z,B=()=>(q(),q=ue(i,A=>t(25,I=A)),i),H,U=Z,te=()=>(U(),U=ue(o,A=>t(4,H=A)),o),oe,be;l.$$.on_destroy.push(()=>p()),l.$$.on_destroy.push(()=>E()),l.$$.on_destroy.push(()=>d()),l.$$.on_destroy.push(()=>q()),l.$$.on_destroy.push(()=>U());let{rowId:le}=e,{mediaFields:ge}=e,{highlightedFields:ke}=e;const ie=We();ye(l,ie,A=>t(26,oe=A));const de=Ft(),ce=vt();ye(l,ce,A=>t(27,be=A));let ee=new Set,pe=0;function z(A){const ae={row_ids:[le],label_name:A};ee.add(A),t(5,ee),t(21,g),t(24,u),b.mutate([s,n,ae],{onSuccess:Le=>{const De=ae.row_ids!=null?`Document id: ${ae.row_ids}`:`${Le.toLocaleString()} rows labeled`;de.addNotification({kind:"success",title:`Added label "${ae.label_name}"`,message:De})}})}function K(A){const ae={label_name:A,row_ids:[le]};ee.add(A),t(5,ee),t(21,g),t(24,u),O.mutate([s,n,ae],{onSuccess:()=>{de.addNotification({kind:"success",title:`Removed label "${ae.label_name}"`,message:`Document id: ${le}`})}})}const fe=A=>{w.includes(A)?K(A):z(A)};function he(){pe=this.clientHeight,t(6,pe)}return l.$$set=A=>{"rowId"in A&&t(0,le=A.rowId),"mediaFields"in A&&t(1,ge=A.mediaFields),"highlightedFields"in A&&t(2,ke=A.highlightedFields)},l.$$.update=()=>{var A;l.$$.dirty[0]&67108864&&t(20,s=oe.namespace),l.$$.dirty[0]&67108864&&t(19,n=oe.datasetName),l.$$.dirty[0]&134217728&&t(22,r=(A=be.data)==null?void 0:A.access.dataset.edit_labels),l.$$.dirty[0]&1572864&&B(t(14,i=ze(s,n))),l.$$.dirty[0]&68681728&&te(t(13,o=Ut(s,n,Yt(oe)))),l.$$.dirty[0]&33554432&&m(t(12,a=I.data!=null?wt(I.data):null)),l.$$.dirty[0]&67108864&&t(23,f=Wt(oe)),l.$$.dirty[0]&9961489&&_(t(11,c=H.data!=null?Gt(s,n,le,f,H.data.schema):null)),l.$$.dirty[0]&16777216&&t(3,y=u==null?void 0:u.data),l.$$.dirty[0]&8&&t(10,w=y!=null?Xt(y):[]),l.$$.dirty[0]&4194304&&t(9,R=!r),l.$$.dirty[0]&33554432&&t(8,L=I.data&&yt(I.data)),l.$$.dirty[0]&33554432&&P(t(7,T=I.data!=null?kt(I.data):null)),l.$$.dirty[0]&16777216&&t(21,g=u==null?void 0:u.isStale),l.$$.dirty[0]&2097152&&(g||t(5,ee=new Set))},[le,ge,ke,y,H,ee,pe,T,L,R,w,c,a,o,i,ie,ce,z,K,n,s,g,r,f,u,I,oe,be,fe,he]}class es extends Se{constructor(e){super(),Ee(this,e,Vl,Fl,Ie,{rowId:0,mediaFields:1,highlightedFields:2},null,[-1,-1])}}function ht(l,e,t){const s=l.slice();s[5]=e[t];const n=Lt(s[5]);s[6]=n;const r=jt(s[5]);return s[7]=r,s}function Nl(l){let e,t="{}",s;return{c(){e=V("span"),s=Y(t),this.h()},l(n){e=N(n,"SPAN",{class:!0});var r=D(e);s=W(r,t),r.forEach(h),this.h()},h(){M(e,"class","font-mono")},m(n,r){C(n,e,r),v(e,s)},p:Z,i:Z,o:Z,d(n){n&&h(e)}}}function Tl(l){let e,t,s;var n=et[l[5].dtype];function r(i){return{props:{title:i[5].dtype}}}return n&&(e=Pe(n,r(l))),{c(){e&&G(e.$$.fragment),t=re()},l(i){e&&x(e.$$.fragment,i),t=re()},m(i,o){e&&X(e,i,o),C(i,t,o),s=!0},p(i,o){const a={};if(o&2&&(a.title=i[5].dtype),o&2&&n!==(n=et[i[5].dtype])){if(e){se();const f=e;S(f.$$.fragment,1,0,()=>{j(f,1)}),ne()}n?(e=Pe(n,r(i)),G(e.$$.fragment),k(e.$$.fragment,1),X(e,t.parentNode,t)):e=null}else n&&e.$set(a)},i(i){s||(e&&k(e.$$.fragment,i),s=!0)},o(i){e&&S(e.$$.fragment,i),s=!1},d(i){i&&h(t),e&&j(e,i)}}}function _t(l){let e;return{c(){e=Y("[]")},l(t){e=W(t,"[]")},m(t,s){C(t,e,s)},d(t){t&&h(e)}}}function mt(l){let e,t,s,n,r,i,o,a,f,c=l[5].path.indexOf(xe)>=0,y,w,R=Qe(l[5].path)+"",L,T,g;function O(...u){return l[3](l[5],...u)}function p(...u){return l[4](l[5],...u)}s=new Kt({props:{hideLabel:!0,checked:l[0].find(O)!=null}}),s.$on("change",p);const m=[Tl,Nl],b=[];function E(u,d){return u[5].dtype?0:1}o=E(l),a=b[o]=m[o](l);let P=c&&_t();return{c(){e=V("div"),t=V("div"),G(s.$$.fragment),n=J(),r=V("div"),i=V("div"),a.c(),f=J(),P&&P.c(),y=J(),w=V("div"),L=Y(R),T=J(),this.h()},l(u){e=N(u,"DIV",{class:!0});var d=D(e);t=N(d,"DIV",{class:!0});var _=D(t);x(s.$$.fragment,_),_.forEach(h),n=$(d),r=N(d,"DIV",{class:!0});var I=D(r);i=N(I,"DIV",{class:!0});var q=D(i);a.l(q),f=$(q),P&&P.l(q),q.forEach(h),I.forEach(h),y=$(d),w=N(d,"DIV",{class:!0});var B=D(w);L=W(B,R),B.forEach(h),T=$(d),d.forEach(h),this.h()},h(){M(t,"class","mr-2"),M(i,"class","inline-flex items-center rounded-md p-0.5"),Q(i,"bg-blue-200",l[6]),Q(i,"bg-teal-100",l[7]),M(r,"class","flex w-10"),M(w,"class","flex-grow"),M(e,"class","flex items-center")},m(u,d){C(u,e,d),v(e,t),X(s,t,null),v(e,n),v(e,r),v(r,i),b[o].m(i,null),v(i,f),P&&P.m(i,null),v(e,y),v(e,w),v(w,L),v(e,T),g=!0},p(u,d){l=u;const _={};d&3&&(_.checked=l[0].find(O)!=null),s.$set(_);let I=o;o=E(l),o===I?b[o].p(l,d):(se(),S(b[I],1,1,()=>{b[I]=null}),ne(),a=b[o],a?a.p(l,d):(a=b[o]=m[o](l),a.c()),k(a,1),a.m(i,f)),d&2&&(c=l[5].path.indexOf(xe)>=0),c?P||(P=_t(),P.c(),P.m(i,null)):P&&(P.d(1),P=null),(!g||d&2)&&Q(i,"bg-blue-200",l[6]),(!g||d&2)&&Q(i,"bg-teal-100",l[7]),(!g||d&2)&&R!==(R=Qe(l[5].path)+"")&&me(L,R)},i(u){g||(k(s.$$.fragment,u),k(a),g=!0)},o(u){S(s.$$.fragment,u),S(a),g=!1},d(u){u&&h(e),j(s),b[o].d(),P&&P.d()}}}function Ml(l){let e,t,s=l[1],n=[];for(let i=0;i<s.length;i+=1)n[i]=mt(ht(l,s,i));const r=i=>S(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=re()},l(i){for(let o=0;o<n.length;o+=1)n[o].l(i);e=re()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);C(i,e,o),t=!0},p(i,[o]){if(o&7){s=i[1];let a;for(a=0;a<s.length;a+=1){const f=ht(i,s,a);n[a]?(n[a].p(f,o),k(n[a],1)):(n[a]=mt(f),n[a].c(),k(n[a],1),n[a].m(e.parentNode,e))}for(se(),a=s.length;a<n.length;a+=1)r(a);ne()}},i(i){if(!t){for(let o=0;o<s.length;o+=1)k(n[o]);t=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)S(n[o]);t=!1},d(i){qe(n,i),i&&h(e)}}}function Rl(l,e,t){let{fields:s}=e,{checkedFields:n}=e;function r(a,f){f.target.checked?(n.push(a),t(0,n)):t(0,n=n.filter(y=>!Fe(y.path,a.path)))}const i=(a,f)=>Fe(f.path,a.path),o=(a,f)=>r(a,f);return l.$$set=a=>{"fields"in a&&t(1,s=a.fields),"checkedFields"in a&&t(0,n=a.checkedFields)},[n,s,r,i,o]}class Tt extends Se{constructor(e){super(),Ee(this,e,Rl,Ml,Ie,{fields:1,checkedFields:0})}}function bt(l,e,t){const s=l.slice();return s[18]=e[t],s}function Al(l){let e,t,s,n,r,i,o,a,f,c,y,w,R,L,T,g,O,p,m,b,E,P,u,d,_,I,q,B,H,U,te,oe;const be=[Ol,Cl],le=[];function ge(z,K){return z[0]!=null&&z[2]!=null?0:1}f=ge(l),c=le[f]=be[f](l);const ke=[zl,ql],ie=[];function de(z,K){return z[6].isFetching?0:1}b=de(l),E=ie[b]=ke[b](l);const ce=[Ql,Hl],ee=[];function pe(z,K){return z[0]!=null&&z[1]!=null?0:1}return U=pe(l),te=ee[U]=ce[U](l),{c(){e=V("div"),t=V("section"),s=V("div"),n=Y("Media fields"),r=J(),i=V("div"),o=Y(`Media fields are text fields that are rendered large in the dataset viewer. They are the
        fields on which you can compute signals, embeddings, search, and label.`),a=J(),c.c(),y=J(),w=V("section"),R=V("div"),L=Y("Preferred embedding"),T=J(),g=V("div"),O=Y("This embedding will be used by default when indexing and querying the data."),p=J(),m=V("div"),E.c(),P=J(),u=V("section"),d=V("div"),_=Y("Render media as markdown"),I=J(),q=V("div"),B=Y("These media fields will be rendered as markdown in the dataset viewer."),H=J(),te.c(),this.h()},l(z){e=N(z,"DIV",{class:!0});var K=D(e);t=N(K,"SECTION",{class:!0});var fe=D(t);s=N(fe,"DIV",{class:!0});var he=D(s);n=W(he,"Media fields"),he.forEach(h),r=$(fe),i=N(fe,"DIV",{class:!0});var A=D(i);o=W(A,`Media fields are text fields that are rendered large in the dataset viewer. They are the
        fields on which you can compute signals, embeddings, search, and label.`),A.forEach(h),a=$(fe),c.l(fe),fe.forEach(h),y=$(K),w=N(K,"SECTION",{class:!0});var ae=D(w);R=N(ae,"DIV",{class:!0});var Le=D(R);L=W(Le,"Preferred embedding"),Le.forEach(h),T=$(ae),g=N(ae,"DIV",{class:!0});var De=D(g);O=W(De,"This embedding will be used by default when indexing and querying the data."),De.forEach(h),p=$(ae),m=N(ae,"DIV",{class:!0});var Te=D(m);E.l(Te),Te.forEach(h),ae.forEach(h),P=$(K),u=N(K,"SECTION",{class:!0});var we=D(u);d=N(we,"DIV",{class:!0});var F=D(d);_=W(F,"Render media as markdown"),F.forEach(h),I=$(we),q=N(we,"DIV",{class:!0});var _e=D(q);B=W(_e,"These media fields will be rendered as markdown in the dataset viewer."),_e.forEach(h),H=$(we),te.l(we),we.forEach(h),K.forEach(h),this.h()},h(){M(s,"class","text-lg text-gray-700"),M(i,"class","text-sm text-gray-500"),M(t,"class","flex flex-col gap-y-1"),M(R,"class","text-lg text-gray-700"),M(g,"class","text-sm text-gray-500"),M(m,"class","w-60"),M(w,"class","flex flex-col gap-y-1"),M(d,"class","text-lg text-gray-700"),M(q,"class","text-sm text-gray-500"),M(u,"class","flex flex-col gap-y-1"),M(e,"class","flex flex-col gap-y-6")},m(z,K){C(z,e,K),v(e,t),v(t,s),v(s,n),v(t,r),v(t,i),v(i,o),v(t,a),le[f].m(t,null),v(e,y),v(e,w),v(w,R),v(R,L),v(w,T),v(w,g),v(g,O),v(w,p),v(w,m),ie[b].m(m,null),v(e,P),v(e,u),v(u,d),v(d,_),v(u,I),v(u,q),v(q,B),v(u,H),ee[U].m(u,null),oe=!0},p(z,K){let fe=f;f=ge(z),f===fe?le[f].p(z,K):(se(),S(le[fe],1,1,()=>{le[fe]=null}),ne(),c=le[f],c?c.p(z,K):(c=le[f]=be[f](z),c.c()),k(c,1),c.m(t,null));let he=b;b=de(z),b===he?ie[b].p(z,K):(se(),S(ie[he],1,1,()=>{ie[he]=null}),ne(),E=ie[b],E?E.p(z,K):(E=ie[b]=ke[b](z),E.c()),k(E,1),E.m(m,null));let A=U;U=pe(z),U===A?ee[U].p(z,K):(se(),S(ee[A],1,1,()=>{ee[A]=null}),ne(),te=ee[U],te?te.p(z,K):(te=ee[U]=ce[U](z),te.c()),k(te,1),te.m(u,null))},i(z){oe||(k(c),k(E),k(te),oe=!0)},o(z){S(c),S(E),S(te),oe=!1},d(z){z&&h(e),le[f].d(),ie[b].d(),ee[U].d()}}}function Pl(l){let e,t;return e=new It({}),{c(){G(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},p:Z,i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Cl(l){let e,t;return e=new Ge({}),{c(){G(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},p:Z,i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Ol(l){let e,t,s;function n(i){l[15](i)}let r={fields:l[2]};return l[0]!==void 0&&(r.checkedFields=l[0]),e=new Tt({props:r}),Oe.push(()=>Ze(e,"checkedFields",n)),{c(){G(e.$$.fragment)},l(i){x(e.$$.fragment,i)},m(i,o){X(e,i,o),s=!0},p(i,o){const a={};o&4&&(a.fields=i[2]),!t&&o&1&&(t=!0,a.checkedFields=i[0],Ye(()=>t=!1)),e.$set(a)},i(i){s||(k(e.$$.fragment,i),s=!0)},o(i){S(e.$$.fragment,i),s=!1},d(i){j(e,i)}}}function ql(l){var s;let e,t;return e=new el({props:{selected:((s=l[3].data)==null?void 0:s.preferred_embedding)||void 0,$$slots:{default:[Bl]},$$scope:{ctx:l}}}),e.$on("change",l[9]),{c(){G(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,r){X(e,n,r),t=!0},p(n,r){var o;const i={};r&8&&(i.selected=((o=n[3].data)==null?void 0:o.preferred_embedding)||void 0),r&2097216&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function zl(l){let e,t;return e=new Ge({}),{c(){G(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},p:Z,i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function gt(l){let e,t;return e=new Dt({props:{value:l[18].name}}),{c(){G(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},p(s,n){const r={};n&64&&(r.value=s[18].name),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Bl(l){let e,t,s,n;e=new Dt({props:{value:void 0,text:"None"}});let r=l[6].data||[],i=[];for(let a=0;a<r.length;a+=1)i[a]=gt(bt(l,r,a));const o=a=>S(i[a],1,1,()=>{i[a]=null});return{c(){G(e.$$.fragment),t=J();for(let a=0;a<i.length;a+=1)i[a].c();s=re()},l(a){x(e.$$.fragment,a),t=$(a);for(let f=0;f<i.length;f+=1)i[f].l(a);s=re()},m(a,f){X(e,a,f),C(a,t,f);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(a,f);C(a,s,f),n=!0},p(a,f){if(f&64){r=a[6].data||[];let c;for(c=0;c<r.length;c+=1){const y=bt(a,r,c);i[c]?(i[c].p(y,f),k(i[c],1)):(i[c]=gt(y),i[c].c(),k(i[c],1),i[c].m(s.parentNode,s))}for(se(),c=r.length;c<i.length;c+=1)o(c);ne()}},i(a){if(!n){k(e.$$.fragment,a);for(let f=0;f<r.length;f+=1)k(i[f]);n=!0}},o(a){S(e.$$.fragment,a),i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)S(i[f]);n=!1},d(a){j(e,a),a&&h(t),qe(i,a),a&&h(s)}}}function Hl(l){let e,t;return e=new Ge({}),{c(){G(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},p:Z,i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Ql(l){let e,t,s;function n(i){l[16](i)}let r={fields:l[0]};return l[1]!==void 0&&(r.checkedFields=l[1]),e=new Tt({props:r}),Oe.push(()=>Ze(e,"checkedFields",n)),{c(){G(e.$$.fragment)},l(i){x(e.$$.fragment,i)},m(i,o){X(e,i,o),s=!0},p(i,o){const a={};o&1&&(a.fields=i[0]),!t&&o&2&&(t=!0,a.checkedFields=i[1],Ye(()=>t=!1)),e.$set(a)},i(i){s||(k(e.$$.fragment,i),s=!0)},o(i){S(e.$$.fragment,i),s=!1},d(i){j(e,i)}}}function Zl(l){let e,t,s,n;const r=[Pl,Al],i=[];function o(a,f){return a[3].isFetching?0:1}return e=o(l),t=i[e]=r[e](l),{c(){t.c(),s=re()},l(a){t.l(a),s=re()},m(a,f){i[e].m(a,f),C(a,s,f),n=!0},p(a,[f]){let c=e;e=o(a),e===c?i[e].p(a,f):(se(),S(i[c],1,1,()=>{i[c]=null}),ne(),t=i[e],t?t.p(a,f):(t=i[e]=r[e](a),t.c()),k(t,1),t.m(s.parentNode,s))},i(a){n||(k(t),n=!0)},o(a){S(t),n=!1},d(a){i[e].d(a),a&&h(s)}}}function Ul(l,e,t){let s,n,r,i,o=Z,a=()=>(o(),o=ue(n,_=>t(3,i=_)),n),f,c=Z,y=()=>(c(),c=ue(s,_=>t(14,f=_)),s),w,R;l.$$.on_destroy.push(()=>o()),l.$$.on_destroy.push(()=>c());let{namespace:L}=e,{datasetName:T}=e,{settings:g=void 0}=e;const O=Jt();ye(l,O,_=>t(6,R=_));const p=Vt();ye(l,p,_=>t(17,w=_));let m=null,b=null,E=w.embedding;function P(_){const I=_.target.value;t(13,E=I),E===""&&t(13,E=void 0)}function u(_){m=_,t(0,m),t(3,i),t(2,r),t(14,f)}function d(_){b=_,t(1,b),t(3,i),t(2,r),t(14,f)}return l.$$set=_=>{"namespace"in _&&t(11,L=_.namespace),"datasetName"in _&&t(12,T=_.datasetName),"settings"in _&&t(10,g=_.settings)},l.$$.update=()=>{var _,I,q;if(l.$$.dirty&6144&&y(t(5,s=ze(L,T))),l.$$.dirty&6144&&a(t(4,n=St(L,T))),l.$$.dirty&16384&&t(2,r=f.data!=null?$t(f.data).filter(B=>B.dtype==="string"&&!Fe(B.path,[xt])&&!Lt(B)):null),l.$$.dirty&8&&i.isFetching&&(t(0,m=null),t(1,b=null)),l.$$.dirty&13&&m==null&&r!=null&&i.data!=null&&!i.isFetching){const B=(((_=i.data.ui)==null?void 0:_.media_paths)||[]).map(H=>Array.isArray(H)?H:[H]);t(0,m=r.filter(H=>B.some(U=>Fe(H.path,U))))}if(l.$$.dirty&14&&b==null&&r!=null&&i.data!=null&&!i.isFetching){const B=(((q=(I=i.data)==null?void 0:I.ui)==null?void 0:q.markdown_paths)||[]).map(H=>Array.isArray(H)?H:[H]);t(1,b=r.filter(H=>B.some(U=>Fe(H.path,U))))}l.$$.dirty&8195&&m!=null&&t(10,g={ui:{media_paths:m.map(B=>B.path),markdown_paths:b==null?void 0:b.map(B=>B.path)},preferred_embedding:E})},[m,b,r,i,n,s,R,O,p,P,g,L,T,E,f,u,d]}class ts extends Se{constructor(e){super(),Ee(this,e,Ul,Zl,Ie,{namespace:11,datasetName:12,settings:10})}}export{ts as D,vl as E,Tt as F,es as R,Nt as T};
