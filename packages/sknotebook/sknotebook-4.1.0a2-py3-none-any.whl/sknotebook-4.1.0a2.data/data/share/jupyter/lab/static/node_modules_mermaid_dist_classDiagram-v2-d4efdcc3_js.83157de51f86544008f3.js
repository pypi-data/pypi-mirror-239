"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["node_modules_mermaid_dist_classDiagram-v2-d4efdcc3_js"],{

/***/ "../node_modules/mermaid/dist/classDiagram-v2-d4efdcc3.js":
/*!****************************************************************!*\
  !*** ../node_modules/mermaid/dist/classDiagram-v2-d4efdcc3.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "diagram": () => (/* binding */ diagram)
/* harmony export */ });
/* harmony import */ var _styles_8b67d7cb_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./styles-8b67d7cb.js */ "../node_modules/mermaid/dist/styles-8b67d7cb.js");
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3 */ "../node_modules/d3/src/index.js");
/* harmony import */ var dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dagre-d3-es/src/graphlib/index.js */ "../node_modules/dagre-d3-es/src/graphlib/index.js");
/* harmony import */ var _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./mermaid-0d192ec3.js */ "../node_modules/mermaid/dist/mermaid-0d192ec3.js");
/* harmony import */ var _index_f9462f3f_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./index-f9462f3f.js */ "../node_modules/mermaid/dist/index-f9462f3f.js");
/* harmony import */ var ts_dedent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ts-dedent */ "../node_modules/ts-dedent/esm/index.js");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dayjs */ "../node_modules/dayjs/dayjs.min.js");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @braintree/sanitize-url */ "../node_modules/@braintree/sanitize-url/dist/index.js");
/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dompurify */ "../node_modules/dompurify/dist/purify.js");
/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var dagre_d3_es_src_dagre_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! dagre-d3-es/src/dagre/index.js */ "../node_modules/dagre-d3-es/src/dagre/index.js");
/* harmony import */ var dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! dagre-d3-es/src/graphlib/json.js */ "../node_modules/dagre-d3-es/src/graphlib/json.js");



















const sanitizeText = (txt) => _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.e.sanitizeText(txt, (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)());
let conf = {
  dividerMargin: 10,
  padding: 5,
  textHeight: 10,
  curve: void 0
};
const addNamespaces = function(namespaces, g, _id, diagObj) {
  const keys = Object.keys(namespaces);
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info("keys:", keys);
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info(namespaces);
  keys.forEach(function(id) {
    var _a, _b;
    const vertex = namespaces[id];
    const shape = "rect";
    const node = {
      shape,
      id: vertex.id,
      domId: vertex.domId,
      labelText: sanitizeText(vertex.id),
      labelStyle: "",
      style: "fill: none; stroke: black",
      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release
      padding: ((_a = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().flowchart) == null ? void 0 : _a.padding) ?? ((_b = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().class) == null ? void 0 : _b.padding)
    };
    g.setNode(vertex.id, node);
    addClasses(vertex.classes, g, _id, diagObj, vertex.id);
    _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info("setNode", node);
  });
};
const addClasses = function(classes, g, _id, diagObj, parent) {
  const keys = Object.keys(classes);
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info("keys:", keys);
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info(classes);
  keys.filter((id) => classes[id].parent == parent).forEach(function(id) {
    var _a, _b;
    const vertex = classes[id];
    const cssClassStr = vertex.cssClasses.join(" ");
    const styles2 = { labelStyle: "", style: "" };
    const vertexText = vertex.label ?? vertex.id;
    const radius = 0;
    const shape = "class_box";
    const node = {
      labelStyle: styles2.labelStyle,
      shape,
      labelText: sanitizeText(vertexText),
      classData: vertex,
      rx: radius,
      ry: radius,
      class: cssClassStr,
      style: styles2.style,
      id: vertex.id,
      domId: vertex.domId,
      tooltip: diagObj.db.getTooltip(vertex.id, parent) || "",
      haveCallback: vertex.haveCallback,
      link: vertex.link,
      width: vertex.type === "group" ? 500 : void 0,
      type: vertex.type,
      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release
      padding: ((_a = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().flowchart) == null ? void 0 : _a.padding) ?? ((_b = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().class) == null ? void 0 : _b.padding)
    };
    g.setNode(vertex.id, node);
    if (parent) {
      g.setParent(vertex.id, parent);
    }
    _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info("setNode", node);
  });
};
const addNotes = function(notes, g, startEdgeId, classes) {
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info(notes);
  notes.forEach(function(note, i) {
    var _a, _b;
    const vertex = note;
    const cssNoteStr = "";
    const styles2 = { labelStyle: "", style: "" };
    const vertexText = vertex.text;
    const radius = 0;
    const shape = "note";
    const node = {
      labelStyle: styles2.labelStyle,
      shape,
      labelText: sanitizeText(vertexText),
      noteData: vertex,
      rx: radius,
      ry: radius,
      class: cssNoteStr,
      style: styles2.style,
      id: vertex.id,
      domId: vertex.id,
      tooltip: "",
      type: "note",
      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release
      padding: ((_a = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().flowchart) == null ? void 0 : _a.padding) ?? ((_b = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().class) == null ? void 0 : _b.padding)
    };
    g.setNode(vertex.id, node);
    _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info("setNode", node);
    if (!vertex.class || !(vertex.class in classes)) {
      return;
    }
    const edgeId = startEdgeId + i;
    const edgeData = {
      id: `edgeNote${edgeId}`,
      //Set relationship style and line type
      classes: "relation",
      pattern: "dotted",
      // Set link type for rendering
      arrowhead: "none",
      //Set edge extra labels
      startLabelRight: "",
      endLabelLeft: "",
      //Set relation arrow types
      arrowTypeStart: "none",
      arrowTypeEnd: "none",
      style: "fill:none",
      labelStyle: "",
      curve: (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.n)(conf.curve, d3__WEBPACK_IMPORTED_MODULE_0__.curveLinear)
    };
    g.setEdge(vertex.id, vertex.class, edgeData, edgeId);
  });
};
const addRelations = function(relations, g) {
  const conf2 = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().flowchart;
  let cnt = 0;
  relations.forEach(function(edge) {
    var _a;
    cnt++;
    const edgeData = {
      //Set relationship style and line type
      classes: "relation",
      pattern: edge.relation.lineType == 1 ? "dashed" : "solid",
      id: "id" + cnt,
      // Set link type for rendering
      arrowhead: edge.type === "arrow_open" ? "none" : "normal",
      //Set edge extra labels
      startLabelRight: edge.relationTitle1 === "none" ? "" : edge.relationTitle1,
      endLabelLeft: edge.relationTitle2 === "none" ? "" : edge.relationTitle2,
      //Set relation arrow types
      arrowTypeStart: getArrowMarker(edge.relation.type1),
      arrowTypeEnd: getArrowMarker(edge.relation.type2),
      style: "fill:none",
      labelStyle: "",
      curve: (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.n)(conf2 == null ? void 0 : conf2.curve, d3__WEBPACK_IMPORTED_MODULE_0__.curveLinear)
    };
    _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info(edgeData, edge);
    if (edge.style !== void 0) {
      const styles2 = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.k)(edge.style);
      edgeData.style = styles2.style;
      edgeData.labelStyle = styles2.labelStyle;
    }
    edge.text = edge.title;
    if (edge.text === void 0) {
      if (edge.style !== void 0) {
        edgeData.arrowheadStyle = "fill: #333";
      }
    } else {
      edgeData.arrowheadStyle = "fill: #333";
      edgeData.labelpos = "c";
      if (((_a = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().flowchart) == null ? void 0 : _a.htmlLabels) ?? (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().htmlLabels) {
        edgeData.labelType = "html";
        edgeData.label = '<span class="edgeLabel">' + edge.text + "</span>";
      } else {
        edgeData.labelType = "text";
        edgeData.label = edge.text.replace(_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.e.lineBreakRegex, "\n");
        if (edge.style === void 0) {
          edgeData.style = edgeData.style || "stroke: #333; stroke-width: 1.5px;fill:none";
        }
        edgeData.labelStyle = edgeData.labelStyle.replace("color:", "fill:");
      }
    }
    g.setEdge(edge.id1, edge.id2, edgeData, cnt);
  });
};
const setConf = function(cnf) {
  conf = {
    ...conf,
    ...cnf
  };
};
const draw = async function(text, id, _version, diagObj) {
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info("Drawing class - ", id);
  const conf2 = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().flowchart ?? (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().class;
  const securityLevel = (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.c)().securityLevel;
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info("config:", conf2);
  const nodeSpacing = (conf2 == null ? void 0 : conf2.nodeSpacing) ?? 50;
  const rankSpacing = (conf2 == null ? void 0 : conf2.rankSpacing) ?? 50;
  const g = new dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_1__.Graph({
    multigraph: true,
    compound: true
  }).setGraph({
    rankdir: diagObj.db.getDirection(),
    nodesep: nodeSpacing,
    ranksep: rankSpacing,
    marginx: 8,
    marginy: 8
  }).setDefaultEdgeLabel(function() {
    return {};
  });
  const namespaces = diagObj.db.getNamespaces();
  const classes = diagObj.db.getClasses();
  const relations = diagObj.db.getRelations();
  const notes = diagObj.db.getNotes();
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.l.info(relations);
  addNamespaces(namespaces, g, id, diagObj);
  addClasses(classes, g, id, diagObj);
  addRelations(relations, g);
  addNotes(notes, g, relations.length + 1, classes);
  let sandboxElement;
  if (securityLevel === "sandbox") {
    sandboxElement = (0,d3__WEBPACK_IMPORTED_MODULE_0__.select)("#i" + id);
  }
  const root = securityLevel === "sandbox" ? (0,d3__WEBPACK_IMPORTED_MODULE_0__.select)(sandboxElement.nodes()[0].contentDocument.body) : (0,d3__WEBPACK_IMPORTED_MODULE_0__.select)("body");
  const svg = root.select(`[id="${id}"]`);
  const element = root.select("#" + id + " g");
  await (0,_index_f9462f3f_js__WEBPACK_IMPORTED_MODULE_9__.r)(
    element,
    g,
    ["aggregation", "extension", "composition", "dependency", "lollipop"],
    "classDiagram",
    id
  );
  _mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.u.insertTitle(svg, "classTitleText", (conf2 == null ? void 0 : conf2.titleTopMargin) ?? 5, diagObj.db.getDiagramTitle());
  (0,_mermaid_0d192ec3_js__WEBPACK_IMPORTED_MODULE_8__.o)(g, svg, conf2 == null ? void 0 : conf2.diagramPadding, conf2 == null ? void 0 : conf2.useMaxWidth);
  if (!(conf2 == null ? void 0 : conf2.htmlLabels)) {
    const doc = securityLevel === "sandbox" ? sandboxElement.nodes()[0].contentDocument : document;
    const labels = doc.querySelectorAll('[id="' + id + '"] .edgeLabel .label');
    for (const label of labels) {
      const dim = label.getBBox();
      const rect = doc.createElementNS("http://www.w3.org/2000/svg", "rect");
      rect.setAttribute("rx", 0);
      rect.setAttribute("ry", 0);
      rect.setAttribute("width", dim.width);
      rect.setAttribute("height", dim.height);
      label.insertBefore(rect, label.firstChild);
    }
  }
};
function getArrowMarker(type) {
  let marker;
  switch (type) {
    case 0:
      marker = "aggregation";
      break;
    case 1:
      marker = "extension";
      break;
    case 2:
      marker = "composition";
      break;
    case 3:
      marker = "dependency";
      break;
    case 4:
      marker = "lollipop";
      break;
    default:
      marker = "none";
  }
  return marker;
}
const renderer = {
  setConf,
  draw
};
const diagram = {
  parser: _styles_8b67d7cb_js__WEBPACK_IMPORTED_MODULE_10__.p,
  db: _styles_8b67d7cb_js__WEBPACK_IMPORTED_MODULE_10__.d,
  renderer,
  styles: _styles_8b67d7cb_js__WEBPACK_IMPORTED_MODULE_10__.s,
  init: (cnf) => {
    if (!cnf.class) {
      cnf.class = {};
    }
    cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;
    _styles_8b67d7cb_js__WEBPACK_IMPORTED_MODULE_10__.d.clear();
  }
};



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX21lcm1haWRfZGlzdF9jbGFzc0RpYWdyYW0tdjItZDRlZmRjYzNfanMuODMxNTdkZTUxZjg2NTQ0MDA4ZjMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUU7QUFDaEM7QUFDcUI7QUFDc0c7QUFDbEg7QUFDL0I7QUFDSjtBQUNrQjtBQUNkO0FBQ0g7QUFDYztBQUNGO0FBQ1o7QUFDYztBQUNVO0FBQ0U7QUFDYjtBQUNLO0FBQ0E7QUFDbEMsOEJBQThCLGdFQUFtQixNQUFNLHVEQUFTO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHdEQUFRO0FBQ1YsRUFBRSx3REFBUTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0Esc0JBQXNCLHVEQUFTLHVEQUF1RCx1REFBUztBQUMvRjtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdEQUFRO0FBQ1osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUUsd0RBQVE7QUFDVixFQUFFLHdEQUFRO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1REFBUyx1REFBdUQsdURBQVM7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0RBQVE7QUFDWixHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUUsd0RBQVE7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVEQUFTLHVEQUF1RCx1REFBUztBQUMvRjtBQUNBO0FBQ0EsSUFBSSx3REFBUTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsT0FBTztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQWtCLGFBQWEsMkNBQVc7QUFDdkQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0JBQWdCLHVEQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1REFBa0IsdUNBQXVDLDJDQUFXO0FBQ2pGO0FBQ0EsSUFBSSx3REFBUTtBQUNaO0FBQ0Esc0JBQXNCLHVEQUFrQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxpQkFBaUIsdURBQVMsbURBQW1ELHVEQUFTO0FBQ3RGO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSwyQ0FBMkMsa0VBQXFCO0FBQ2hFO0FBQ0EsNERBQTRELG9CQUFvQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHdEQUFRO0FBQ1YsZ0JBQWdCLHVEQUFTLGdCQUFnQix1REFBUztBQUNsRCx3QkFBd0IsdURBQVM7QUFDakMsRUFBRSx3REFBUTtBQUNWO0FBQ0E7QUFDQSxnQkFBZ0Isb0VBQWM7QUFDOUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSx3REFBUTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwwQ0FBTTtBQUMzQjtBQUNBLDZDQUE2QywwQ0FBTSxtREFBbUQsMENBQU07QUFDNUcsa0NBQWtDLEdBQUc7QUFDckM7QUFDQSxRQUFRLHFEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwrREFBaUI7QUFDbkIsRUFBRSx1REFBaUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLElBQUk7QUFDSjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx5REFBUTtBQUNaO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NsYXNzRGlhZ3JhbS12Mi1kNGVmZGNjMy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwIGFzIHBhcnNlciwgZCBhcyBkYiwgcyBhcyBzdHlsZXMgfSBmcm9tIFwiLi9zdHlsZXMtOGI2N2Q3Y2IuanNcIjtcbmltcG9ydCB7IHNlbGVjdCwgY3VydmVMaW5lYXIgfSBmcm9tIFwiZDNcIjtcbmltcG9ydCAqIGFzIGdyYXBobGliIGZyb20gXCJkYWdyZS1kMy1lcy9zcmMvZ3JhcGhsaWIvaW5kZXguanNcIjtcbmltcG9ydCB7IGwgYXMgbG9nLCBjIGFzIGdldENvbmZpZywgdSBhcyB1dGlscywgbyBhcyBzZXR1cEdyYXBoVmlld2JveCwgbiBhcyBpbnRlcnBvbGF0ZVRvQ3VydmUsIGsgYXMgZ2V0U3R5bGVzRnJvbUFycmF5LCBlIGFzIGNvbW1vbiB9IGZyb20gXCIuL21lcm1haWQtMGQxOTJlYzMuanNcIjtcbmltcG9ydCB7IHIgYXMgcmVuZGVyIH0gZnJvbSBcIi4vaW5kZXgtZjk0NjJmM2YuanNcIjtcbmltcG9ydCBcInRzLWRlZGVudFwiO1xuaW1wb3J0IFwiZGF5anNcIjtcbmltcG9ydCBcIkBicmFpbnRyZWUvc2FuaXRpemUtdXJsXCI7XG5pbXBvcnQgXCJkb21wdXJpZnlcIjtcbmltcG9ydCBcImtocm9tYVwiO1xuaW1wb3J0IFwibG9kYXNoLWVzL21lbW9pemUuanNcIjtcbmltcG9ydCBcImxvZGFzaC1lcy9tZXJnZS5qc1wiO1xuaW1wb3J0IFwic3R5bGlzXCI7XG5pbXBvcnQgXCJsb2Rhc2gtZXMvaXNFbXB0eS5qc1wiO1xuaW1wb3J0IFwiZGFncmUtZDMtZXMvc3JjL2RhZ3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgXCJkYWdyZS1kMy1lcy9zcmMvZ3JhcGhsaWIvanNvbi5qc1wiO1xuaW1wb3J0IFwiLi9lZGdlcy1mMTVhN2UwNS5qc1wiO1xuaW1wb3J0IFwiLi9jcmVhdGVUZXh0LTgwYzNiZWZiLmpzXCI7XG5pbXBvcnQgXCJtZGFzdC11dGlsLWZyb20tbWFya2Rvd25cIjtcbmNvbnN0IHNhbml0aXplVGV4dCA9ICh0eHQpID0+IGNvbW1vbi5zYW5pdGl6ZVRleHQodHh0LCBnZXRDb25maWcoKSk7XG5sZXQgY29uZiA9IHtcbiAgZGl2aWRlck1hcmdpbjogMTAsXG4gIHBhZGRpbmc6IDUsXG4gIHRleHRIZWlnaHQ6IDEwLFxuICBjdXJ2ZTogdm9pZCAwXG59O1xuY29uc3QgYWRkTmFtZXNwYWNlcyA9IGZ1bmN0aW9uKG5hbWVzcGFjZXMsIGcsIF9pZCwgZGlhZ09iaikge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobmFtZXNwYWNlcyk7XG4gIGxvZy5pbmZvKFwia2V5czpcIiwga2V5cyk7XG4gIGxvZy5pbmZvKG5hbWVzcGFjZXMpO1xuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IHZlcnRleCA9IG5hbWVzcGFjZXNbaWRdO1xuICAgIGNvbnN0IHNoYXBlID0gXCJyZWN0XCI7XG4gICAgY29uc3Qgbm9kZSA9IHtcbiAgICAgIHNoYXBlLFxuICAgICAgaWQ6IHZlcnRleC5pZCxcbiAgICAgIGRvbUlkOiB2ZXJ0ZXguZG9tSWQsXG4gICAgICBsYWJlbFRleHQ6IHNhbml0aXplVGV4dCh2ZXJ0ZXguaWQpLFxuICAgICAgbGFiZWxTdHlsZTogXCJcIixcbiAgICAgIHN0eWxlOiBcImZpbGw6IG5vbmU7IHN0cm9rZTogYmxhY2tcIixcbiAgICAgIC8vIFRPRE8gVjEwOiBGbG93Y2hhcnQgPyBLZWVwaW5nIGZsb3djaGFydCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHJlbGVhc2VcbiAgICAgIHBhZGRpbmc6ICgoX2EgPSBnZXRDb25maWcoKS5mbG93Y2hhcnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5wYWRkaW5nKSA/PyAoKF9iID0gZ2V0Q29uZmlnKCkuY2xhc3MpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wYWRkaW5nKVxuICAgIH07XG4gICAgZy5zZXROb2RlKHZlcnRleC5pZCwgbm9kZSk7XG4gICAgYWRkQ2xhc3Nlcyh2ZXJ0ZXguY2xhc3NlcywgZywgX2lkLCBkaWFnT2JqLCB2ZXJ0ZXguaWQpO1xuICAgIGxvZy5pbmZvKFwic2V0Tm9kZVwiLCBub2RlKTtcbiAgfSk7XG59O1xuY29uc3QgYWRkQ2xhc3NlcyA9IGZ1bmN0aW9uKGNsYXNzZXMsIGcsIF9pZCwgZGlhZ09iaiwgcGFyZW50KSB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjbGFzc2VzKTtcbiAgbG9nLmluZm8oXCJrZXlzOlwiLCBrZXlzKTtcbiAgbG9nLmluZm8oY2xhc3Nlcyk7XG4gIGtleXMuZmlsdGVyKChpZCkgPT4gY2xhc3Nlc1tpZF0ucGFyZW50ID09IHBhcmVudCkuZm9yRWFjaChmdW5jdGlvbihpZCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgdmVydGV4ID0gY2xhc3Nlc1tpZF07XG4gICAgY29uc3QgY3NzQ2xhc3NTdHIgPSB2ZXJ0ZXguY3NzQ2xhc3Nlcy5qb2luKFwiIFwiKTtcbiAgICBjb25zdCBzdHlsZXMyID0geyBsYWJlbFN0eWxlOiBcIlwiLCBzdHlsZTogXCJcIiB9O1xuICAgIGNvbnN0IHZlcnRleFRleHQgPSB2ZXJ0ZXgubGFiZWwgPz8gdmVydGV4LmlkO1xuICAgIGNvbnN0IHJhZGl1cyA9IDA7XG4gICAgY29uc3Qgc2hhcGUgPSBcImNsYXNzX2JveFwiO1xuICAgIGNvbnN0IG5vZGUgPSB7XG4gICAgICBsYWJlbFN0eWxlOiBzdHlsZXMyLmxhYmVsU3R5bGUsXG4gICAgICBzaGFwZSxcbiAgICAgIGxhYmVsVGV4dDogc2FuaXRpemVUZXh0KHZlcnRleFRleHQpLFxuICAgICAgY2xhc3NEYXRhOiB2ZXJ0ZXgsXG4gICAgICByeDogcmFkaXVzLFxuICAgICAgcnk6IHJhZGl1cyxcbiAgICAgIGNsYXNzOiBjc3NDbGFzc1N0cixcbiAgICAgIHN0eWxlOiBzdHlsZXMyLnN0eWxlLFxuICAgICAgaWQ6IHZlcnRleC5pZCxcbiAgICAgIGRvbUlkOiB2ZXJ0ZXguZG9tSWQsXG4gICAgICB0b29sdGlwOiBkaWFnT2JqLmRiLmdldFRvb2x0aXAodmVydGV4LmlkLCBwYXJlbnQpIHx8IFwiXCIsXG4gICAgICBoYXZlQ2FsbGJhY2s6IHZlcnRleC5oYXZlQ2FsbGJhY2ssXG4gICAgICBsaW5rOiB2ZXJ0ZXgubGluayxcbiAgICAgIHdpZHRoOiB2ZXJ0ZXgudHlwZSA9PT0gXCJncm91cFwiID8gNTAwIDogdm9pZCAwLFxuICAgICAgdHlwZTogdmVydGV4LnR5cGUsXG4gICAgICAvLyBUT0RPIFYxMDogRmxvd2NoYXJ0ID8gS2VlcGluZyBmbG93Y2hhcnQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LiBSZW1vdmUgaW4gbmV4dCBtYWpvciByZWxlYXNlXG4gICAgICBwYWRkaW5nOiAoKF9hID0gZ2V0Q29uZmlnKCkuZmxvd2NoYXJ0KSA9PSBudWxsID8gdm9pZCAwIDogX2EucGFkZGluZykgPz8gKChfYiA9IGdldENvbmZpZygpLmNsYXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2IucGFkZGluZylcbiAgICB9O1xuICAgIGcuc2V0Tm9kZSh2ZXJ0ZXguaWQsIG5vZGUpO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIGcuc2V0UGFyZW50KHZlcnRleC5pZCwgcGFyZW50KTtcbiAgICB9XG4gICAgbG9nLmluZm8oXCJzZXROb2RlXCIsIG5vZGUpO1xuICB9KTtcbn07XG5jb25zdCBhZGROb3RlcyA9IGZ1bmN0aW9uKG5vdGVzLCBnLCBzdGFydEVkZ2VJZCwgY2xhc3Nlcykge1xuICBsb2cuaW5mbyhub3Rlcyk7XG4gIG5vdGVzLmZvckVhY2goZnVuY3Rpb24obm90ZSwgaSkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgdmVydGV4ID0gbm90ZTtcbiAgICBjb25zdCBjc3NOb3RlU3RyID0gXCJcIjtcbiAgICBjb25zdCBzdHlsZXMyID0geyBsYWJlbFN0eWxlOiBcIlwiLCBzdHlsZTogXCJcIiB9O1xuICAgIGNvbnN0IHZlcnRleFRleHQgPSB2ZXJ0ZXgudGV4dDtcbiAgICBjb25zdCByYWRpdXMgPSAwO1xuICAgIGNvbnN0IHNoYXBlID0gXCJub3RlXCI7XG4gICAgY29uc3Qgbm9kZSA9IHtcbiAgICAgIGxhYmVsU3R5bGU6IHN0eWxlczIubGFiZWxTdHlsZSxcbiAgICAgIHNoYXBlLFxuICAgICAgbGFiZWxUZXh0OiBzYW5pdGl6ZVRleHQodmVydGV4VGV4dCksXG4gICAgICBub3RlRGF0YTogdmVydGV4LFxuICAgICAgcng6IHJhZGl1cyxcbiAgICAgIHJ5OiByYWRpdXMsXG4gICAgICBjbGFzczogY3NzTm90ZVN0cixcbiAgICAgIHN0eWxlOiBzdHlsZXMyLnN0eWxlLFxuICAgICAgaWQ6IHZlcnRleC5pZCxcbiAgICAgIGRvbUlkOiB2ZXJ0ZXguaWQsXG4gICAgICB0b29sdGlwOiBcIlwiLFxuICAgICAgdHlwZTogXCJub3RlXCIsXG4gICAgICAvLyBUT0RPIFYxMDogRmxvd2NoYXJ0ID8gS2VlcGluZyBmbG93Y2hhcnQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LiBSZW1vdmUgaW4gbmV4dCBtYWpvciByZWxlYXNlXG4gICAgICBwYWRkaW5nOiAoKF9hID0gZ2V0Q29uZmlnKCkuZmxvd2NoYXJ0KSA9PSBudWxsID8gdm9pZCAwIDogX2EucGFkZGluZykgPz8gKChfYiA9IGdldENvbmZpZygpLmNsYXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2IucGFkZGluZylcbiAgICB9O1xuICAgIGcuc2V0Tm9kZSh2ZXJ0ZXguaWQsIG5vZGUpO1xuICAgIGxvZy5pbmZvKFwic2V0Tm9kZVwiLCBub2RlKTtcbiAgICBpZiAoIXZlcnRleC5jbGFzcyB8fCAhKHZlcnRleC5jbGFzcyBpbiBjbGFzc2VzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlZGdlSWQgPSBzdGFydEVkZ2VJZCArIGk7XG4gICAgY29uc3QgZWRnZURhdGEgPSB7XG4gICAgICBpZDogYGVkZ2VOb3RlJHtlZGdlSWR9YCxcbiAgICAgIC8vU2V0IHJlbGF0aW9uc2hpcCBzdHlsZSBhbmQgbGluZSB0eXBlXG4gICAgICBjbGFzc2VzOiBcInJlbGF0aW9uXCIsXG4gICAgICBwYXR0ZXJuOiBcImRvdHRlZFwiLFxuICAgICAgLy8gU2V0IGxpbmsgdHlwZSBmb3IgcmVuZGVyaW5nXG4gICAgICBhcnJvd2hlYWQ6IFwibm9uZVwiLFxuICAgICAgLy9TZXQgZWRnZSBleHRyYSBsYWJlbHNcbiAgICAgIHN0YXJ0TGFiZWxSaWdodDogXCJcIixcbiAgICAgIGVuZExhYmVsTGVmdDogXCJcIixcbiAgICAgIC8vU2V0IHJlbGF0aW9uIGFycm93IHR5cGVzXG4gICAgICBhcnJvd1R5cGVTdGFydDogXCJub25lXCIsXG4gICAgICBhcnJvd1R5cGVFbmQ6IFwibm9uZVwiLFxuICAgICAgc3R5bGU6IFwiZmlsbDpub25lXCIsXG4gICAgICBsYWJlbFN0eWxlOiBcIlwiLFxuICAgICAgY3VydmU6IGludGVycG9sYXRlVG9DdXJ2ZShjb25mLmN1cnZlLCBjdXJ2ZUxpbmVhcilcbiAgICB9O1xuICAgIGcuc2V0RWRnZSh2ZXJ0ZXguaWQsIHZlcnRleC5jbGFzcywgZWRnZURhdGEsIGVkZ2VJZCk7XG4gIH0pO1xufTtcbmNvbnN0IGFkZFJlbGF0aW9ucyA9IGZ1bmN0aW9uKHJlbGF0aW9ucywgZykge1xuICBjb25zdCBjb25mMiA9IGdldENvbmZpZygpLmZsb3djaGFydDtcbiAgbGV0IGNudCA9IDA7XG4gIHJlbGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGVkZ2UpIHtcbiAgICB2YXIgX2E7XG4gICAgY250Kys7XG4gICAgY29uc3QgZWRnZURhdGEgPSB7XG4gICAgICAvL1NldCByZWxhdGlvbnNoaXAgc3R5bGUgYW5kIGxpbmUgdHlwZVxuICAgICAgY2xhc3NlczogXCJyZWxhdGlvblwiLFxuICAgICAgcGF0dGVybjogZWRnZS5yZWxhdGlvbi5saW5lVHlwZSA9PSAxID8gXCJkYXNoZWRcIiA6IFwic29saWRcIixcbiAgICAgIGlkOiBcImlkXCIgKyBjbnQsXG4gICAgICAvLyBTZXQgbGluayB0eXBlIGZvciByZW5kZXJpbmdcbiAgICAgIGFycm93aGVhZDogZWRnZS50eXBlID09PSBcImFycm93X29wZW5cIiA/IFwibm9uZVwiIDogXCJub3JtYWxcIixcbiAgICAgIC8vU2V0IGVkZ2UgZXh0cmEgbGFiZWxzXG4gICAgICBzdGFydExhYmVsUmlnaHQ6IGVkZ2UucmVsYXRpb25UaXRsZTEgPT09IFwibm9uZVwiID8gXCJcIiA6IGVkZ2UucmVsYXRpb25UaXRsZTEsXG4gICAgICBlbmRMYWJlbExlZnQ6IGVkZ2UucmVsYXRpb25UaXRsZTIgPT09IFwibm9uZVwiID8gXCJcIiA6IGVkZ2UucmVsYXRpb25UaXRsZTIsXG4gICAgICAvL1NldCByZWxhdGlvbiBhcnJvdyB0eXBlc1xuICAgICAgYXJyb3dUeXBlU3RhcnQ6IGdldEFycm93TWFya2VyKGVkZ2UucmVsYXRpb24udHlwZTEpLFxuICAgICAgYXJyb3dUeXBlRW5kOiBnZXRBcnJvd01hcmtlcihlZGdlLnJlbGF0aW9uLnR5cGUyKSxcbiAgICAgIHN0eWxlOiBcImZpbGw6bm9uZVwiLFxuICAgICAgbGFiZWxTdHlsZTogXCJcIixcbiAgICAgIGN1cnZlOiBpbnRlcnBvbGF0ZVRvQ3VydmUoY29uZjIgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbmYyLmN1cnZlLCBjdXJ2ZUxpbmVhcilcbiAgICB9O1xuICAgIGxvZy5pbmZvKGVkZ2VEYXRhLCBlZGdlKTtcbiAgICBpZiAoZWRnZS5zdHlsZSAhPT0gdm9pZCAwKSB7XG4gICAgICBjb25zdCBzdHlsZXMyID0gZ2V0U3R5bGVzRnJvbUFycmF5KGVkZ2Uuc3R5bGUpO1xuICAgICAgZWRnZURhdGEuc3R5bGUgPSBzdHlsZXMyLnN0eWxlO1xuICAgICAgZWRnZURhdGEubGFiZWxTdHlsZSA9IHN0eWxlczIubGFiZWxTdHlsZTtcbiAgICB9XG4gICAgZWRnZS50ZXh0ID0gZWRnZS50aXRsZTtcbiAgICBpZiAoZWRnZS50ZXh0ID09PSB2b2lkIDApIHtcbiAgICAgIGlmIChlZGdlLnN0eWxlICE9PSB2b2lkIDApIHtcbiAgICAgICAgZWRnZURhdGEuYXJyb3doZWFkU3R5bGUgPSBcImZpbGw6ICMzMzNcIjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWRnZURhdGEuYXJyb3doZWFkU3R5bGUgPSBcImZpbGw6ICMzMzNcIjtcbiAgICAgIGVkZ2VEYXRhLmxhYmVscG9zID0gXCJjXCI7XG4gICAgICBpZiAoKChfYSA9IGdldENvbmZpZygpLmZsb3djaGFydCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmh0bWxMYWJlbHMpID8/IGdldENvbmZpZygpLmh0bWxMYWJlbHMpIHtcbiAgICAgICAgZWRnZURhdGEubGFiZWxUeXBlID0gXCJodG1sXCI7XG4gICAgICAgIGVkZ2VEYXRhLmxhYmVsID0gJzxzcGFuIGNsYXNzPVwiZWRnZUxhYmVsXCI+JyArIGVkZ2UudGV4dCArIFwiPC9zcGFuPlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWRnZURhdGEubGFiZWxUeXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGVkZ2VEYXRhLmxhYmVsID0gZWRnZS50ZXh0LnJlcGxhY2UoY29tbW9uLmxpbmVCcmVha1JlZ2V4LCBcIlxcblwiKTtcbiAgICAgICAgaWYgKGVkZ2Uuc3R5bGUgPT09IHZvaWQgMCkge1xuICAgICAgICAgIGVkZ2VEYXRhLnN0eWxlID0gZWRnZURhdGEuc3R5bGUgfHwgXCJzdHJva2U6ICMzMzM7IHN0cm9rZS13aWR0aDogMS41cHg7ZmlsbDpub25lXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWRnZURhdGEubGFiZWxTdHlsZSA9IGVkZ2VEYXRhLmxhYmVsU3R5bGUucmVwbGFjZShcImNvbG9yOlwiLCBcImZpbGw6XCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBnLnNldEVkZ2UoZWRnZS5pZDEsIGVkZ2UuaWQyLCBlZGdlRGF0YSwgY250KTtcbiAgfSk7XG59O1xuY29uc3Qgc2V0Q29uZiA9IGZ1bmN0aW9uKGNuZikge1xuICBjb25mID0ge1xuICAgIC4uLmNvbmYsXG4gICAgLi4uY25mXG4gIH07XG59O1xuY29uc3QgZHJhdyA9IGFzeW5jIGZ1bmN0aW9uKHRleHQsIGlkLCBfdmVyc2lvbiwgZGlhZ09iaikge1xuICBsb2cuaW5mbyhcIkRyYXdpbmcgY2xhc3MgLSBcIiwgaWQpO1xuICBjb25zdCBjb25mMiA9IGdldENvbmZpZygpLmZsb3djaGFydCA/PyBnZXRDb25maWcoKS5jbGFzcztcbiAgY29uc3Qgc2VjdXJpdHlMZXZlbCA9IGdldENvbmZpZygpLnNlY3VyaXR5TGV2ZWw7XG4gIGxvZy5pbmZvKFwiY29uZmlnOlwiLCBjb25mMik7XG4gIGNvbnN0IG5vZGVTcGFjaW5nID0gKGNvbmYyID09IG51bGwgPyB2b2lkIDAgOiBjb25mMi5ub2RlU3BhY2luZykgPz8gNTA7XG4gIGNvbnN0IHJhbmtTcGFjaW5nID0gKGNvbmYyID09IG51bGwgPyB2b2lkIDAgOiBjb25mMi5yYW5rU3BhY2luZykgPz8gNTA7XG4gIGNvbnN0IGcgPSBuZXcgZ3JhcGhsaWIuR3JhcGgoe1xuICAgIG11bHRpZ3JhcGg6IHRydWUsXG4gICAgY29tcG91bmQ6IHRydWVcbiAgfSkuc2V0R3JhcGgoe1xuICAgIHJhbmtkaXI6IGRpYWdPYmouZGIuZ2V0RGlyZWN0aW9uKCksXG4gICAgbm9kZXNlcDogbm9kZVNwYWNpbmcsXG4gICAgcmFua3NlcDogcmFua1NwYWNpbmcsXG4gICAgbWFyZ2lueDogOCxcbiAgICBtYXJnaW55OiA4XG4gIH0pLnNldERlZmF1bHRFZGdlTGFiZWwoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9KTtcbiAgY29uc3QgbmFtZXNwYWNlcyA9IGRpYWdPYmouZGIuZ2V0TmFtZXNwYWNlcygpO1xuICBjb25zdCBjbGFzc2VzID0gZGlhZ09iai5kYi5nZXRDbGFzc2VzKCk7XG4gIGNvbnN0IHJlbGF0aW9ucyA9IGRpYWdPYmouZGIuZ2V0UmVsYXRpb25zKCk7XG4gIGNvbnN0IG5vdGVzID0gZGlhZ09iai5kYi5nZXROb3RlcygpO1xuICBsb2cuaW5mbyhyZWxhdGlvbnMpO1xuICBhZGROYW1lc3BhY2VzKG5hbWVzcGFjZXMsIGcsIGlkLCBkaWFnT2JqKTtcbiAgYWRkQ2xhc3NlcyhjbGFzc2VzLCBnLCBpZCwgZGlhZ09iaik7XG4gIGFkZFJlbGF0aW9ucyhyZWxhdGlvbnMsIGcpO1xuICBhZGROb3Rlcyhub3RlcywgZywgcmVsYXRpb25zLmxlbmd0aCArIDEsIGNsYXNzZXMpO1xuICBsZXQgc2FuZGJveEVsZW1lbnQ7XG4gIGlmIChzZWN1cml0eUxldmVsID09PSBcInNhbmRib3hcIikge1xuICAgIHNhbmRib3hFbGVtZW50ID0gc2VsZWN0KFwiI2lcIiArIGlkKTtcbiAgfVxuICBjb25zdCByb290ID0gc2VjdXJpdHlMZXZlbCA9PT0gXCJzYW5kYm94XCIgPyBzZWxlY3Qoc2FuZGJveEVsZW1lbnQubm9kZXMoKVswXS5jb250ZW50RG9jdW1lbnQuYm9keSkgOiBzZWxlY3QoXCJib2R5XCIpO1xuICBjb25zdCBzdmcgPSByb290LnNlbGVjdChgW2lkPVwiJHtpZH1cIl1gKTtcbiAgY29uc3QgZWxlbWVudCA9IHJvb3Quc2VsZWN0KFwiI1wiICsgaWQgKyBcIiBnXCIpO1xuICBhd2FpdCByZW5kZXIoXG4gICAgZWxlbWVudCxcbiAgICBnLFxuICAgIFtcImFnZ3JlZ2F0aW9uXCIsIFwiZXh0ZW5zaW9uXCIsIFwiY29tcG9zaXRpb25cIiwgXCJkZXBlbmRlbmN5XCIsIFwibG9sbGlwb3BcIl0sXG4gICAgXCJjbGFzc0RpYWdyYW1cIixcbiAgICBpZFxuICApO1xuICB1dGlscy5pbnNlcnRUaXRsZShzdmcsIFwiY2xhc3NUaXRsZVRleHRcIiwgKGNvbmYyID09IG51bGwgPyB2b2lkIDAgOiBjb25mMi50aXRsZVRvcE1hcmdpbikgPz8gNSwgZGlhZ09iai5kYi5nZXREaWFncmFtVGl0bGUoKSk7XG4gIHNldHVwR3JhcGhWaWV3Ym94KGcsIHN2ZywgY29uZjIgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbmYyLmRpYWdyYW1QYWRkaW5nLCBjb25mMiA9PSBudWxsID8gdm9pZCAwIDogY29uZjIudXNlTWF4V2lkdGgpO1xuICBpZiAoIShjb25mMiA9PSBudWxsID8gdm9pZCAwIDogY29uZjIuaHRtbExhYmVscykpIHtcbiAgICBjb25zdCBkb2MgPSBzZWN1cml0eUxldmVsID09PSBcInNhbmRib3hcIiA/IHNhbmRib3hFbGVtZW50Lm5vZGVzKClbMF0uY29udGVudERvY3VtZW50IDogZG9jdW1lbnQ7XG4gICAgY29uc3QgbGFiZWxzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZD1cIicgKyBpZCArICdcIl0gLmVkZ2VMYWJlbCAubGFiZWwnKTtcbiAgICBmb3IgKGNvbnN0IGxhYmVsIG9mIGxhYmVscykge1xuICAgICAgY29uc3QgZGltID0gbGFiZWwuZ2V0QkJveCgpO1xuICAgICAgY29uc3QgcmVjdCA9IGRvYy5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInJlY3RcIik7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZShcInJ4XCIsIDApO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJyeVwiLCAwKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgZGltLndpZHRoKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGRpbS5oZWlnaHQpO1xuICAgICAgbGFiZWwuaW5zZXJ0QmVmb3JlKHJlY3QsIGxhYmVsLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfVxufTtcbmZ1bmN0aW9uIGdldEFycm93TWFya2VyKHR5cGUpIHtcbiAgbGV0IG1hcmtlcjtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAwOlxuICAgICAgbWFya2VyID0gXCJhZ2dyZWdhdGlvblwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgbWFya2VyID0gXCJleHRlbnNpb25cIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIG1hcmtlciA9IFwiY29tcG9zaXRpb25cIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzpcbiAgICAgIG1hcmtlciA9IFwiZGVwZW5kZW5jeVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0OlxuICAgICAgbWFya2VyID0gXCJsb2xsaXBvcFwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIG1hcmtlciA9IFwibm9uZVwiO1xuICB9XG4gIHJldHVybiBtYXJrZXI7XG59XG5jb25zdCByZW5kZXJlciA9IHtcbiAgc2V0Q29uZixcbiAgZHJhd1xufTtcbmNvbnN0IGRpYWdyYW0gPSB7XG4gIHBhcnNlcixcbiAgZGIsXG4gIHJlbmRlcmVyLFxuICBzdHlsZXMsXG4gIGluaXQ6IChjbmYpID0+IHtcbiAgICBpZiAoIWNuZi5jbGFzcykge1xuICAgICAgY25mLmNsYXNzID0ge307XG4gICAgfVxuICAgIGNuZi5jbGFzcy5hcnJvd01hcmtlckFic29sdXRlID0gY25mLmFycm93TWFya2VyQWJzb2x1dGU7XG4gICAgZGIuY2xlYXIoKTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIGRpYWdyYW1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=