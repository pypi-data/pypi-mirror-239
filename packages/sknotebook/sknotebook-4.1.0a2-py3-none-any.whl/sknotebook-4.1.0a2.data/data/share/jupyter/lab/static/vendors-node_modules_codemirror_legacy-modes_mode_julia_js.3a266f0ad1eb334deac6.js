"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["vendors-node_modules_codemirror_legacy-modes_mode_julia_js"],{

/***/ "../node_modules/@codemirror/legacy-modes/mode/julia.js":
/*!**************************************************************!*\
  !*** ../node_modules/@codemirror/legacy-modes/mode/julia.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "julia": () => (/* binding */ julia)
/* harmony export */ });
function wordRegexp(words, end, pre) {
  if (typeof pre === "undefined") pre = "";
  if (typeof end === "undefined") { end = "\\b"; }
  return new RegExp("^" + pre + "((" + words.join(")|(") + "))" + end);
}

var octChar = "\\\\[0-7]{1,3}";
var hexChar = "\\\\x[A-Fa-f0-9]{1,2}";
var sChar = "\\\\[abefnrtv0%?'\"\\\\]";
var uChar = "([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])";

var asciiOperatorsList = [
  "[<>]:", "[<>=]=", "<<=?", ">>>?=?", "=>", "--?>", "<--[->]?", "\\/\\/",
  "\\.{2,3}", "[\\.\\\\%*+\\-<>!\\/^|&]=?", "\\?", "\\$", "~", ":"
];
var operators = wordRegexp([
  "[<>]:", "[<>=]=", "[!=]==", "<<=?", ">>>?=?", "=>?", "--?>", "<--[->]?", "\\/\\/",
  "[\\\\%*+\\-<>!\\/^|&\\u00F7\\u22BB]=?", "\\?", "\\$", "~", ":",
  "\\u00D7", "\\u2208", "\\u2209", "\\u220B", "\\u220C", "\\u2218",
  "\\u221A", "\\u221B", "\\u2229", "\\u222A", "\\u2260", "\\u2264",
  "\\u2265", "\\u2286", "\\u2288", "\\u228A", "\\u22C5",
  "\\b(in|isa)\\b(?!\.?\\()"
], "");
var delimiters = /^[;,()[\]{}]/;
var identifiers = /^[_A-Za-z\u00A1-\u2217\u2219-\uFFFF][\w\u00A1-\u2217\u2219-\uFFFF]*!*/;

var chars = wordRegexp([octChar, hexChar, sChar, uChar], "'");

var openersList = ["begin", "function", "type", "struct", "immutable", "let",
                   "macro", "for", "while", "quote", "if", "else", "elseif", "try",
                   "finally", "catch", "do"];

var closersList = ["end", "else", "elseif", "catch", "finally"];

var keywordsList = ["if", "else", "elseif", "while", "for", "begin", "let",
                    "end", "do", "try", "catch", "finally", "return", "break", "continue",
                    "global", "local", "const", "export", "import", "importall", "using",
                    "function", "where", "macro", "module", "baremodule", "struct", "type",
                    "mutable", "immutable", "quote", "typealias", "abstract", "primitive",
                    "bitstype"];

var builtinsList = ["true", "false", "nothing", "NaN", "Inf"];

var openers = wordRegexp(openersList);
var closers = wordRegexp(closersList);
var keywords = wordRegexp(keywordsList);
var builtins = wordRegexp(builtinsList);

var macro = /^@[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;
var symbol = /^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;
var stringPrefixes = /^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/;

var macroOperators = wordRegexp(asciiOperatorsList, "", "@");
var symbolOperators = wordRegexp(asciiOperatorsList, "", ":");

function inArray(state) {
  return (state.nestedArrays > 0);
}

function inGenerator(state) {
  return (state.nestedGenerators > 0);
}

function currentScope(state, n) {
  if (typeof(n) === "undefined") { n = 0; }
  if (state.scopes.length <= n) {
    return null;
  }
  return state.scopes[state.scopes.length - (n + 1)];
}

// tokenizers
function tokenBase(stream, state) {
  // Handle multiline comments
  if (stream.match('#=', false)) {
    state.tokenize = tokenComment;
    return state.tokenize(stream, state);
  }

  // Handle scope changes
  var leavingExpr = state.leavingExpr;
  if (stream.sol()) {
    leavingExpr = false;
  }
  state.leavingExpr = false;

  if (leavingExpr) {
    if (stream.match(/^'+/)) {
      return "operator";
    }
  }

  if (stream.match(/\.{4,}/)) {
    return "error";
  } else if (stream.match(/\.{1,3}/)) {
    return "operator";
  }

  if (stream.eatSpace()) {
    return null;
  }

  var ch = stream.peek();

  // Handle single line comments
  if (ch === '#') {
    stream.skipToEnd();
    return "comment";
  }

  if (ch === '[') {
    state.scopes.push('[');
    state.nestedArrays++;
  }

  if (ch === '(') {
    state.scopes.push('(');
    state.nestedGenerators++;
  }

  if (inArray(state) && ch === ']') {
    while (state.scopes.length && currentScope(state) !== "[") { state.scopes.pop(); }
    state.scopes.pop();
    state.nestedArrays--;
    state.leavingExpr = true;
  }

  if (inGenerator(state) && ch === ')') {
    while (state.scopes.length && currentScope(state) !== "(") { state.scopes.pop(); }
    state.scopes.pop();
    state.nestedGenerators--;
    state.leavingExpr = true;
  }

  if (inArray(state)) {
    if (state.lastToken == "end" && stream.match(':')) {
      return "operator";
    }
    if (stream.match('end')) {
      return "number";
    }
  }

  var match;
  if (match = stream.match(openers, false)) {
    state.scopes.push(match[0]);
  }

  if (stream.match(closers, false)) {
    state.scopes.pop();
  }

  // Handle type annotations
  if (stream.match(/^::(?![:\$])/)) {
    state.tokenize = tokenAnnotation;
    return state.tokenize(stream, state);
  }

  // Handle symbols
  if (!leavingExpr && (stream.match(symbol) || stream.match(symbolOperators))) {
    return "builtin";
  }

  // Handle parametric types
  //if (stream.match(/^{[^}]*}(?=\()/)) {
  //  return "builtin";
  //}

  // Handle operators and Delimiters
  if (stream.match(operators)) {
    return "operator";
  }

  // Handle Number Literals
  if (stream.match(/^\.?\d/, false)) {
    var imMatcher = RegExp(/^im\b/);
    var numberLiteral = false;
    if (stream.match(/^0x\.[0-9a-f_]+p[\+\-]?[_\d]+/i)) { numberLiteral = true; }
    // Integers
    if (stream.match(/^0x[0-9a-f_]+/i)) { numberLiteral = true; } // Hex
    if (stream.match(/^0b[01_]+/i)) { numberLiteral = true; } // Binary
    if (stream.match(/^0o[0-7_]+/i)) { numberLiteral = true; } // Octal
    // Floats
    if (stream.match(/^(?:(?:\d[_\d]*)?\.(?!\.)(?:\d[_\d]*)?|\d[_\d]*\.(?!\.)(?:\d[_\d]*))?([Eef][\+\-]?[_\d]+)?/i)) { numberLiteral = true; }
    if (stream.match(/^\d[_\d]*(e[\+\-]?\d+)?/i)) { numberLiteral = true; } // Decimal
    if (numberLiteral) {
      // Integer literals may be "long"
      stream.match(imMatcher);
      state.leavingExpr = true;
      return "number";
    }
  }

  // Handle Chars
  if (stream.match("'")) {
    state.tokenize = tokenChar;
    return state.tokenize(stream, state);
  }

  // Handle Strings
  if (stream.match(stringPrefixes)) {
    state.tokenize = tokenStringFactory(stream.current());
    return state.tokenize(stream, state);
  }

  if (stream.match(macro) || stream.match(macroOperators)) {
    return "meta";
  }

  if (stream.match(delimiters)) {
    return null;
  }

  if (stream.match(keywords)) {
    return "keyword";
  }

  if (stream.match(builtins)) {
    return "builtin";
  }

  var isDefinition = state.isDefinition || state.lastToken == "function" ||
      state.lastToken == "macro" || state.lastToken == "type" ||
      state.lastToken == "struct" || state.lastToken == "immutable";

  if (stream.match(identifiers)) {
    if (isDefinition) {
      if (stream.peek() === '.') {
        state.isDefinition = true;
        return "variable";
      }
      state.isDefinition = false;
      return "def";
    }
    state.leavingExpr = true;
    return "variable";
  }

  // Handle non-detected items
  stream.next();
  return "error";
}

function tokenAnnotation(stream, state) {
  stream.match(/.*?(?=[,;{}()=\s]|$)/);
  if (stream.match('{')) {
    state.nestedParameters++;
  } else if (stream.match('}') && state.nestedParameters > 0) {
    state.nestedParameters--;
  }
  if (state.nestedParameters > 0) {
    stream.match(/.*?(?={|})/) || stream.next();
  } else if (state.nestedParameters == 0) {
    state.tokenize = tokenBase;
  }
  return "builtin";
}

function tokenComment(stream, state) {
  if (stream.match('#=')) {
    state.nestedComments++;
  }
  if (!stream.match(/.*?(?=(#=|=#))/)) {
    stream.skipToEnd();
  }
  if (stream.match('=#')) {
    state.nestedComments--;
    if (state.nestedComments == 0)
      state.tokenize = tokenBase;
  }
  return "comment";
}

function tokenChar(stream, state) {
  var isChar = false, match;
  if (stream.match(chars)) {
    isChar = true;
  } else if (match = stream.match(/\\u([a-f0-9]{1,4})(?=')/i)) {
    var value = parseInt(match[1], 16);
    if (value <= 55295 || value >= 57344) { // (U+0,U+D7FF), (U+E000,U+FFFF)
      isChar = true;
      stream.next();
    }
  } else if (match = stream.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)) {
    var value = parseInt(match[1], 16);
    if (value <= 1114111) { // U+10FFFF
      isChar = true;
      stream.next();
    }
  }
  if (isChar) {
    state.leavingExpr = true;
    state.tokenize = tokenBase;
    return "string";
  }
  if (!stream.match(/^[^']+(?=')/)) { stream.skipToEnd(); }
  if (stream.match("'")) { state.tokenize = tokenBase; }
  return "error";
}

function tokenStringFactory(delimiter) {
  if (delimiter.substr(-3) === '"""') {
    delimiter = '"""';
  } else if (delimiter.substr(-1) === '"') {
    delimiter = '"';
  }
  function tokenString(stream, state) {
    if (stream.eat('\\')) {
      stream.next();
    } else if (stream.match(delimiter)) {
      state.tokenize = tokenBase;
      state.leavingExpr = true;
      return "string";
    } else {
      stream.eat(/[`"]/);
    }
    stream.eatWhile(/[^\\`"]/);
    return "string";
  }
  return tokenString;
}

const julia = {
  name: "julia",
  startState: function() {
    return {
      tokenize: tokenBase,
      scopes: [],
      lastToken: null,
      leavingExpr: false,
      isDefinition: false,
      nestedArrays: 0,
      nestedComments: 0,
      nestedGenerators: 0,
      nestedParameters: 0,
      firstParenPos: -1
    };
  },

  token: function(stream, state) {
    var style = state.tokenize(stream, state);
    var current = stream.current();

    if (current && style) {
      state.lastToken = current;
    }

    return style;
  },

  indent: function(state, textAfter, cx) {
    var delta = 0;
    if ( textAfter === ']' || textAfter === ')' || /^end\b/.test(textAfter) ||
         /^else/.test(textAfter) || /^catch\b/.test(textAfter) || /^elseif\b/.test(textAfter) ||
         /^finally/.test(textAfter) ) {
      delta = -1;
    }
    return (state.scopes.length + delta) * cx.unit;
  },

  languageData: {
    indentOnInput: /^\s*(end|else|catch|finally)\b$/,
    commentTokens: {line: "#", block: {open: "#=", close: "=#"}},
    closeBrackets: {brackets: ["(", "[", "{", '"']},
    autocomplete: keywordsList.concat(builtinsList)
  }
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfY29kZW1pcnJvcl9sZWdhY3ktbW9kZXNfbW9kZV9qdWxpYV9qcy4zYTI2NmYwYWQxZWIzMzRkZWFjNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBOztBQUVBLHlCQUF5QixJQUFJO0FBQzdCLGdDQUFnQyxJQUFJO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU8sSUFBSTtBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixRQUFRO0FBQzdCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixHQUFHO0FBQzFCO0FBQ0EsSUFBSSwwQkFBMEIsSUFBSTtBQUNsQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0IsR0FBRyxHQUFHO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQSwwQ0FBMEMsd0JBQXdCO0FBQ2xFLHNDQUFzQyx3QkFBd0I7QUFDOUQsdUNBQXVDLHdCQUF3QjtBQUMvRDtBQUNBLHVIQUF1SDtBQUN2SCxvREFBb0Qsd0JBQXdCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQjtBQUMzQixxQkFBcUI7QUFDckI7QUFDQSxJQUFJLHdCQUF3QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsRUFBRTtBQUMzQixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNENBQTRDLElBQUk7QUFDcEQ7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrQ0FBK0MsSUFBSTtBQUN2RDtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEMsMkJBQTJCO0FBQzNCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUIseUJBQXlCO0FBQ2hFLG9CQUFvQix1QkFBdUIsUUFBUTtBQUNuRDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi4vbm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL2xlZ2FjeS1tb2Rlcy9tb2RlL2p1bGlhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHdvcmRSZWdleHAod29yZHMsIGVuZCwgcHJlKSB7XG4gIGlmICh0eXBlb2YgcHJlID09PSBcInVuZGVmaW5lZFwiKSBwcmUgPSBcIlwiO1xuICBpZiAodHlwZW9mIGVuZCA9PT0gXCJ1bmRlZmluZWRcIikgeyBlbmQgPSBcIlxcXFxiXCI7IH1cbiAgcmV0dXJuIG5ldyBSZWdFeHAoXCJeXCIgKyBwcmUgKyBcIigoXCIgKyB3b3Jkcy5qb2luKFwiKXwoXCIpICsgXCIpKVwiICsgZW5kKTtcbn1cblxudmFyIG9jdENoYXIgPSBcIlxcXFxcXFxcWzAtN117MSwzfVwiO1xudmFyIGhleENoYXIgPSBcIlxcXFxcXFxceFtBLUZhLWYwLTldezEsMn1cIjtcbnZhciBzQ2hhciA9IFwiXFxcXFxcXFxbYWJlZm5ydHYwJT8nXFxcIlxcXFxcXFxcXVwiO1xudmFyIHVDaGFyID0gXCIoW15cXFxcdTAwMjdcXFxcdTAwNUNcXFxcdUQ4MDAtXFxcXHVERkZGXXxbXFxcXHVEODAwLVxcXFx1REZGRl1bXFxcXHVEQzAwLVxcXFx1REZGRl0pXCI7XG5cbnZhciBhc2NpaU9wZXJhdG9yc0xpc3QgPSBbXG4gIFwiWzw+XTpcIiwgXCJbPD49XT1cIiwgXCI8PD0/XCIsIFwiPj4+Pz0/XCIsIFwiPT5cIiwgXCItLT8+XCIsIFwiPC0tWy0+XT9cIiwgXCJcXFxcL1xcXFwvXCIsXG4gIFwiXFxcXC57MiwzfVwiLCBcIltcXFxcLlxcXFxcXFxcJSorXFxcXC08PiFcXFxcL158Jl09P1wiLCBcIlxcXFw/XCIsIFwiXFxcXCRcIiwgXCJ+XCIsIFwiOlwiXG5dO1xudmFyIG9wZXJhdG9ycyA9IHdvcmRSZWdleHAoW1xuICBcIls8Pl06XCIsIFwiWzw+PV09XCIsIFwiWyE9XT09XCIsIFwiPDw9P1wiLCBcIj4+Pj89P1wiLCBcIj0+P1wiLCBcIi0tPz5cIiwgXCI8LS1bLT5dP1wiLCBcIlxcXFwvXFxcXC9cIixcbiAgXCJbXFxcXFxcXFwlKitcXFxcLTw+IVxcXFwvXnwmXFxcXHUwMEY3XFxcXHUyMkJCXT0/XCIsIFwiXFxcXD9cIiwgXCJcXFxcJFwiLCBcIn5cIiwgXCI6XCIsXG4gIFwiXFxcXHUwMEQ3XCIsIFwiXFxcXHUyMjA4XCIsIFwiXFxcXHUyMjA5XCIsIFwiXFxcXHUyMjBCXCIsIFwiXFxcXHUyMjBDXCIsIFwiXFxcXHUyMjE4XCIsXG4gIFwiXFxcXHUyMjFBXCIsIFwiXFxcXHUyMjFCXCIsIFwiXFxcXHUyMjI5XCIsIFwiXFxcXHUyMjJBXCIsIFwiXFxcXHUyMjYwXCIsIFwiXFxcXHUyMjY0XCIsXG4gIFwiXFxcXHUyMjY1XCIsIFwiXFxcXHUyMjg2XCIsIFwiXFxcXHUyMjg4XCIsIFwiXFxcXHUyMjhBXCIsIFwiXFxcXHUyMkM1XCIsXG4gIFwiXFxcXGIoaW58aXNhKVxcXFxiKD8hXFwuP1xcXFwoKVwiXG5dLCBcIlwiKTtcbnZhciBkZWxpbWl0ZXJzID0gL15bOywoKVtcXF17fV0vO1xudmFyIGlkZW50aWZpZXJzID0gL15bX0EtWmEtelxcdTAwQTEtXFx1MjIxN1xcdTIyMTktXFx1RkZGRl1bXFx3XFx1MDBBMS1cXHUyMjE3XFx1MjIxOS1cXHVGRkZGXSohKi87XG5cbnZhciBjaGFycyA9IHdvcmRSZWdleHAoW29jdENoYXIsIGhleENoYXIsIHNDaGFyLCB1Q2hhcl0sIFwiJ1wiKTtcblxudmFyIG9wZW5lcnNMaXN0ID0gW1wiYmVnaW5cIiwgXCJmdW5jdGlvblwiLCBcInR5cGVcIiwgXCJzdHJ1Y3RcIiwgXCJpbW11dGFibGVcIiwgXCJsZXRcIixcbiAgICAgICAgICAgICAgICAgICBcIm1hY3JvXCIsIFwiZm9yXCIsIFwid2hpbGVcIiwgXCJxdW90ZVwiLCBcImlmXCIsIFwiZWxzZVwiLCBcImVsc2VpZlwiLCBcInRyeVwiLFxuICAgICAgICAgICAgICAgICAgIFwiZmluYWxseVwiLCBcImNhdGNoXCIsIFwiZG9cIl07XG5cbnZhciBjbG9zZXJzTGlzdCA9IFtcImVuZFwiLCBcImVsc2VcIiwgXCJlbHNlaWZcIiwgXCJjYXRjaFwiLCBcImZpbmFsbHlcIl07XG5cbnZhciBrZXl3b3Jkc0xpc3QgPSBbXCJpZlwiLCBcImVsc2VcIiwgXCJlbHNlaWZcIiwgXCJ3aGlsZVwiLCBcImZvclwiLCBcImJlZ2luXCIsIFwibGV0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZW5kXCIsIFwiZG9cIiwgXCJ0cnlcIiwgXCJjYXRjaFwiLCBcImZpbmFsbHlcIiwgXCJyZXR1cm5cIiwgXCJicmVha1wiLCBcImNvbnRpbnVlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZ2xvYmFsXCIsIFwibG9jYWxcIiwgXCJjb25zdFwiLCBcImV4cG9ydFwiLCBcImltcG9ydFwiLCBcImltcG9ydGFsbFwiLCBcInVzaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZnVuY3Rpb25cIiwgXCJ3aGVyZVwiLCBcIm1hY3JvXCIsIFwibW9kdWxlXCIsIFwiYmFyZW1vZHVsZVwiLCBcInN0cnVjdFwiLCBcInR5cGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtdXRhYmxlXCIsIFwiaW1tdXRhYmxlXCIsIFwicXVvdGVcIiwgXCJ0eXBlYWxpYXNcIiwgXCJhYnN0cmFjdFwiLCBcInByaW1pdGl2ZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImJpdHN0eXBlXCJdO1xuXG52YXIgYnVpbHRpbnNMaXN0ID0gW1widHJ1ZVwiLCBcImZhbHNlXCIsIFwibm90aGluZ1wiLCBcIk5hTlwiLCBcIkluZlwiXTtcblxudmFyIG9wZW5lcnMgPSB3b3JkUmVnZXhwKG9wZW5lcnNMaXN0KTtcbnZhciBjbG9zZXJzID0gd29yZFJlZ2V4cChjbG9zZXJzTGlzdCk7XG52YXIga2V5d29yZHMgPSB3b3JkUmVnZXhwKGtleXdvcmRzTGlzdCk7XG52YXIgYnVpbHRpbnMgPSB3b3JkUmVnZXhwKGJ1aWx0aW5zTGlzdCk7XG5cbnZhciBtYWNybyA9IC9eQFtfQS1aYS16XFx1MDBBMS1cXHVGRkZGXVtcXHdcXHUwMEExLVxcdUZGRkZdKiEqLztcbnZhciBzeW1ib2wgPSAvXjpbX0EtWmEtelxcdTAwQTEtXFx1RkZGRl1bXFx3XFx1MDBBMS1cXHVGRkZGXSohKi87XG52YXIgc3RyaW5nUHJlZml4ZXMgPSAvXihgfChbX0EtWmEtelxcdTAwQTEtXFx1RkZGRl0qXCIoXCJcIik/KSkvO1xuXG52YXIgbWFjcm9PcGVyYXRvcnMgPSB3b3JkUmVnZXhwKGFzY2lpT3BlcmF0b3JzTGlzdCwgXCJcIiwgXCJAXCIpO1xudmFyIHN5bWJvbE9wZXJhdG9ycyA9IHdvcmRSZWdleHAoYXNjaWlPcGVyYXRvcnNMaXN0LCBcIlwiLCBcIjpcIik7XG5cbmZ1bmN0aW9uIGluQXJyYXkoc3RhdGUpIHtcbiAgcmV0dXJuIChzdGF0ZS5uZXN0ZWRBcnJheXMgPiAwKTtcbn1cblxuZnVuY3Rpb24gaW5HZW5lcmF0b3Ioc3RhdGUpIHtcbiAgcmV0dXJuIChzdGF0ZS5uZXN0ZWRHZW5lcmF0b3JzID4gMCk7XG59XG5cbmZ1bmN0aW9uIGN1cnJlbnRTY29wZShzdGF0ZSwgbikge1xuICBpZiAodHlwZW9mKG4pID09PSBcInVuZGVmaW5lZFwiKSB7IG4gPSAwOyB9XG4gIGlmIChzdGF0ZS5zY29wZXMubGVuZ3RoIDw9IG4pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gc3RhdGUuc2NvcGVzW3N0YXRlLnNjb3Blcy5sZW5ndGggLSAobiArIDEpXTtcbn1cblxuLy8gdG9rZW5pemVyc1xuZnVuY3Rpb24gdG9rZW5CYXNlKHN0cmVhbSwgc3RhdGUpIHtcbiAgLy8gSGFuZGxlIG11bHRpbGluZSBjb21tZW50c1xuICBpZiAoc3RyZWFtLm1hdGNoKCcjPScsIGZhbHNlKSkge1xuICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5Db21tZW50O1xuICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBzY29wZSBjaGFuZ2VzXG4gIHZhciBsZWF2aW5nRXhwciA9IHN0YXRlLmxlYXZpbmdFeHByO1xuICBpZiAoc3RyZWFtLnNvbCgpKSB7XG4gICAgbGVhdmluZ0V4cHIgPSBmYWxzZTtcbiAgfVxuICBzdGF0ZS5sZWF2aW5nRXhwciA9IGZhbHNlO1xuXG4gIGlmIChsZWF2aW5nRXhwcikge1xuICAgIGlmIChzdHJlYW0ubWF0Y2goL14nKy8pKSB7XG4gICAgICByZXR1cm4gXCJvcGVyYXRvclwiO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdHJlYW0ubWF0Y2goL1xcLns0LH0vKSkge1xuICAgIHJldHVybiBcImVycm9yXCI7XG4gIH0gZWxzZSBpZiAoc3RyZWFtLm1hdGNoKC9cXC57MSwzfS8pKSB7XG4gICAgcmV0dXJuIFwib3BlcmF0b3JcIjtcbiAgfVxuXG4gIGlmIChzdHJlYW0uZWF0U3BhY2UoKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGNoID0gc3RyZWFtLnBlZWsoKTtcblxuICAvLyBIYW5kbGUgc2luZ2xlIGxpbmUgY29tbWVudHNcbiAgaWYgKGNoID09PSAnIycpIHtcbiAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgcmV0dXJuIFwiY29tbWVudFwiO1xuICB9XG5cbiAgaWYgKGNoID09PSAnWycpIHtcbiAgICBzdGF0ZS5zY29wZXMucHVzaCgnWycpO1xuICAgIHN0YXRlLm5lc3RlZEFycmF5cysrO1xuICB9XG5cbiAgaWYgKGNoID09PSAnKCcpIHtcbiAgICBzdGF0ZS5zY29wZXMucHVzaCgnKCcpO1xuICAgIHN0YXRlLm5lc3RlZEdlbmVyYXRvcnMrKztcbiAgfVxuXG4gIGlmIChpbkFycmF5KHN0YXRlKSAmJiBjaCA9PT0gJ10nKSB7XG4gICAgd2hpbGUgKHN0YXRlLnNjb3Blcy5sZW5ndGggJiYgY3VycmVudFNjb3BlKHN0YXRlKSAhPT0gXCJbXCIpIHsgc3RhdGUuc2NvcGVzLnBvcCgpOyB9XG4gICAgc3RhdGUuc2NvcGVzLnBvcCgpO1xuICAgIHN0YXRlLm5lc3RlZEFycmF5cy0tO1xuICAgIHN0YXRlLmxlYXZpbmdFeHByID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChpbkdlbmVyYXRvcihzdGF0ZSkgJiYgY2ggPT09ICcpJykge1xuICAgIHdoaWxlIChzdGF0ZS5zY29wZXMubGVuZ3RoICYmIGN1cnJlbnRTY29wZShzdGF0ZSkgIT09IFwiKFwiKSB7IHN0YXRlLnNjb3Blcy5wb3AoKTsgfVxuICAgIHN0YXRlLnNjb3Blcy5wb3AoKTtcbiAgICBzdGF0ZS5uZXN0ZWRHZW5lcmF0b3JzLS07XG4gICAgc3RhdGUubGVhdmluZ0V4cHIgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGluQXJyYXkoc3RhdGUpKSB7XG4gICAgaWYgKHN0YXRlLmxhc3RUb2tlbiA9PSBcImVuZFwiICYmIHN0cmVhbS5tYXRjaCgnOicpKSB7XG4gICAgICByZXR1cm4gXCJvcGVyYXRvclwiO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLm1hdGNoKCdlbmQnKSkge1xuICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgfVxuICB9XG5cbiAgdmFyIG1hdGNoO1xuICBpZiAobWF0Y2ggPSBzdHJlYW0ubWF0Y2gob3BlbmVycywgZmFsc2UpKSB7XG4gICAgc3RhdGUuc2NvcGVzLnB1c2gobWF0Y2hbMF0pO1xuICB9XG5cbiAgaWYgKHN0cmVhbS5tYXRjaChjbG9zZXJzLCBmYWxzZSkpIHtcbiAgICBzdGF0ZS5zY29wZXMucG9wKCk7XG4gIH1cblxuICAvLyBIYW5kbGUgdHlwZSBhbm5vdGF0aW9uc1xuICBpZiAoc3RyZWFtLm1hdGNoKC9eOjooPyFbOlxcJF0pLykpIHtcbiAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQW5ub3RhdGlvbjtcbiAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gIH1cblxuICAvLyBIYW5kbGUgc3ltYm9sc1xuICBpZiAoIWxlYXZpbmdFeHByICYmIChzdHJlYW0ubWF0Y2goc3ltYm9sKSB8fCBzdHJlYW0ubWF0Y2goc3ltYm9sT3BlcmF0b3JzKSkpIHtcbiAgICByZXR1cm4gXCJidWlsdGluXCI7XG4gIH1cblxuICAvLyBIYW5kbGUgcGFyYW1ldHJpYyB0eXBlc1xuICAvL2lmIChzdHJlYW0ubWF0Y2goL157W159XSp9KD89XFwoKS8pKSB7XG4gIC8vICByZXR1cm4gXCJidWlsdGluXCI7XG4gIC8vfVxuXG4gIC8vIEhhbmRsZSBvcGVyYXRvcnMgYW5kIERlbGltaXRlcnNcbiAgaWYgKHN0cmVhbS5tYXRjaChvcGVyYXRvcnMpKSB7XG4gICAgcmV0dXJuIFwib3BlcmF0b3JcIjtcbiAgfVxuXG4gIC8vIEhhbmRsZSBOdW1iZXIgTGl0ZXJhbHNcbiAgaWYgKHN0cmVhbS5tYXRjaCgvXlxcLj9cXGQvLCBmYWxzZSkpIHtcbiAgICB2YXIgaW1NYXRjaGVyID0gUmVnRXhwKC9eaW1cXGIvKTtcbiAgICB2YXIgbnVtYmVyTGl0ZXJhbCA9IGZhbHNlO1xuICAgIGlmIChzdHJlYW0ubWF0Y2goL14weFxcLlswLTlhLWZfXStwW1xcK1xcLV0/W19cXGRdKy9pKSkgeyBudW1iZXJMaXRlcmFsID0gdHJ1ZTsgfVxuICAgIC8vIEludGVnZXJzXG4gICAgaWYgKHN0cmVhbS5tYXRjaCgvXjB4WzAtOWEtZl9dKy9pKSkgeyBudW1iZXJMaXRlcmFsID0gdHJ1ZTsgfSAvLyBIZXhcbiAgICBpZiAoc3RyZWFtLm1hdGNoKC9eMGJbMDFfXSsvaSkpIHsgbnVtYmVyTGl0ZXJhbCA9IHRydWU7IH0gLy8gQmluYXJ5XG4gICAgaWYgKHN0cmVhbS5tYXRjaCgvXjBvWzAtN19dKy9pKSkgeyBudW1iZXJMaXRlcmFsID0gdHJ1ZTsgfSAvLyBPY3RhbFxuICAgIC8vIEZsb2F0c1xuICAgIGlmIChzdHJlYW0ubWF0Y2goL14oPzooPzpcXGRbX1xcZF0qKT9cXC4oPyFcXC4pKD86XFxkW19cXGRdKik/fFxcZFtfXFxkXSpcXC4oPyFcXC4pKD86XFxkW19cXGRdKikpPyhbRWVmXVtcXCtcXC1dP1tfXFxkXSspPy9pKSkgeyBudW1iZXJMaXRlcmFsID0gdHJ1ZTsgfVxuICAgIGlmIChzdHJlYW0ubWF0Y2goL15cXGRbX1xcZF0qKGVbXFwrXFwtXT9cXGQrKT8vaSkpIHsgbnVtYmVyTGl0ZXJhbCA9IHRydWU7IH0gLy8gRGVjaW1hbFxuICAgIGlmIChudW1iZXJMaXRlcmFsKSB7XG4gICAgICAvLyBJbnRlZ2VyIGxpdGVyYWxzIG1heSBiZSBcImxvbmdcIlxuICAgICAgc3RyZWFtLm1hdGNoKGltTWF0Y2hlcik7XG4gICAgICBzdGF0ZS5sZWF2aW5nRXhwciA9IHRydWU7XG4gICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgQ2hhcnNcbiAgaWYgKHN0cmVhbS5tYXRjaChcIidcIikpIHtcbiAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQ2hhcjtcbiAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gIH1cblxuICAvLyBIYW5kbGUgU3RyaW5nc1xuICBpZiAoc3RyZWFtLm1hdGNoKHN0cmluZ1ByZWZpeGVzKSkge1xuICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5TdHJpbmdGYWN0b3J5KHN0cmVhbS5jdXJyZW50KCkpO1xuICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgfVxuXG4gIGlmIChzdHJlYW0ubWF0Y2gobWFjcm8pIHx8IHN0cmVhbS5tYXRjaChtYWNyb09wZXJhdG9ycykpIHtcbiAgICByZXR1cm4gXCJtZXRhXCI7XG4gIH1cblxuICBpZiAoc3RyZWFtLm1hdGNoKGRlbGltaXRlcnMpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoc3RyZWFtLm1hdGNoKGtleXdvcmRzKSkge1xuICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgfVxuXG4gIGlmIChzdHJlYW0ubWF0Y2goYnVpbHRpbnMpKSB7XG4gICAgcmV0dXJuIFwiYnVpbHRpblwiO1xuICB9XG5cbiAgdmFyIGlzRGVmaW5pdGlvbiA9IHN0YXRlLmlzRGVmaW5pdGlvbiB8fCBzdGF0ZS5sYXN0VG9rZW4gPT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICBzdGF0ZS5sYXN0VG9rZW4gPT0gXCJtYWNyb1wiIHx8IHN0YXRlLmxhc3RUb2tlbiA9PSBcInR5cGVcIiB8fFxuICAgICAgc3RhdGUubGFzdFRva2VuID09IFwic3RydWN0XCIgfHwgc3RhdGUubGFzdFRva2VuID09IFwiaW1tdXRhYmxlXCI7XG5cbiAgaWYgKHN0cmVhbS5tYXRjaChpZGVudGlmaWVycykpIHtcbiAgICBpZiAoaXNEZWZpbml0aW9uKSB7XG4gICAgICBpZiAoc3RyZWFtLnBlZWsoKSA9PT0gJy4nKSB7XG4gICAgICAgIHN0YXRlLmlzRGVmaW5pdGlvbiA9IHRydWU7XG4gICAgICAgIHJldHVybiBcInZhcmlhYmxlXCI7XG4gICAgICB9XG4gICAgICBzdGF0ZS5pc0RlZmluaXRpb24gPSBmYWxzZTtcbiAgICAgIHJldHVybiBcImRlZlwiO1xuICAgIH1cbiAgICBzdGF0ZS5sZWF2aW5nRXhwciA9IHRydWU7XG4gICAgcmV0dXJuIFwidmFyaWFibGVcIjtcbiAgfVxuXG4gIC8vIEhhbmRsZSBub24tZGV0ZWN0ZWQgaXRlbXNcbiAgc3RyZWFtLm5leHQoKTtcbiAgcmV0dXJuIFwiZXJyb3JcIjtcbn1cblxuZnVuY3Rpb24gdG9rZW5Bbm5vdGF0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgc3RyZWFtLm1hdGNoKC8uKj8oPz1bLDt7fSgpPVxcc118JCkvKTtcbiAgaWYgKHN0cmVhbS5tYXRjaCgneycpKSB7XG4gICAgc3RhdGUubmVzdGVkUGFyYW1ldGVycysrO1xuICB9IGVsc2UgaWYgKHN0cmVhbS5tYXRjaCgnfScpICYmIHN0YXRlLm5lc3RlZFBhcmFtZXRlcnMgPiAwKSB7XG4gICAgc3RhdGUubmVzdGVkUGFyYW1ldGVycy0tO1xuICB9XG4gIGlmIChzdGF0ZS5uZXN0ZWRQYXJhbWV0ZXJzID4gMCkge1xuICAgIHN0cmVhbS5tYXRjaCgvLio/KD89e3x9KS8pIHx8IHN0cmVhbS5uZXh0KCk7XG4gIH0gZWxzZSBpZiAoc3RhdGUubmVzdGVkUGFyYW1ldGVycyA9PSAwKSB7XG4gICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gIH1cbiAgcmV0dXJuIFwiYnVpbHRpblwiO1xufVxuXG5mdW5jdGlvbiB0b2tlbkNvbW1lbnQoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKCcjPScpKSB7XG4gICAgc3RhdGUubmVzdGVkQ29tbWVudHMrKztcbiAgfVxuICBpZiAoIXN0cmVhbS5tYXRjaCgvLio/KD89KCM9fD0jKSkvKSkge1xuICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgfVxuICBpZiAoc3RyZWFtLm1hdGNoKCc9IycpKSB7XG4gICAgc3RhdGUubmVzdGVkQ29tbWVudHMtLTtcbiAgICBpZiAoc3RhdGUubmVzdGVkQ29tbWVudHMgPT0gMClcbiAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICB9XG4gIHJldHVybiBcImNvbW1lbnRcIjtcbn1cblxuZnVuY3Rpb24gdG9rZW5DaGFyKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGlzQ2hhciA9IGZhbHNlLCBtYXRjaDtcbiAgaWYgKHN0cmVhbS5tYXRjaChjaGFycykpIHtcbiAgICBpc0NoYXIgPSB0cnVlO1xuICB9IGVsc2UgaWYgKG1hdGNoID0gc3RyZWFtLm1hdGNoKC9cXFxcdShbYS1mMC05XXsxLDR9KSg/PScpL2kpKSB7XG4gICAgdmFyIHZhbHVlID0gcGFyc2VJbnQobWF0Y2hbMV0sIDE2KTtcbiAgICBpZiAodmFsdWUgPD0gNTUyOTUgfHwgdmFsdWUgPj0gNTczNDQpIHsgLy8gKFUrMCxVK0Q3RkYpLCAoVStFMDAwLFUrRkZGRilcbiAgICAgIGlzQ2hhciA9IHRydWU7XG4gICAgICBzdHJlYW0ubmV4dCgpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChtYXRjaCA9IHN0cmVhbS5tYXRjaCgvXFxcXFUoW0EtRmEtZjAtOV17NSw4fSkoPz0nKS8pKSB7XG4gICAgdmFyIHZhbHVlID0gcGFyc2VJbnQobWF0Y2hbMV0sIDE2KTtcbiAgICBpZiAodmFsdWUgPD0gMTExNDExMSkgeyAvLyBVKzEwRkZGRlxuICAgICAgaXNDaGFyID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgfVxuICB9XG4gIGlmIChpc0NoYXIpIHtcbiAgICBzdGF0ZS5sZWF2aW5nRXhwciA9IHRydWU7XG4gICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gIH1cbiAgaWYgKCFzdHJlYW0ubWF0Y2goL15bXiddKyg/PScpLykpIHsgc3RyZWFtLnNraXBUb0VuZCgpOyB9XG4gIGlmIChzdHJlYW0ubWF0Y2goXCInXCIpKSB7IHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlOyB9XG4gIHJldHVybiBcImVycm9yXCI7XG59XG5cbmZ1bmN0aW9uIHRva2VuU3RyaW5nRmFjdG9yeShkZWxpbWl0ZXIpIHtcbiAgaWYgKGRlbGltaXRlci5zdWJzdHIoLTMpID09PSAnXCJcIlwiJykge1xuICAgIGRlbGltaXRlciA9ICdcIlwiXCInO1xuICB9IGVsc2UgaWYgKGRlbGltaXRlci5zdWJzdHIoLTEpID09PSAnXCInKSB7XG4gICAgZGVsaW1pdGVyID0gJ1wiJztcbiAgfVxuICBmdW5jdGlvbiB0b2tlblN0cmluZyhzdHJlYW0sIHN0YXRlKSB7XG4gICAgaWYgKHN0cmVhbS5lYXQoJ1xcXFwnKSkge1xuICAgICAgc3RyZWFtLm5leHQoKTtcbiAgICB9IGVsc2UgaWYgKHN0cmVhbS5tYXRjaChkZWxpbWl0ZXIpKSB7XG4gICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgIHN0YXRlLmxlYXZpbmdFeHByID0gdHJ1ZTtcbiAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHJlYW0uZWF0KC9bYFwiXS8pO1xuICAgIH1cbiAgICBzdHJlYW0uZWF0V2hpbGUoL1teXFxcXGBcIl0vKTtcbiAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgfVxuICByZXR1cm4gdG9rZW5TdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBqdWxpYSA9IHtcbiAgbmFtZTogXCJqdWxpYVwiLFxuICBzdGFydFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW5pemU6IHRva2VuQmFzZSxcbiAgICAgIHNjb3BlczogW10sXG4gICAgICBsYXN0VG9rZW46IG51bGwsXG4gICAgICBsZWF2aW5nRXhwcjogZmFsc2UsXG4gICAgICBpc0RlZmluaXRpb246IGZhbHNlLFxuICAgICAgbmVzdGVkQXJyYXlzOiAwLFxuICAgICAgbmVzdGVkQ29tbWVudHM6IDAsXG4gICAgICBuZXN0ZWRHZW5lcmF0b3JzOiAwLFxuICAgICAgbmVzdGVkUGFyYW1ldGVyczogMCxcbiAgICAgIGZpcnN0UGFyZW5Qb3M6IC0xXG4gICAgfTtcbiAgfSxcblxuICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgIHZhciBzdHlsZSA9IHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgIHZhciBjdXJyZW50ID0gc3RyZWFtLmN1cnJlbnQoKTtcblxuICAgIGlmIChjdXJyZW50ICYmIHN0eWxlKSB7XG4gICAgICBzdGF0ZS5sYXN0VG9rZW4gPSBjdXJyZW50O1xuICAgIH1cblxuICAgIHJldHVybiBzdHlsZTtcbiAgfSxcblxuICBpbmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIsIGN4KSB7XG4gICAgdmFyIGRlbHRhID0gMDtcbiAgICBpZiAoIHRleHRBZnRlciA9PT0gJ10nIHx8IHRleHRBZnRlciA9PT0gJyknIHx8IC9eZW5kXFxiLy50ZXN0KHRleHRBZnRlcikgfHxcbiAgICAgICAgIC9eZWxzZS8udGVzdCh0ZXh0QWZ0ZXIpIHx8IC9eY2F0Y2hcXGIvLnRlc3QodGV4dEFmdGVyKSB8fCAvXmVsc2VpZlxcYi8udGVzdCh0ZXh0QWZ0ZXIpIHx8XG4gICAgICAgICAvXmZpbmFsbHkvLnRlc3QodGV4dEFmdGVyKSApIHtcbiAgICAgIGRlbHRhID0gLTE7XG4gICAgfVxuICAgIHJldHVybiAoc3RhdGUuc2NvcGVzLmxlbmd0aCArIGRlbHRhKSAqIGN4LnVuaXQ7XG4gIH0sXG5cbiAgbGFuZ3VhZ2VEYXRhOiB7XG4gICAgaW5kZW50T25JbnB1dDogL15cXHMqKGVuZHxlbHNlfGNhdGNofGZpbmFsbHkpXFxiJC8sXG4gICAgY29tbWVudFRva2Vuczoge2xpbmU6IFwiI1wiLCBibG9jazoge29wZW46IFwiIz1cIiwgY2xvc2U6IFwiPSNcIn19LFxuICAgIGNsb3NlQnJhY2tldHM6IHticmFja2V0czogW1wiKFwiLCBcIltcIiwgXCJ7XCIsICdcIiddfSxcbiAgICBhdXRvY29tcGxldGU6IGtleXdvcmRzTGlzdC5jb25jYXQoYnVpbHRpbnNMaXN0KVxuICB9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9