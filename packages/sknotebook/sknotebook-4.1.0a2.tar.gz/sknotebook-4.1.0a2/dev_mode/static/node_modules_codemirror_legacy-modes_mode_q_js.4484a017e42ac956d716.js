"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["node_modules_codemirror_legacy-modes_mode_q_js"],{

/***/ "../node_modules/@codemirror/legacy-modes/mode/q.js":
/*!**********************************************************!*\
  !*** ../node_modules/@codemirror/legacy-modes/mode/q.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "q": () => (/* binding */ q)
/* harmony export */ });
var curPunc,
    keywords=buildRE(["abs","acos","aj","aj0","all","and","any","asc","asin","asof","atan","attr","avg","avgs","bin","by","ceiling","cols","cor","cos","count","cov","cross","csv","cut","delete","deltas","desc","dev","differ","distinct","div","do","each","ej","enlist","eval","except","exec","exit","exp","fby","fills","first","fkeys","flip","floor","from","get","getenv","group","gtime","hclose","hcount","hdel","hopen","hsym","iasc","idesc","if","ij","in","insert","inter","inv","key","keys","last","like","list","lj","load","log","lower","lsq","ltime","ltrim","mavg","max","maxs","mcount","md5","mdev","med","meta","min","mins","mmax","mmin","mmu","mod","msum","neg","next","not","null","or","over","parse","peach","pj","plist","prd","prds","prev","prior","rand","rank","ratios","raze","read0","read1","reciprocal","reverse","rload","rotate","rsave","rtrim","save","scan","select","set","setenv","show","signum","sin","sqrt","ss","ssr","string","sublist","sum","sums","sv","system","tables","tan","til","trim","txf","type","uj","ungroup","union","update","upper","upsert","value","var","view","views","vs","wavg","where","where","while","within","wj","wj1","wsum","xasc","xbar","xcol","xcols","xdesc","xexp","xgroup","xkey","xlog","xprev","xrank"]),
    E=/[|/&^!+:\\\-*%$=~#;@><,?_\'\"\[\(\]\)\s{}]/;
function buildRE(w){return new RegExp("^("+w.join("|")+")$");}
function tokenBase(stream,state){
  var sol=stream.sol(),c=stream.next();
  curPunc=null;
  if(sol)
    if(c=="/")
      return(state.tokenize=tokenLineComment)(stream,state);
  else if(c=="\\"){
    if(stream.eol()||/\s/.test(stream.peek()))
      return stream.skipToEnd(),/^\\\s*$/.test(stream.current())?(state.tokenize=tokenCommentToEOF)(stream):state.tokenize=tokenBase,"comment";
    else
      return state.tokenize=tokenBase,"builtin";
  }
  if(/\s/.test(c))
    return stream.peek()=="/"?(stream.skipToEnd(),"comment"):"null";
  if(c=='"')
    return(state.tokenize=tokenString)(stream,state);
  if(c=='`')
    return stream.eatWhile(/[A-Za-z\d_:\/.]/),"macroName";
  if(("."==c&&/\d/.test(stream.peek()))||/\d/.test(c)){
    var t=null;
    stream.backUp(1);
    if(stream.match(/^\d{4}\.\d{2}(m|\.\d{2}([DT](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)
       || stream.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)
       || stream.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)
       || stream.match(/^\d+[ptuv]{1}/))
      t="temporal";
    else if(stream.match(/^0[NwW]{1}/)
            || stream.match(/^0x[\da-fA-F]*/)
            || stream.match(/^[01]+[b]{1}/)
            || stream.match(/^\d+[chijn]{1}/)
            || stream.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/))
      t="number";
    return(t&&(!(c=stream.peek())||E.test(c)))?t:(stream.next(),"error");
  }
  if(/[A-Za-z]|\./.test(c))
    return stream.eatWhile(/[A-Za-z._\d]/),keywords.test(stream.current())?"keyword":"variable";
  if(/[|/&^!+:\\\-*%$=~#;@><\.,?_\']/.test(c))
    return null;
  if(/[{}\(\[\]\)]/.test(c))
    return null;
  return"error";
}
function tokenLineComment(stream,state){
  return stream.skipToEnd(),/\/\s*$/.test(stream.current())?(state.tokenize=tokenBlockComment)(stream,state):(state.tokenize=tokenBase),"comment";
}
function tokenBlockComment(stream,state){
  var f=stream.sol()&&stream.peek()=="\\";
  stream.skipToEnd();
  if(f&&/^\\\s*$/.test(stream.current()))
    state.tokenize=tokenBase;
  return"comment";
}
function tokenCommentToEOF(stream){return stream.skipToEnd(),"comment";}
function tokenString(stream,state){
  var escaped=false,next,end=false;
  while((next=stream.next())){
    if(next=="\""&&!escaped){end=true;break;}
    escaped=!escaped&&next=="\\";
  }
  if(end)state.tokenize=tokenBase;
  return"string";
}
function pushContext(state,type,col){state.context={prev:state.context,indent:state.indent,col:col,type:type};}
function popContext(state){state.indent=state.context.indent;state.context=state.context.prev;}
const q = {
  name: "q",
  startState:function(){
    return{tokenize:tokenBase,
           context:null,
           indent:0,
           col:0};
  },
  token:function(stream,state){
    if(stream.sol()){
      if(state.context&&state.context.align==null)
        state.context.align=false;
      state.indent=stream.indentation();
    }
    //if (stream.eatSpace()) return null;
    var style=state.tokenize(stream,state);
    if(style!="comment"&&state.context&&state.context.align==null&&state.context.type!="pattern"){
      state.context.align=true;
    }
    if(curPunc=="(")pushContext(state,")",stream.column());
    else if(curPunc=="[")pushContext(state,"]",stream.column());
    else if(curPunc=="{")pushContext(state,"}",stream.column());
    else if(/[\]\}\)]/.test(curPunc)){
      while(state.context&&state.context.type=="pattern")popContext(state);
      if(state.context&&curPunc==state.context.type)popContext(state);
    }
    else if(curPunc=="."&&state.context&&state.context.type=="pattern")popContext(state);
    else if(/atom|string|variable/.test(style)&&state.context){
      if(/[\}\]]/.test(state.context.type))
        pushContext(state,"pattern",stream.column());
      else if(state.context.type=="pattern"&&!state.context.align){
        state.context.align=true;
        state.context.col=stream.column();
      }
    }
    return style;
  },
  indent:function(state,textAfter,cx){
    var firstChar=textAfter&&textAfter.charAt(0);
    var context=state.context;
    if(/[\]\}]/.test(firstChar))
      while (context&&context.type=="pattern")context=context.prev;
    var closing=context&&firstChar==context.type;
    if(!context)
      return 0;
    else if(context.type=="pattern")
      return context.col;
    else if(context.align)
      return context.col+(closing?0:1);
    else
      return context.indent+(closing?0:cx.unit);
  }
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2NvZGVtaXJyb3JfbGVnYWN5LW1vZGVzX21vZGVfcV9qcy40NDg0YTAxN2U0MmFjOTU2ZDcxNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBLDBCQUEwQixzQkFBc0I7QUFDaEQsb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxJQUFJO0FBQy9FLGlDQUFpQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxJQUFJO0FBQzNELDRCQUE0QixFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsTUFBTSxJQUFJO0FBQ3JELG1DQUFtQyxFQUFFO0FBQ3JDO0FBQ0Esa0NBQWtDLEVBQUU7QUFDcEM7QUFDQSx1Q0FBdUMsRUFBRTtBQUN6Qyx5Q0FBeUMsRUFBRTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLFNBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxlQUFlO0FBQ3BELDJCQUEyQixrQ0FBa0M7QUFDdEQ7QUFDUDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0Msa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BqdXB5dGVybGFiL2FwcGxpY2F0aW9uLXRvcC8uLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvbGVnYWN5LW1vZGVzL21vZGUvcS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY3VyUHVuYyxcbiAgICBrZXl3b3Jkcz1idWlsZFJFKFtcImFic1wiLFwiYWNvc1wiLFwiYWpcIixcImFqMFwiLFwiYWxsXCIsXCJhbmRcIixcImFueVwiLFwiYXNjXCIsXCJhc2luXCIsXCJhc29mXCIsXCJhdGFuXCIsXCJhdHRyXCIsXCJhdmdcIixcImF2Z3NcIixcImJpblwiLFwiYnlcIixcImNlaWxpbmdcIixcImNvbHNcIixcImNvclwiLFwiY29zXCIsXCJjb3VudFwiLFwiY292XCIsXCJjcm9zc1wiLFwiY3N2XCIsXCJjdXRcIixcImRlbGV0ZVwiLFwiZGVsdGFzXCIsXCJkZXNjXCIsXCJkZXZcIixcImRpZmZlclwiLFwiZGlzdGluY3RcIixcImRpdlwiLFwiZG9cIixcImVhY2hcIixcImVqXCIsXCJlbmxpc3RcIixcImV2YWxcIixcImV4Y2VwdFwiLFwiZXhlY1wiLFwiZXhpdFwiLFwiZXhwXCIsXCJmYnlcIixcImZpbGxzXCIsXCJmaXJzdFwiLFwiZmtleXNcIixcImZsaXBcIixcImZsb29yXCIsXCJmcm9tXCIsXCJnZXRcIixcImdldGVudlwiLFwiZ3JvdXBcIixcImd0aW1lXCIsXCJoY2xvc2VcIixcImhjb3VudFwiLFwiaGRlbFwiLFwiaG9wZW5cIixcImhzeW1cIixcImlhc2NcIixcImlkZXNjXCIsXCJpZlwiLFwiaWpcIixcImluXCIsXCJpbnNlcnRcIixcImludGVyXCIsXCJpbnZcIixcImtleVwiLFwia2V5c1wiLFwibGFzdFwiLFwibGlrZVwiLFwibGlzdFwiLFwibGpcIixcImxvYWRcIixcImxvZ1wiLFwibG93ZXJcIixcImxzcVwiLFwibHRpbWVcIixcImx0cmltXCIsXCJtYXZnXCIsXCJtYXhcIixcIm1heHNcIixcIm1jb3VudFwiLFwibWQ1XCIsXCJtZGV2XCIsXCJtZWRcIixcIm1ldGFcIixcIm1pblwiLFwibWluc1wiLFwibW1heFwiLFwibW1pblwiLFwibW11XCIsXCJtb2RcIixcIm1zdW1cIixcIm5lZ1wiLFwibmV4dFwiLFwibm90XCIsXCJudWxsXCIsXCJvclwiLFwib3ZlclwiLFwicGFyc2VcIixcInBlYWNoXCIsXCJwalwiLFwicGxpc3RcIixcInByZFwiLFwicHJkc1wiLFwicHJldlwiLFwicHJpb3JcIixcInJhbmRcIixcInJhbmtcIixcInJhdGlvc1wiLFwicmF6ZVwiLFwicmVhZDBcIixcInJlYWQxXCIsXCJyZWNpcHJvY2FsXCIsXCJyZXZlcnNlXCIsXCJybG9hZFwiLFwicm90YXRlXCIsXCJyc2F2ZVwiLFwicnRyaW1cIixcInNhdmVcIixcInNjYW5cIixcInNlbGVjdFwiLFwic2V0XCIsXCJzZXRlbnZcIixcInNob3dcIixcInNpZ251bVwiLFwic2luXCIsXCJzcXJ0XCIsXCJzc1wiLFwic3NyXCIsXCJzdHJpbmdcIixcInN1Ymxpc3RcIixcInN1bVwiLFwic3Vtc1wiLFwic3ZcIixcInN5c3RlbVwiLFwidGFibGVzXCIsXCJ0YW5cIixcInRpbFwiLFwidHJpbVwiLFwidHhmXCIsXCJ0eXBlXCIsXCJ1alwiLFwidW5ncm91cFwiLFwidW5pb25cIixcInVwZGF0ZVwiLFwidXBwZXJcIixcInVwc2VydFwiLFwidmFsdWVcIixcInZhclwiLFwidmlld1wiLFwidmlld3NcIixcInZzXCIsXCJ3YXZnXCIsXCJ3aGVyZVwiLFwid2hlcmVcIixcIndoaWxlXCIsXCJ3aXRoaW5cIixcIndqXCIsXCJ3ajFcIixcIndzdW1cIixcInhhc2NcIixcInhiYXJcIixcInhjb2xcIixcInhjb2xzXCIsXCJ4ZGVzY1wiLFwieGV4cFwiLFwieGdyb3VwXCIsXCJ4a2V5XCIsXCJ4bG9nXCIsXCJ4cHJldlwiLFwieHJhbmtcIl0pLFxuICAgIEU9L1t8LyZeISs6XFxcXFxcLSolJD1+IztAPjwsP19cXCdcXFwiXFxbXFwoXFxdXFwpXFxze31dLztcbmZ1bmN0aW9uIGJ1aWxkUkUodyl7cmV0dXJuIG5ldyBSZWdFeHAoXCJeKFwiK3cuam9pbihcInxcIikrXCIpJFwiKTt9XG5mdW5jdGlvbiB0b2tlbkJhc2Uoc3RyZWFtLHN0YXRlKXtcbiAgdmFyIHNvbD1zdHJlYW0uc29sKCksYz1zdHJlYW0ubmV4dCgpO1xuICBjdXJQdW5jPW51bGw7XG4gIGlmKHNvbClcbiAgICBpZihjPT1cIi9cIilcbiAgICAgIHJldHVybihzdGF0ZS50b2tlbml6ZT10b2tlbkxpbmVDb21tZW50KShzdHJlYW0sc3RhdGUpO1xuICBlbHNlIGlmKGM9PVwiXFxcXFwiKXtcbiAgICBpZihzdHJlYW0uZW9sKCl8fC9cXHMvLnRlc3Qoc3RyZWFtLnBlZWsoKSkpXG4gICAgICByZXR1cm4gc3RyZWFtLnNraXBUb0VuZCgpLC9eXFxcXFxccyokLy50ZXN0KHN0cmVhbS5jdXJyZW50KCkpPyhzdGF0ZS50b2tlbml6ZT10b2tlbkNvbW1lbnRUb0VPRikoc3RyZWFtKTpzdGF0ZS50b2tlbml6ZT10b2tlbkJhc2UsXCJjb21tZW50XCI7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplPXRva2VuQmFzZSxcImJ1aWx0aW5cIjtcbiAgfVxuICBpZigvXFxzLy50ZXN0KGMpKVxuICAgIHJldHVybiBzdHJlYW0ucGVlaygpPT1cIi9cIj8oc3RyZWFtLnNraXBUb0VuZCgpLFwiY29tbWVudFwiKTpcIm51bGxcIjtcbiAgaWYoYz09J1wiJylcbiAgICByZXR1cm4oc3RhdGUudG9rZW5pemU9dG9rZW5TdHJpbmcpKHN0cmVhbSxzdGF0ZSk7XG4gIGlmKGM9PSdgJylcbiAgICByZXR1cm4gc3RyZWFtLmVhdFdoaWxlKC9bQS1aYS16XFxkXzpcXC8uXS8pLFwibWFjcm9OYW1lXCI7XG4gIGlmKChcIi5cIj09YyYmL1xcZC8udGVzdChzdHJlYW0ucGVlaygpKSl8fC9cXGQvLnRlc3QoYykpe1xuICAgIHZhciB0PW51bGw7XG4gICAgc3RyZWFtLmJhY2tVcCgxKTtcbiAgICBpZihzdHJlYW0ubWF0Y2goL15cXGR7NH1cXC5cXGR7Mn0obXxcXC5cXGR7Mn0oW0RUXShcXGR7Mn0oOlxcZHsyfSg6XFxkezJ9KFxcLlxcZHsxLDl9KT8pPyk/KT8pPykvKVxuICAgICAgIHx8IHN0cmVhbS5tYXRjaCgvXlxcZCtEKFxcZHsyfSg6XFxkezJ9KDpcXGR7Mn0oXFwuXFxkezEsOX0pPyk/KT8pLylcbiAgICAgICB8fCBzdHJlYW0ubWF0Y2goL15cXGR7Mn06XFxkezJ9KDpcXGR7Mn0oXFwuXFxkezEsOX0pPyk/LylcbiAgICAgICB8fCBzdHJlYW0ubWF0Y2goL15cXGQrW3B0dXZdezF9LykpXG4gICAgICB0PVwidGVtcG9yYWxcIjtcbiAgICBlbHNlIGlmKHN0cmVhbS5tYXRjaCgvXjBbTndXXXsxfS8pXG4gICAgICAgICAgICB8fCBzdHJlYW0ubWF0Y2goL14weFtcXGRhLWZBLUZdKi8pXG4gICAgICAgICAgICB8fCBzdHJlYW0ubWF0Y2goL15bMDFdK1tiXXsxfS8pXG4gICAgICAgICAgICB8fCBzdHJlYW0ubWF0Y2goL15cXGQrW2NoaWpuXXsxfS8pXG4gICAgICAgICAgICB8fCBzdHJlYW0ubWF0Y2goLy0/XFxkKihcXC5cXGQqKT8oZVsrXFwtXT9cXGQrKT8oZXxmKT8vKSlcbiAgICAgIHQ9XCJudW1iZXJcIjtcbiAgICByZXR1cm4odCYmKCEoYz1zdHJlYW0ucGVlaygpKXx8RS50ZXN0KGMpKSk/dDooc3RyZWFtLm5leHQoKSxcImVycm9yXCIpO1xuICB9XG4gIGlmKC9bQS1aYS16XXxcXC4vLnRlc3QoYykpXG4gICAgcmV0dXJuIHN0cmVhbS5lYXRXaGlsZSgvW0EtWmEtei5fXFxkXS8pLGtleXdvcmRzLnRlc3Qoc3RyZWFtLmN1cnJlbnQoKSk/XCJrZXl3b3JkXCI6XCJ2YXJpYWJsZVwiO1xuICBpZigvW3wvJl4hKzpcXFxcXFwtKiUkPX4jO0A+PFxcLiw/X1xcJ10vLnRlc3QoYykpXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmKC9be31cXChcXFtcXF1cXCldLy50ZXN0KGMpKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm5cImVycm9yXCI7XG59XG5mdW5jdGlvbiB0b2tlbkxpbmVDb21tZW50KHN0cmVhbSxzdGF0ZSl7XG4gIHJldHVybiBzdHJlYW0uc2tpcFRvRW5kKCksL1xcL1xccyokLy50ZXN0KHN0cmVhbS5jdXJyZW50KCkpPyhzdGF0ZS50b2tlbml6ZT10b2tlbkJsb2NrQ29tbWVudCkoc3RyZWFtLHN0YXRlKTooc3RhdGUudG9rZW5pemU9dG9rZW5CYXNlKSxcImNvbW1lbnRcIjtcbn1cbmZ1bmN0aW9uIHRva2VuQmxvY2tDb21tZW50KHN0cmVhbSxzdGF0ZSl7XG4gIHZhciBmPXN0cmVhbS5zb2woKSYmc3RyZWFtLnBlZWsoKT09XCJcXFxcXCI7XG4gIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgaWYoZiYmL15cXFxcXFxzKiQvLnRlc3Qoc3RyZWFtLmN1cnJlbnQoKSkpXG4gICAgc3RhdGUudG9rZW5pemU9dG9rZW5CYXNlO1xuICByZXR1cm5cImNvbW1lbnRcIjtcbn1cbmZ1bmN0aW9uIHRva2VuQ29tbWVudFRvRU9GKHN0cmVhbSl7cmV0dXJuIHN0cmVhbS5za2lwVG9FbmQoKSxcImNvbW1lbnRcIjt9XG5mdW5jdGlvbiB0b2tlblN0cmluZyhzdHJlYW0sc3RhdGUpe1xuICB2YXIgZXNjYXBlZD1mYWxzZSxuZXh0LGVuZD1mYWxzZTtcbiAgd2hpbGUoKG5leHQ9c3RyZWFtLm5leHQoKSkpe1xuICAgIGlmKG5leHQ9PVwiXFxcIlwiJiYhZXNjYXBlZCl7ZW5kPXRydWU7YnJlYWs7fVxuICAgIGVzY2FwZWQ9IWVzY2FwZWQmJm5leHQ9PVwiXFxcXFwiO1xuICB9XG4gIGlmKGVuZClzdGF0ZS50b2tlbml6ZT10b2tlbkJhc2U7XG4gIHJldHVyblwic3RyaW5nXCI7XG59XG5mdW5jdGlvbiBwdXNoQ29udGV4dChzdGF0ZSx0eXBlLGNvbCl7c3RhdGUuY29udGV4dD17cHJldjpzdGF0ZS5jb250ZXh0LGluZGVudDpzdGF0ZS5pbmRlbnQsY29sOmNvbCx0eXBlOnR5cGV9O31cbmZ1bmN0aW9uIHBvcENvbnRleHQoc3RhdGUpe3N0YXRlLmluZGVudD1zdGF0ZS5jb250ZXh0LmluZGVudDtzdGF0ZS5jb250ZXh0PXN0YXRlLmNvbnRleHQucHJldjt9XG5leHBvcnQgY29uc3QgcSA9IHtcbiAgbmFtZTogXCJxXCIsXG4gIHN0YXJ0U3RhdGU6ZnVuY3Rpb24oKXtcbiAgICByZXR1cm57dG9rZW5pemU6dG9rZW5CYXNlLFxuICAgICAgICAgICBjb250ZXh0Om51bGwsXG4gICAgICAgICAgIGluZGVudDowLFxuICAgICAgICAgICBjb2w6MH07XG4gIH0sXG4gIHRva2VuOmZ1bmN0aW9uKHN0cmVhbSxzdGF0ZSl7XG4gICAgaWYoc3RyZWFtLnNvbCgpKXtcbiAgICAgIGlmKHN0YXRlLmNvbnRleHQmJnN0YXRlLmNvbnRleHQuYWxpZ249PW51bGwpXG4gICAgICAgIHN0YXRlLmNvbnRleHQuYWxpZ249ZmFsc2U7XG4gICAgICBzdGF0ZS5pbmRlbnQ9c3RyZWFtLmluZGVudGF0aW9uKCk7XG4gICAgfVxuICAgIC8vaWYgKHN0cmVhbS5lYXRTcGFjZSgpKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgc3R5bGU9c3RhdGUudG9rZW5pemUoc3RyZWFtLHN0YXRlKTtcbiAgICBpZihzdHlsZSE9XCJjb21tZW50XCImJnN0YXRlLmNvbnRleHQmJnN0YXRlLmNvbnRleHQuYWxpZ249PW51bGwmJnN0YXRlLmNvbnRleHQudHlwZSE9XCJwYXR0ZXJuXCIpe1xuICAgICAgc3RhdGUuY29udGV4dC5hbGlnbj10cnVlO1xuICAgIH1cbiAgICBpZihjdXJQdW5jPT1cIihcIilwdXNoQ29udGV4dChzdGF0ZSxcIilcIixzdHJlYW0uY29sdW1uKCkpO1xuICAgIGVsc2UgaWYoY3VyUHVuYz09XCJbXCIpcHVzaENvbnRleHQoc3RhdGUsXCJdXCIsc3RyZWFtLmNvbHVtbigpKTtcbiAgICBlbHNlIGlmKGN1clB1bmM9PVwie1wiKXB1c2hDb250ZXh0KHN0YXRlLFwifVwiLHN0cmVhbS5jb2x1bW4oKSk7XG4gICAgZWxzZSBpZigvW1xcXVxcfVxcKV0vLnRlc3QoY3VyUHVuYykpe1xuICAgICAgd2hpbGUoc3RhdGUuY29udGV4dCYmc3RhdGUuY29udGV4dC50eXBlPT1cInBhdHRlcm5cIilwb3BDb250ZXh0KHN0YXRlKTtcbiAgICAgIGlmKHN0YXRlLmNvbnRleHQmJmN1clB1bmM9PXN0YXRlLmNvbnRleHQudHlwZSlwb3BDb250ZXh0KHN0YXRlKTtcbiAgICB9XG4gICAgZWxzZSBpZihjdXJQdW5jPT1cIi5cIiYmc3RhdGUuY29udGV4dCYmc3RhdGUuY29udGV4dC50eXBlPT1cInBhdHRlcm5cIilwb3BDb250ZXh0KHN0YXRlKTtcbiAgICBlbHNlIGlmKC9hdG9tfHN0cmluZ3x2YXJpYWJsZS8udGVzdChzdHlsZSkmJnN0YXRlLmNvbnRleHQpe1xuICAgICAgaWYoL1tcXH1cXF1dLy50ZXN0KHN0YXRlLmNvbnRleHQudHlwZSkpXG4gICAgICAgIHB1c2hDb250ZXh0KHN0YXRlLFwicGF0dGVyblwiLHN0cmVhbS5jb2x1bW4oKSk7XG4gICAgICBlbHNlIGlmKHN0YXRlLmNvbnRleHQudHlwZT09XCJwYXR0ZXJuXCImJiFzdGF0ZS5jb250ZXh0LmFsaWduKXtcbiAgICAgICAgc3RhdGUuY29udGV4dC5hbGlnbj10cnVlO1xuICAgICAgICBzdGF0ZS5jb250ZXh0LmNvbD1zdHJlYW0uY29sdW1uKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHlsZTtcbiAgfSxcbiAgaW5kZW50OmZ1bmN0aW9uKHN0YXRlLHRleHRBZnRlcixjeCl7XG4gICAgdmFyIGZpcnN0Q2hhcj10ZXh0QWZ0ZXImJnRleHRBZnRlci5jaGFyQXQoMCk7XG4gICAgdmFyIGNvbnRleHQ9c3RhdGUuY29udGV4dDtcbiAgICBpZigvW1xcXVxcfV0vLnRlc3QoZmlyc3RDaGFyKSlcbiAgICAgIHdoaWxlIChjb250ZXh0JiZjb250ZXh0LnR5cGU9PVwicGF0dGVyblwiKWNvbnRleHQ9Y29udGV4dC5wcmV2O1xuICAgIHZhciBjbG9zaW5nPWNvbnRleHQmJmZpcnN0Q2hhcj09Y29udGV4dC50eXBlO1xuICAgIGlmKCFjb250ZXh0KVxuICAgICAgcmV0dXJuIDA7XG4gICAgZWxzZSBpZihjb250ZXh0LnR5cGU9PVwicGF0dGVyblwiKVxuICAgICAgcmV0dXJuIGNvbnRleHQuY29sO1xuICAgIGVsc2UgaWYoY29udGV4dC5hbGlnbilcbiAgICAgIHJldHVybiBjb250ZXh0LmNvbCsoY2xvc2luZz8wOjEpO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBjb250ZXh0LmluZGVudCsoY2xvc2luZz8wOmN4LnVuaXQpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9