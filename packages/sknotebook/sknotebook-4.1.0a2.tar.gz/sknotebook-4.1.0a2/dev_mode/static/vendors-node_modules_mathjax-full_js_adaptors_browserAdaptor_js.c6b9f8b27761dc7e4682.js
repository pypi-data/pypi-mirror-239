"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["vendors-node_modules_mathjax-full_js_adaptors_browserAdaptor_js"],{

/***/ "../node_modules/mathjax-full/js/adaptors/HTMLAdaptor.js":
/*!***************************************************************!*\
  !*** ../node_modules/mathjax-full/js/adaptors/HTMLAdaptor.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __values = (this && this.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HTMLAdaptor = void 0;
var DOMAdaptor_js_1 = __webpack_require__(/*! ../core/DOMAdaptor.js */ "../node_modules/mathjax-full/js/core/DOMAdaptor.js");
var HTMLAdaptor = (function (_super) {
    __extends(HTMLAdaptor, _super);
    function HTMLAdaptor(window) {
        var _this = _super.call(this, window.document) || this;
        _this.window = window;
        _this.parser = new window.DOMParser();
        return _this;
    }
    HTMLAdaptor.prototype.parse = function (text, format) {
        if (format === void 0) { format = 'text/html'; }
        return this.parser.parseFromString(text, format);
    };
    HTMLAdaptor.prototype.create = function (kind, ns) {
        return (ns ?
            this.document.createElementNS(ns, kind) :
            this.document.createElement(kind));
    };
    HTMLAdaptor.prototype.text = function (text) {
        return this.document.createTextNode(text);
    };
    HTMLAdaptor.prototype.head = function (doc) {
        return doc.head || doc;
    };
    HTMLAdaptor.prototype.body = function (doc) {
        return doc.body || doc;
    };
    HTMLAdaptor.prototype.root = function (doc) {
        return doc.documentElement || doc;
    };
    HTMLAdaptor.prototype.doctype = function (doc) {
        return (doc.doctype ? "<!DOCTYPE ".concat(doc.doctype.name, ">") : '');
    };
    HTMLAdaptor.prototype.tags = function (node, name, ns) {
        if (ns === void 0) { ns = null; }
        var nodes = (ns ? node.getElementsByTagNameNS(ns, name) : node.getElementsByTagName(name));
        return Array.from(nodes);
    };
    HTMLAdaptor.prototype.getElements = function (nodes, _document) {
        var e_1, _a;
        var containers = [];
        try {
            for (var nodes_1 = __values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()) {
                var node = nodes_1_1.value;
                if (typeof (node) === 'string') {
                    containers = containers.concat(Array.from(this.document.querySelectorAll(node)));
                }
                else if (Array.isArray(node)) {
                    containers = containers.concat(Array.from(node));
                }
                else if (node instanceof this.window.NodeList || node instanceof this.window.HTMLCollection) {
                    containers = containers.concat(Array.from(node));
                }
                else {
                    containers.push(node);
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return)) _a.call(nodes_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return containers;
    };
    HTMLAdaptor.prototype.contains = function (container, node) {
        return container.contains(node);
    };
    HTMLAdaptor.prototype.parent = function (node) {
        return node.parentNode;
    };
    HTMLAdaptor.prototype.append = function (node, child) {
        return node.appendChild(child);
    };
    HTMLAdaptor.prototype.insert = function (nchild, ochild) {
        return this.parent(ochild).insertBefore(nchild, ochild);
    };
    HTMLAdaptor.prototype.remove = function (child) {
        return this.parent(child).removeChild(child);
    };
    HTMLAdaptor.prototype.replace = function (nnode, onode) {
        return this.parent(onode).replaceChild(nnode, onode);
    };
    HTMLAdaptor.prototype.clone = function (node) {
        return node.cloneNode(true);
    };
    HTMLAdaptor.prototype.split = function (node, n) {
        return node.splitText(n);
    };
    HTMLAdaptor.prototype.next = function (node) {
        return node.nextSibling;
    };
    HTMLAdaptor.prototype.previous = function (node) {
        return node.previousSibling;
    };
    HTMLAdaptor.prototype.firstChild = function (node) {
        return node.firstChild;
    };
    HTMLAdaptor.prototype.lastChild = function (node) {
        return node.lastChild;
    };
    HTMLAdaptor.prototype.childNodes = function (node) {
        return Array.from(node.childNodes);
    };
    HTMLAdaptor.prototype.childNode = function (node, i) {
        return node.childNodes[i];
    };
    HTMLAdaptor.prototype.kind = function (node) {
        var n = node.nodeType;
        return (n === 1 || n === 3 || n === 8 ? node.nodeName.toLowerCase() : '');
    };
    HTMLAdaptor.prototype.value = function (node) {
        return node.nodeValue || '';
    };
    HTMLAdaptor.prototype.textContent = function (node) {
        return node.textContent;
    };
    HTMLAdaptor.prototype.innerHTML = function (node) {
        return node.innerHTML;
    };
    HTMLAdaptor.prototype.outerHTML = function (node) {
        return node.outerHTML;
    };
    HTMLAdaptor.prototype.serializeXML = function (node) {
        var serializer = new this.window.XMLSerializer();
        return serializer.serializeToString(node);
    };
    HTMLAdaptor.prototype.setAttribute = function (node, name, value, ns) {
        if (ns === void 0) { ns = null; }
        if (!ns) {
            return node.setAttribute(name, value);
        }
        name = ns.replace(/.*\//, '') + ':' + name.replace(/^.*:/, '');
        return node.setAttributeNS(ns, name, value);
    };
    HTMLAdaptor.prototype.getAttribute = function (node, name) {
        return node.getAttribute(name);
    };
    HTMLAdaptor.prototype.removeAttribute = function (node, name) {
        return node.removeAttribute(name);
    };
    HTMLAdaptor.prototype.hasAttribute = function (node, name) {
        return node.hasAttribute(name);
    };
    HTMLAdaptor.prototype.allAttributes = function (node) {
        return Array.from(node.attributes).map(function (x) {
            return { name: x.name, value: x.value };
        });
    };
    HTMLAdaptor.prototype.addClass = function (node, name) {
        if (node.classList) {
            node.classList.add(name);
        }
        else {
            node.className = (node.className + ' ' + name).trim();
        }
    };
    HTMLAdaptor.prototype.removeClass = function (node, name) {
        if (node.classList) {
            node.classList.remove(name);
        }
        else {
            node.className = node.className.split(/ /).filter(function (c) { return c !== name; }).join(' ');
        }
    };
    HTMLAdaptor.prototype.hasClass = function (node, name) {
        if (node.classList) {
            return node.classList.contains(name);
        }
        return node.className.split(/ /).indexOf(name) >= 0;
    };
    HTMLAdaptor.prototype.setStyle = function (node, name, value) {
        node.style[name] = value;
    };
    HTMLAdaptor.prototype.getStyle = function (node, name) {
        return node.style[name];
    };
    HTMLAdaptor.prototype.allStyles = function (node) {
        return node.style.cssText;
    };
    HTMLAdaptor.prototype.insertRules = function (node, rules) {
        var e_2, _a;
        try {
            for (var _b = __values(rules.reverse()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var rule = _c.value;
                try {
                    node.sheet.insertRule(rule, 0);
                }
                catch (e) {
                    console.warn("MathJax: can't insert css rule '".concat(rule, "': ").concat(e.message));
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
    };
    HTMLAdaptor.prototype.fontSize = function (node) {
        var style = this.window.getComputedStyle(node);
        return parseFloat(style.fontSize);
    };
    HTMLAdaptor.prototype.fontFamily = function (node) {
        var style = this.window.getComputedStyle(node);
        return style.fontFamily || '';
    };
    HTMLAdaptor.prototype.nodeSize = function (node, em, local) {
        if (em === void 0) { em = 1; }
        if (local === void 0) { local = false; }
        if (local && node.getBBox) {
            var _a = node.getBBox(), width = _a.width, height = _a.height;
            return [width / em, height / em];
        }
        return [node.offsetWidth / em, node.offsetHeight / em];
    };
    HTMLAdaptor.prototype.nodeBBox = function (node) {
        var _a = node.getBoundingClientRect(), left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;
        return { left: left, right: right, top: top, bottom: bottom };
    };
    return HTMLAdaptor;
}(DOMAdaptor_js_1.AbstractDOMAdaptor));
exports.HTMLAdaptor = HTMLAdaptor;
//# sourceMappingURL=HTMLAdaptor.js.map

/***/ }),

/***/ "../node_modules/mathjax-full/js/adaptors/browserAdaptor.js":
/*!******************************************************************!*\
  !*** ../node_modules/mathjax-full/js/adaptors/browserAdaptor.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.browserAdaptor = void 0;
var HTMLAdaptor_js_1 = __webpack_require__(/*! ./HTMLAdaptor.js */ "../node_modules/mathjax-full/js/adaptors/HTMLAdaptor.js");
function browserAdaptor() {
    return new HTMLAdaptor_js_1.HTMLAdaptor(window);
}
exports.browserAdaptor = browserAdaptor;
//# sourceMappingURL=browserAdaptor.js.map

/***/ }),

/***/ "../node_modules/mathjax-full/js/core/DOMAdaptor.js":
/*!**********************************************************!*\
  !*** ../node_modules/mathjax-full/js/core/DOMAdaptor.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports) {


var __values = (this && this.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AbstractDOMAdaptor = void 0;
var AbstractDOMAdaptor = (function () {
    function AbstractDOMAdaptor(document) {
        if (document === void 0) { document = null; }
        this.document = document;
    }
    AbstractDOMAdaptor.prototype.node = function (kind, def, children, ns) {
        var e_1, _a;
        if (def === void 0) { def = {}; }
        if (children === void 0) { children = []; }
        var node = this.create(kind, ns);
        this.setAttributes(node, def);
        try {
            for (var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {
                var child = children_1_1.value;
                this.append(node, child);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return node;
    };
    AbstractDOMAdaptor.prototype.setAttributes = function (node, def) {
        var e_2, _a, e_3, _b, e_4, _c;
        if (def.style && typeof (def.style) !== 'string') {
            try {
                for (var _d = __values(Object.keys(def.style)), _e = _d.next(); !_e.done; _e = _d.next()) {
                    var key = _e.value;
                    this.setStyle(node, key.replace(/-([a-z])/g, function (_m, c) { return c.toUpperCase(); }), def.style[key]);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
        if (def.properties) {
            try {
                for (var _f = __values(Object.keys(def.properties)), _g = _f.next(); !_g.done; _g = _f.next()) {
                    var key = _g.value;
                    node[key] = def.properties[key];
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
        try {
            for (var _h = __values(Object.keys(def)), _j = _h.next(); !_j.done; _j = _h.next()) {
                var key = _j.value;
                if ((key !== 'style' || typeof (def.style) === 'string') && key !== 'properties') {
                    this.setAttribute(node, key, def[key]);
                }
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (_j && !_j.done && (_c = _h.return)) _c.call(_h);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    AbstractDOMAdaptor.prototype.replace = function (nnode, onode) {
        this.insert(nnode, onode);
        this.remove(onode);
        return onode;
    };
    AbstractDOMAdaptor.prototype.childNode = function (node, i) {
        return this.childNodes(node)[i];
    };
    AbstractDOMAdaptor.prototype.allClasses = function (node) {
        var classes = this.getAttribute(node, 'class');
        return (!classes ? [] :
            classes.replace(/  +/g, ' ').replace(/^ /, '').replace(/ $/, '').split(/ /));
    };
    return AbstractDOMAdaptor;
}());
exports.AbstractDOMAdaptor = AbstractDOMAdaptor;
//# sourceMappingURL=DOMAdaptor.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfbWF0aGpheC1mdWxsX2pzX2FkYXB0b3JzX2Jyb3dzZXJBZGFwdG9yX2pzLmM2YjlmOGIyNzc2MWRjN2U0NjgyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0Isc0NBQXNDLGtCQUFrQjtBQUN2Riw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG1CQUFtQjtBQUNuQixzQkFBc0IsbUJBQU8sQ0FBQyxpRkFBdUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsaUJBQWlCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLG9CQUFvQjtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLFVBQVU7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsQ0FBQztBQUNELG1CQUFtQjtBQUNuQjs7Ozs7Ozs7OztBQ2hRYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0I7QUFDdEIsdUJBQXVCLG1CQUFPLENBQUMsaUZBQWtCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0Qjs7Ozs7Ozs7OztBQ1JhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQSx3RkFBd0Ysb0JBQW9CO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0YsVUFBVTtBQUMxRjtBQUNBLG9GQUFvRix5QkFBeUI7QUFDN0c7QUFDQTtBQUNBLDRCQUE0QixRQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLFVBQVU7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsUUFBUTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsVUFBVTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwwQkFBMEI7QUFDMUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi4vbm9kZV9tb2R1bGVzL21hdGhqYXgtZnVsbC9qcy9hZGFwdG9ycy9IVE1MQWRhcHRvci5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi4vbm9kZV9tb2R1bGVzL21hdGhqYXgtZnVsbC9qcy9hZGFwdG9ycy9icm93c2VyQWRhcHRvci5qcyIsIndlYnBhY2s6Ly9AanVweXRlcmxhYi9hcHBsaWNhdGlvbi10b3AvLi4vbm9kZV9tb2R1bGVzL21hdGhqYXgtZnVsbC9qcy9jb3JlL0RPTUFkYXB0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fdmFsdWVzID0gKHRoaXMgJiYgdGhpcy5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykge1xuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5IVE1MQWRhcHRvciA9IHZvaWQgMDtcbnZhciBET01BZGFwdG9yX2pzXzEgPSByZXF1aXJlKFwiLi4vY29yZS9ET01BZGFwdG9yLmpzXCIpO1xudmFyIEhUTUxBZGFwdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSFRNTEFkYXB0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSFRNTEFkYXB0b3Iod2luZG93KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHdpbmRvdy5kb2N1bWVudCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMud2luZG93ID0gd2luZG93O1xuICAgICAgICBfdGhpcy5wYXJzZXIgPSBuZXcgd2luZG93LkRPTVBhcnNlcigpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uICh0ZXh0LCBmb3JtYXQpIHtcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7IGZvcm1hdCA9ICd0ZXh0L2h0bWwnOyB9XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlci5wYXJzZUZyb21TdHJpbmcodGV4dCwgZm9ybWF0KTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoa2luZCwgbnMpIHtcbiAgICAgICAgcmV0dXJuIChucyA/XG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywga2luZCkgOlxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGtpbmQpKTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUuaGVhZCA9IGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgICAgcmV0dXJuIGRvYy5oZWFkIHx8IGRvYztcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5ib2R5ID0gZnVuY3Rpb24gKGRvYykge1xuICAgICAgICByZXR1cm4gZG9jLmJvZHkgfHwgZG9jO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLnJvb3QgPSBmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgIHJldHVybiBkb2MuZG9jdW1lbnRFbGVtZW50IHx8IGRvYztcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5kb2N0eXBlID0gZnVuY3Rpb24gKGRvYykge1xuICAgICAgICByZXR1cm4gKGRvYy5kb2N0eXBlID8gXCI8IURPQ1RZUEUgXCIuY29uY2F0KGRvYy5kb2N0eXBlLm5hbWUsIFwiPlwiKSA6ICcnKTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS50YWdzID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUsIG5zKSB7XG4gICAgICAgIGlmIChucyA9PT0gdm9pZCAwKSB7IG5zID0gbnVsbDsgfVxuICAgICAgICB2YXIgbm9kZXMgPSAobnMgPyBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMobnMsIG5hbWUpIDogbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShuYW1lKSk7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5vZGVzKTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5nZXRFbGVtZW50cyA9IGZ1bmN0aW9uIChub2RlcywgX2RvY3VtZW50KSB7XG4gICAgICAgIHZhciBlXzEsIF9hO1xuICAgICAgICB2YXIgY29udGFpbmVycyA9IFtdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgbm9kZXNfMSA9IF9fdmFsdWVzKG5vZGVzKSwgbm9kZXNfMV8xID0gbm9kZXNfMS5uZXh0KCk7ICFub2Rlc18xXzEuZG9uZTsgbm9kZXNfMV8xID0gbm9kZXNfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVzXzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChub2RlKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVycyA9IGNvbnRhaW5lcnMuY29uY2F0KEFycmF5LmZyb20odGhpcy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG5vZGUpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVycyA9IGNvbnRhaW5lcnMuY29uY2F0KEFycmF5LmZyb20obm9kZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgdGhpcy53aW5kb3cuTm9kZUxpc3QgfHwgbm9kZSBpbnN0YW5jZW9mIHRoaXMud2luZG93LkhUTUxDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnMgPSBjb250YWluZXJzLmNvbmNhdChBcnJheS5mcm9tKG5vZGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnMucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChub2Rlc18xXzEgJiYgIW5vZGVzXzFfMS5kb25lICYmIChfYSA9IG5vZGVzXzEucmV0dXJuKSkgX2EuY2FsbChub2Rlc18xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGFpbmVycztcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChjb250YWluZXIsIG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5jb250YWlucyhub2RlKTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5wYXJlbnQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChub2RlLCBjaGlsZCkge1xuICAgICAgICByZXR1cm4gbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKG5jaGlsZCwgb2NoaWxkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudChvY2hpbGQpLmluc2VydEJlZm9yZShuY2hpbGQsIG9jaGlsZCk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudChjaGlsZCkucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiAobm5vZGUsIG9ub2RlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudChvbm9kZSkucmVwbGFjZUNoaWxkKG5ub2RlLCBvbm9kZSk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiAobm9kZSwgbikge1xuICAgICAgICByZXR1cm4gbm9kZS5zcGxpdFRleHQobik7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLnByZXZpb3VzID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLmZpcnN0Q2hpbGQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5maXJzdENoaWxkO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLmxhc3RDaGlsZCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLmxhc3RDaGlsZDtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5jaGlsZE5vZGVzID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obm9kZS5jaGlsZE5vZGVzKTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5jaGlsZE5vZGUgPSBmdW5jdGlvbiAobm9kZSwgaSkge1xuICAgICAgICByZXR1cm4gbm9kZS5jaGlsZE5vZGVzW2ldO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLmtpbmQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgbiA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgIHJldHVybiAobiA9PT0gMSB8fCBuID09PSAzIHx8IG4gPT09IDggPyBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgOiAnJyk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5ub2RlVmFsdWUgfHwgJyc7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUudGV4dENvbnRlbnQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS50ZXh0Q29udGVudDtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5pbm5lckhUTUwgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5pbm5lckhUTUw7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUub3V0ZXJIVE1MID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUub3V0ZXJIVE1MO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLnNlcmlhbGl6ZVhNTCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBzZXJpYWxpemVyID0gbmV3IHRoaXMud2luZG93LlhNTFNlcmlhbGl6ZXIoKTtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZXIuc2VyaWFsaXplVG9TdHJpbmcobm9kZSk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUsIHZhbHVlLCBucykge1xuICAgICAgICBpZiAobnMgPT09IHZvaWQgMCkgeyBucyA9IG51bGw7IH1cbiAgICAgICAgaWYgKCFucykge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBuYW1lID0gbnMucmVwbGFjZSgvLipcXC8vLCAnJykgKyAnOicgKyBuYW1lLnJlcGxhY2UoL14uKjovLCAnJyk7XG4gICAgICAgIHJldHVybiBub2RlLnNldEF0dHJpYnV0ZU5TKG5zLCBuYW1lLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUuZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5oYXNBdHRyaWJ1dGUgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUobmFtZSk7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUuYWxsQXR0cmlidXRlcyA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5vZGUuYXR0cmlidXRlcykubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiB4Lm5hbWUsIHZhbHVlOiB4LnZhbHVlIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUpIHtcbiAgICAgICAgaWYgKG5vZGUuY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9IChub2RlLmNsYXNzTmFtZSArICcgJyArIG5hbWUpLnRyaW0oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUpIHtcbiAgICAgICAgaWYgKG5vZGUuY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9IG5vZGUuY2xhc3NOYW1lLnNwbGl0KC8gLykuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjICE9PSBuYW1lOyB9KS5qb2luKCcgJyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5oYXNDbGFzcyA9IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7XG4gICAgICAgIGlmIChub2RlLmNsYXNzTGlzdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlLmNsYXNzTmFtZS5zcGxpdCgvIC8pLmluZGV4T2YobmFtZSkgPj0gMDtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgICBub2RlLnN0eWxlW25hbWVdID0gdmFsdWU7XG4gICAgfTtcbiAgICBIVE1MQWRhcHRvci5wcm90b3R5cGUuZ2V0U3R5bGUgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5zdHlsZVtuYW1lXTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5hbGxTdHlsZXMgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5zdHlsZS5jc3NUZXh0O1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLmluc2VydFJ1bGVzID0gZnVuY3Rpb24gKG5vZGUsIHJ1bGVzKSB7XG4gICAgICAgIHZhciBlXzIsIF9hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyhydWxlcy5yZXZlcnNlKCkpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSBfYy52YWx1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLnNoZWV0Lmluc2VydFJ1bGUocnVsZSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk1hdGhKYXg6IGNhbid0IGluc2VydCBjc3MgcnVsZSAnXCIuY29uY2F0KHJ1bGUsIFwiJzogXCIpLmNvbmNhdChlLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVfMl8xKSB7IGVfMiA9IHsgZXJyb3I6IGVfMl8xIH07IH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLmZvbnRTaXplID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy53aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc3R5bGUuZm9udFNpemUpO1xuICAgIH07XG4gICAgSFRNTEFkYXB0b3IucHJvdG90eXBlLmZvbnRGYW1pbHkgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLndpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgICAgICByZXR1cm4gc3R5bGUuZm9udEZhbWlseSB8fCAnJztcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5ub2RlU2l6ZSA9IGZ1bmN0aW9uIChub2RlLCBlbSwgbG9jYWwpIHtcbiAgICAgICAgaWYgKGVtID09PSB2b2lkIDApIHsgZW0gPSAxOyB9XG4gICAgICAgIGlmIChsb2NhbCA9PT0gdm9pZCAwKSB7IGxvY2FsID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGxvY2FsICYmIG5vZGUuZ2V0QkJveCkge1xuICAgICAgICAgICAgdmFyIF9hID0gbm9kZS5nZXRCQm94KCksIHdpZHRoID0gX2Eud2lkdGgsIGhlaWdodCA9IF9hLmhlaWdodDtcbiAgICAgICAgICAgIHJldHVybiBbd2lkdGggLyBlbSwgaGVpZ2h0IC8gZW1dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbbm9kZS5vZmZzZXRXaWR0aCAvIGVtLCBub2RlLm9mZnNldEhlaWdodCAvIGVtXTtcbiAgICB9O1xuICAgIEhUTUxBZGFwdG9yLnByb3RvdHlwZS5ub2RlQkJveCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBfYSA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGxlZnQgPSBfYS5sZWZ0LCByaWdodCA9IF9hLnJpZ2h0LCB0b3AgPSBfYS50b3AsIGJvdHRvbSA9IF9hLmJvdHRvbTtcbiAgICAgICAgcmV0dXJuIHsgbGVmdDogbGVmdCwgcmlnaHQ6IHJpZ2h0LCB0b3A6IHRvcCwgYm90dG9tOiBib3R0b20gfTtcbiAgICB9O1xuICAgIHJldHVybiBIVE1MQWRhcHRvcjtcbn0oRE9NQWRhcHRvcl9qc18xLkFic3RyYWN0RE9NQWRhcHRvcikpO1xuZXhwb3J0cy5IVE1MQWRhcHRvciA9IEhUTUxBZGFwdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SFRNTEFkYXB0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmJyb3dzZXJBZGFwdG9yID0gdm9pZCAwO1xudmFyIEhUTUxBZGFwdG9yX2pzXzEgPSByZXF1aXJlKFwiLi9IVE1MQWRhcHRvci5qc1wiKTtcbmZ1bmN0aW9uIGJyb3dzZXJBZGFwdG9yKCkge1xuICAgIHJldHVybiBuZXcgSFRNTEFkYXB0b3JfanNfMS5IVE1MQWRhcHRvcih3aW5kb3cpO1xufVxuZXhwb3J0cy5icm93c2VyQWRhcHRvciA9IGJyb3dzZXJBZGFwdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3NlckFkYXB0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX192YWx1ZXMgPSAodGhpcyAmJiB0aGlzLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFic3RyYWN0RE9NQWRhcHRvciA9IHZvaWQgMDtcbnZhciBBYnN0cmFjdERPTUFkYXB0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0RE9NQWRhcHRvcihkb2N1bWVudCkge1xuICAgICAgICBpZiAoZG9jdW1lbnQgPT09IHZvaWQgMCkgeyBkb2N1bWVudCA9IG51bGw7IH1cbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgIH1cbiAgICBBYnN0cmFjdERPTUFkYXB0b3IucHJvdG90eXBlLm5vZGUgPSBmdW5jdGlvbiAoa2luZCwgZGVmLCBjaGlsZHJlbiwgbnMpIHtcbiAgICAgICAgdmFyIGVfMSwgX2E7XG4gICAgICAgIGlmIChkZWYgPT09IHZvaWQgMCkgeyBkZWYgPSB7fTsgfVxuICAgICAgICBpZiAoY2hpbGRyZW4gPT09IHZvaWQgMCkgeyBjaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5jcmVhdGUoa2luZCwgbnMpO1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZXMobm9kZSwgZGVmKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAodmFyIGNoaWxkcmVuXzEgPSBfX3ZhbHVlcyhjaGlsZHJlbiksIGNoaWxkcmVuXzFfMSA9IGNoaWxkcmVuXzEubmV4dCgpOyAhY2hpbGRyZW5fMV8xLmRvbmU7IGNoaWxkcmVuXzFfMSA9IGNoaWxkcmVuXzEubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5fMV8xLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kKG5vZGUsIGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuXzFfMSAmJiAhY2hpbGRyZW5fMV8xLmRvbmUgJiYgKF9hID0gY2hpbGRyZW5fMS5yZXR1cm4pKSBfYS5jYWxsKGNoaWxkcmVuXzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gICAgQWJzdHJhY3RET01BZGFwdG9yLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKG5vZGUsIGRlZikge1xuICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYiwgZV80LCBfYztcbiAgICAgICAgaWYgKGRlZi5zdHlsZSAmJiB0eXBlb2YgKGRlZi5zdHlsZSkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9kID0gX192YWx1ZXMoT2JqZWN0LmtleXMoZGVmLnN0eWxlKSksIF9lID0gX2QubmV4dCgpOyAhX2UuZG9uZTsgX2UgPSBfZC5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IF9lLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0eWxlKG5vZGUsIGtleS5yZXBsYWNlKC8tKFthLXpdKS9nLCBmdW5jdGlvbiAoX20sIGMpIHsgcmV0dXJuIGMudG9VcHBlckNhc2UoKTsgfSksIGRlZi5zdHlsZVtrZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9lICYmICFfZS5kb25lICYmIChfYSA9IF9kLnJldHVybikpIF9hLmNhbGwoX2QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9mID0gX192YWx1ZXMoT2JqZWN0LmtleXMoZGVmLnByb3BlcnRpZXMpKSwgX2cgPSBfZi5uZXh0KCk7ICFfZy5kb25lOyBfZyA9IF9mLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2cudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVba2V5XSA9IGRlZi5wcm9wZXJ0aWVzW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfM18xKSB7IGVfMyA9IHsgZXJyb3I6IGVfM18xIH07IH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZyAmJiAhX2cuZG9uZSAmJiAoX2IgPSBfZi5yZXR1cm4pKSBfYi5jYWxsKF9mKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzMpIHRocm93IGVfMy5lcnJvcjsgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaCA9IF9fdmFsdWVzKE9iamVjdC5rZXlzKGRlZikpLCBfaiA9IF9oLm5leHQoKTsgIV9qLmRvbmU7IF9qID0gX2gubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9qLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICgoa2V5ICE9PSAnc3R5bGUnIHx8IHR5cGVvZiAoZGVmLnN0eWxlKSA9PT0gJ3N0cmluZycpICYmIGtleSAhPT0gJ3Byb3BlcnRpZXMnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKG5vZGUsIGtleSwgZGVmW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZV80XzEpIHsgZV80ID0geyBlcnJvcjogZV80XzEgfTsgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKF9qICYmICFfai5kb25lICYmIChfYyA9IF9oLnJldHVybikpIF9jLmNhbGwoX2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBBYnN0cmFjdERPTUFkYXB0b3IucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiAobm5vZGUsIG9ub2RlKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KG5ub2RlLCBvbm9kZSk7XG4gICAgICAgIHRoaXMucmVtb3ZlKG9ub2RlKTtcbiAgICAgICAgcmV0dXJuIG9ub2RlO1xuICAgIH07XG4gICAgQWJzdHJhY3RET01BZGFwdG9yLnByb3RvdHlwZS5jaGlsZE5vZGUgPSBmdW5jdGlvbiAobm9kZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZE5vZGVzKG5vZGUpW2ldO1xuICAgIH07XG4gICAgQWJzdHJhY3RET01BZGFwdG9yLnByb3RvdHlwZS5hbGxDbGFzc2VzID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIGNsYXNzZXMgPSB0aGlzLmdldEF0dHJpYnV0ZShub2RlLCAnY2xhc3MnKTtcbiAgICAgICAgcmV0dXJuICghY2xhc3NlcyA/IFtdIDpcbiAgICAgICAgICAgIGNsYXNzZXMucmVwbGFjZSgvICArL2csICcgJykucmVwbGFjZSgvXiAvLCAnJykucmVwbGFjZSgvICQvLCAnJykuc3BsaXQoLyAvKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQWJzdHJhY3RET01BZGFwdG9yO1xufSgpKTtcbmV4cG9ydHMuQWJzdHJhY3RET01BZGFwdG9yID0gQWJzdHJhY3RET01BZGFwdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RE9NQWRhcHRvci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=