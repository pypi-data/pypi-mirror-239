"use strict";(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[6212],{30179:(t,e,a)=>{a.r(e);a.d(e,{diagram:()=>w});var r=a(63422);var n=a(54333);var i=a(26010);var d=a(67058);var s=a(60777);var o=a(81410);var l=a(27484);var c=a.n(l);var p=a(17967);var g=a(27856);var h=a.n(g);let f={};const u=20;const x=function(t){const e=Object.entries(f).find((e=>e[1].label===t));if(e){return e[0]}};const y=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z");t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z");t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z");t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z");t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z");t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z");t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z");t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")};const b=function(t,e,a,r){const l=(0,s.c)().class;f={};s.l.info("Rendering diagram "+t);const c=(0,s.c)().securityLevel;let p;if(c==="sandbox"){p=(0,n.Ys)("#i"+e)}const g=c==="sandbox"?(0,n.Ys)(p.nodes()[0].contentDocument.body):(0,n.Ys)("body");const h=g.select(`[id='${e}']`);y(h);const b=new d.k({multigraph:true});b.setGraph({isMultiGraph:true});b.setDefaultEdgeLabel((function(){return{}}));const m=r.db.getClasses();const w=Object.keys(m);for(const n of w){const t=m[n];const e=o.s.drawClass(h,t,l,r);f[e.id]=e;b.setNode(e.id,e);s.l.info("Org height: "+e.height)}const k=r.db.getRelations();k.forEach((function(t){s.l.info("tjoho"+x(t.id1)+x(t.id2)+JSON.stringify(t));b.setEdge(x(t.id1),x(t.id2),{relation:t},t.title||"DEFAULT")}));const v=r.db.getNotes();v.forEach((function(t){s.l.debug(`Adding note: ${JSON.stringify(t)}`);const e=o.s.drawNote(h,t,l,r);f[e.id]=e;b.setNode(e.id,e);if(t.class&&t.class in m){b.setEdge(t.id,x(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}}));(0,i.bK)(b);b.nodes().forEach((function(t){if(t!==void 0&&b.node(t)!==void 0){s.l.debug("Node "+t+": "+JSON.stringify(b.node(t)));g.select("#"+(r.db.lookUpDomId(t)||t)).attr("transform","translate("+(b.node(t).x-b.node(t).width/2)+","+(b.node(t).y-b.node(t).height/2)+" )")}}));b.edges().forEach((function(t){if(t!==void 0&&b.edge(t)!==void 0){s.l.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(b.edge(t)));o.s.drawEdge(h,b.edge(t),b.edge(t).relation,l,r)}}));const E=h.node().getBBox();const L=E.width+u*2;const M=E.height+u*2;(0,s.i)(h,M,L,l.useMaxWidth);const N=`${E.x-u} ${E.y-u} ${L} ${M}`;s.l.debug(`viewBox ${N}`);h.attr("viewBox",N)};const m={draw:b};const w={parser:r.p,db:r.d,renderer:m,styles:r.s,init:t=>{if(!t.class){t.class={}}t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute;r.d.clear()}}},81410:(t,e,a)=>{a.d(e,{p:()=>c,s:()=>h});var r=a(54333);var n=a(60777);let i=0;const d=function(t,e,a,d,s){const o=function(t){switch(t){case s.db.relationType.AGGREGATION:return"aggregation";case s.db.relationType.EXTENSION:return"extension";case s.db.relationType.COMPOSITION:return"composition";case s.db.relationType.DEPENDENCY:return"dependency";case s.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter((t=>!Number.isNaN(t.y)));const l=e.points;const c=(0,r.jvg)().x((function(t){return t.x})).y((function(t){return t.y})).curve(r.$0Z);const p=t.append("path").attr("d",c(l)).attr("id","edge"+i).attr("class","relation");let g="";if(d.arrowMarkerAbsolute){g=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search;g=g.replace(/\(/g,"\\(");g=g.replace(/\)/g,"\\)")}if(a.relation.lineType==1){p.attr("class","relation dashed-line")}if(a.relation.lineType==10){p.attr("class","relation dotted-line")}if(a.relation.type1!=="none"){p.attr("marker-start","url("+g+"#"+o(a.relation.type1)+"Start)")}if(a.relation.type2!=="none"){p.attr("marker-end","url("+g+"#"+o(a.relation.type2)+"End)")}let h,f;const u=e.points.length;let x=n.u.calcLabelPosition(e.points);h=x.x;f=x.y;let y,b;let m,w;if(u%2!==0&&u>1){let t=n.u.calcCardinalityPosition(a.relation.type1!=="none",e.points,e.points[0]);let r=n.u.calcCardinalityPosition(a.relation.type2!=="none",e.points,e.points[u-1]);n.l.debug("cardinality_1_point "+JSON.stringify(t));n.l.debug("cardinality_2_point "+JSON.stringify(r));y=t.x;b=t.y;m=r.x;w=r.y}if(a.title!==void 0){const e=t.append("g").attr("class","classLabel");const r=e.append("text").attr("class","label").attr("x",h).attr("y",f).attr("fill","red").attr("text-anchor","middle").text(a.title);window.label=r;const n=r.node().getBBox();e.insert("rect",":first-child").attr("class","box").attr("x",n.x-d.padding/2).attr("y",n.y-d.padding/2).attr("width",n.width+d.padding).attr("height",n.height+d.padding)}n.l.info("Rendering relation "+JSON.stringify(a));if(a.relationTitle1!==void 0&&a.relationTitle1!=="none"){const e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type1").attr("x",y).attr("y",b).attr("fill","black").attr("font-size","6").text(a.relationTitle1)}if(a.relationTitle2!==void 0&&a.relationTitle2!=="none"){const e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type2").attr("x",m).attr("y",w).attr("fill","black").attr("font-size","6").text(a.relationTitle2)}i++};const s=function(t,e,a,r){n.l.debug("Rendering class ",e,a);const i=e.id;const d={id:i,label:e.id,width:0,height:0};const s=t.append("g").attr("id",r.db.lookUpDomId(i)).attr("class","classGroup");let l;if(e.link){l=s.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",a.textHeight+a.padding).attr("x",0)}else{l=s.append("text").attr("y",a.textHeight+a.padding).attr("x",0)}let c=true;e.annotations.forEach((function(t){const e=l.append("tspan").text("«"+t+"»");if(!c){e.attr("dy",a.textHeight)}c=false}));let g=o(e);const h=l.append("tspan").text(g).attr("class","title");if(!c){h.attr("dy",a.textHeight)}const f=l.node().getBBox().height;const u=s.append("line").attr("x1",0).attr("y1",a.padding+f+a.dividerMargin/2).attr("y2",a.padding+f+a.dividerMargin/2);const x=s.append("text").attr("x",a.padding).attr("y",f+a.dividerMargin+a.textHeight).attr("fill","white").attr("class","classText");c=true;e.members.forEach((function(t){p(x,t,c,a);c=false}));const y=x.node().getBBox();const b=s.append("line").attr("x1",0).attr("y1",a.padding+f+a.dividerMargin+y.height).attr("y2",a.padding+f+a.dividerMargin+y.height);const m=s.append("text").attr("x",a.padding).attr("y",f+2*a.dividerMargin+y.height+a.textHeight).attr("fill","white").attr("class","classText");c=true;e.methods.forEach((function(t){p(m,t,c,a);c=false}));const w=s.node().getBBox();var k=" ";if(e.cssClasses.length>0){k=k+e.cssClasses.join(" ")}const v=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",w.width+2*a.padding).attr("height",w.height+a.padding+.5*a.dividerMargin).attr("class",k);const E=v.node().getBBox().width;l.node().childNodes.forEach((function(t){t.setAttribute("x",(E-t.getBBox().width)/2)}));if(e.tooltip){l.insert("title").text(e.tooltip)}u.attr("x2",E);b.attr("x2",E);d.width=E;d.height=w.height+a.padding+.5*a.dividerMargin;return d};const o=function(t){let e=t.id;if(t.type){e+="<"+t.type+">"}return e};const l=function(t,e,a,r){n.l.debug("Rendering note ",e,a);const i=e.id;const d={id:i,text:e.text,width:0,height:0};const s=t.append("g").attr("id",i).attr("class","classGroup");let o=s.append("text").attr("y",a.textHeight+a.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split("\n");l.forEach((function(t){n.l.debug(`Adding line: ${t}`);o.append("tspan").text(t).attr("class","title").attr("dy",a.textHeight)}));const c=s.node().getBBox();const p=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",c.width+2*a.padding).attr("height",c.height+l.length*a.textHeight+a.padding+.5*a.dividerMargin);const g=p.node().getBBox().width;o.node().childNodes.forEach((function(t){t.setAttribute("x",(g-t.getBBox().width)/2)}));d.width=g;d.height=c.height+l.length*a.textHeight+a.padding+.5*a.dividerMargin;return d};const c=function(t){let e="";let a="";let r="";let i="";let d=t.substring(0,1);let s=t.substring(t.length-1,t.length);if(d.match(/[#+~-]/)){i=d}let o=/[\s\w)~]/;if(!s.match(o)){a=g(s)}const l=i===""?0:1;let c=a===""?t.length:t.length-1;t=t.substring(l,c);const p=t.indexOf("(");const h=t.indexOf(")");const f=p>1&&h>p&&h<=t.length;if(f){let d=t.substring(0,p).trim();const s=t.substring(p+1,h);e=i+d+"("+(0,n.x)(s.trim())+")";if(h<t.length){let i=t.substring(h+1,h+2);if(a===""&&!i.match(o)){a=g(i);r=t.substring(h+2).trim()}else{r=t.substring(h+1).trim()}if(r!==""){if(r.charAt(0)===":"){r=r.substring(1).trim()}r=" : "+(0,n.x)(r);e+=r}}}else{e=i+(0,n.x)(t)}return{displayText:e,cssStyle:a}};const p=function(t,e,a,r){let n=c(e);const i=t.append("tspan").attr("x",r.padding).text(n.displayText);if(n.cssStyle!==""){i.attr("style",n.cssStyle)}if(!a){i.attr("dy",r.textHeight)}};const g=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}};const h={getClassTitleString:o,drawClass:s,drawEdge:d,drawNote:l,parseMember:c}}}]);
//# sourceMappingURL=6212.02dbacaab3b309472d65.js.map?v=02dbacaab3b309472d65