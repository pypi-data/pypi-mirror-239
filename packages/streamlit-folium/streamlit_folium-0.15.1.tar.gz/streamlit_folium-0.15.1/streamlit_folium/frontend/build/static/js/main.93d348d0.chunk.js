(this.webpackJsonpstreamlit_folium=this.webpackJsonpstreamlit_folium||[]).push([[0],{4:function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));const _=6378137;function n(e){return e*Math.PI/180}function a(e){return 180*e/Math.PI}function r(e,t,o,_){var r=n(e[1]),l=n(e[0]),i=t/o,c=Math.asin(Math.sin(r)*Math.cos(i)+Math.cos(r)*Math.sin(i)*Math.cos(_));return[a(l+Math.atan2(Math.sin(_)*Math.sin(i)*Math.cos(r),Math.cos(i)-Math.sin(r)*Math.sin(c))),a(c)]}function l(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;for(var n=[],a=0;a<o;++a)n.push(r(e,t,_,2*Math.PI*a/o));return n.push(n[0]),{type:"Polygon",coordinates:[n]}}},6:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),underscore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_circle_to_polygon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4);function onMapClick(e){window.__GLOBAL_DATA__.lat_lng_clicked=e.latlng,debouncedUpdateComponentValue(window.map)}let debouncedUpdateComponentValue=Object(underscore__WEBPACK_IMPORTED_MODULE_1__.a)(updateComponentValue,250);function updateComponentValue(e){const t=window.__GLOBAL_DATA__;let o=t.previous_data,_=e.getBounds(),n=e.getZoom(),a={last_clicked:t.lat_lng_clicked,last_object_clicked:t.last_object_clicked,last_object_clicked_tooltip:t.last_object_clicked_tooltip,last_object_clicked_popup:t.last_object_clicked_popup,all_drawings:t.all_drawings,last_active_drawing:t.last_active_drawing,bounds:_,zoom:n,last_circle_radius:t.last_circle_radius,last_circle_polygon:t.last_circle_polygon,center:e.getCenter()},r={};r=t.returned_objects?Object.fromEntries(Object.entries(a).filter((e=>{let[o]=e;return t.returned_objects.includes(o)}))):a,JSON.stringify(o)!==JSON.stringify(r)&&(t.previous_data=r,streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__.a.setComponentValue(r))}function onMapMove(e){debouncedUpdateComponentValue(window.map)}function extractContent(e){var t=document.createElement("span");return t.innerHTML=e,(t.textContent||t.innerText).trim()}function onDraw(e){const t=window.__GLOBAL_DATA__;var o=e.layerType,_=e.layer;if("circle"===o){var n=[_._latlng.lng,_._latlng.lat],a=_.options.radius,r=Object(_circle_to_polygon__WEBPACK_IMPORTED_MODULE_2__.a)(n,a),l=e.layer.feature=e.layer.feature||{};l.type="Feature",l.properties=l.properties||{},l.properties.radius=a,t.last_circle_radius=a/1e3,t.last_circle_polygon=r}return onLayerClick(e)}function onLayerClick(e){const t=window.__GLOBAL_DATA__;if(t.last_object_clicked=e.latlng,e.sourceTarget._tooltip&&e.sourceTarget._tooltip._content){let o=extractContent(e.sourceTarget.getTooltip().getContent());t.last_object_clicked_tooltip=o}else if(e.target._tooltip&&e.target._tooltip._content){let o=e.target.getTooltip().getContent()(e.sourceTarget).innerText;t.last_object_clicked_tooltip=o}if(e.sourceTarget._popup&&e.sourceTarget._popup._content){let o=e.sourceTarget.getPopup().getContent().innerText;t.last_object_clicked_popup=o}else if(e.target._popup&&e.target._popup._content){let o=e.target.getPopup().getContent()(e.sourceTarget).innerText;t.last_object_clicked_popup=o}let o=[];e.layer&&e.layer.toGeoJSON&&(t.last_active_drawing=e.layer.toGeoJSON()),window.drawnItems.toGeoJSON&&(o=window.drawnItems.toGeoJSON().features),t.all_drawings=o,debouncedUpdateComponentValue(window.map)}function onRender(event){const data=event.detail,script=data.args.script,height=data.args.height,width=data.args.width,html=data.args.html,returned_objects=data.args.returned_objects,_default=data.args.default,zoom=data.args.zoom,center=data.args.center,feature_group=data.args.feature_group,return_on_hover=data.args.return_on_hover;if(!window.map){const e=document.getElementById("parent"),t=document.getElementById("map_div"),o=document.getElementById("map_div2");if(o&&(o.style.height="".concat(height,"px"),o.style.width="".concat(width,"px")),t){if(t.style.height="".concat(height,"px"),t.style.width="".concat(width,"px"),-1!==script.indexOf("document.getElementById('export')")){let e=document.createElement("a");e.href="#",e.id="export",e.innerHTML="Export",document.body.appendChild(e)}const o=document.createElement("script");window.__GLOBAL_DATA__={lat_lng_clicked:null,last_object_clicked:null,last_object_clicked_tooltip:null,last_object_clicked_popup:null,all_drawings:null,last_active_drawing:null,zoom:null,last_circle_radius:null,last_circle_polygon:null,returned_objects:returned_objects,previous_data:_default,last_zoom:null,last_center:null,last_feature_group:null},-1!==script.indexOf("map_div2")&&(null===e||void 0===e||e.classList.remove("single"),null===e||void 0===e||e.classList.add("double")),o.innerHTML=script+"window.map = map_div; window.initComponent(map_div, ".concat(return_on_hover,");"),document.body.appendChild(o);const _=document.createElement("div");_.innerHTML=html,document.body.appendChild(_)}}if(feature_group&&feature_group!==window.__GLOBAL_DATA__.last_feature_group){window.feature_group&&window.map.removeLayer(window.feature_group),eval(feature_group),window.__GLOBAL_DATA__.last_feature_group=feature_group;for(let e in window.map._layers){let t=window.map._layers[e];t.off("click",onLayerClick),t.on("click",onLayerClick),return_on_hover&&(t.off("mouseover",onLayerClick),t.on("mouseover",onLayerClick))}}zoom&&zoom!==window.__GLOBAL_DATA__.last_zoom&&(window.map.setZoom(zoom),window.__GLOBAL_DATA__.last_zoom=zoom),center&&JSON.stringify(center)!==JSON.stringify(window.__GLOBAL_DATA__.last_center)&&(window.map.panTo(center),window.__GLOBAL_DATA__.last_center=center)}window.initComponent=(e,t)=>{e.on("click",onMapClick),e.on("moveend",onMapMove);for(let o in e._layers){let _=e._layers[o];_.on("click",onLayerClick),t&&_.on("mouseover",onLayerClick)}e.on("draw:created",onDraw),e.on("draw:edited",onDraw),e.on("draw:deleted",onDraw),streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__.a.setFrameHeight(),updateComponentValue(e)},streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__.a.events.addEventListener(streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__.a.RENDER_EVENT,onRender),streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__.a.setComponentReady(),streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__.a.setFrameHeight()}},[[6,1,2]]]);
//# sourceMappingURL=main.93d348d0.chunk.js.map